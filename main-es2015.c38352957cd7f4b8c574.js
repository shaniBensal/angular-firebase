(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),s=n("lJxs"),a=n("Cfvw");function u(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(u((n,r)=>Object(a.a)(t(n,r)).pipe(Object(s.a)((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new c(t,n)))}class c{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}class l extends i.a{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new o.a(this,e,n),s=this.destination;s.add(i);const a=Object(r.a)(this,t,void 0,void 0,i);a!==i&&s.add(a)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Dv":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("mrSG"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),y=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=m.apply(null,i):n+="object"==typeof i?Object(o.F)(i):i,n+=" "}return n},g=null,v=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,g=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?g=t:(g=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===g&&!0===f.get("logging_enabled")&&b(!0)),g){var n=m.apply(null,t);g(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(i.f)(t));d.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(i.f)(t));d.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},O="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===O||e===I)return-1;if(e===O||t===I)return 1;var n=W(t),r=W(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},j=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(o.F)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.F)(e[i]),r+=":",r+=N(t[e[i]]);return r+"}"},k=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function D(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P,R,M,L,F,V,U,q,H,z,B=function(t){var e,n,r,i,s;Object(o.d)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},G=new RegExp("^-?(0*)\\d{1,10}$"),W=function(t){if(G.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},K=function(t){try{t()}catch(e){setTimeout((function(){throw S("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},$=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Q=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Y=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.D)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.D)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Z=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.d)("string"==typeof t,"typeof type must == string"),Object(o.d)("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return D(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),J=function(t,e){var n=X(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new Q(n.pathString)}},X=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},tt=/[\[\].#$\/\u0000-\u001F\u007F]/,et=/[\[\].#$\u0000-\u001F\u007F]/,nt=function(t){return"string"==typeof t&&0!==t.length&&!tt.test(t)},rt=function(t){return"string"==typeof t&&0!==t.length&&!et.test(t)},it=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},ot=function(t,e,n,r,i){i&&void 0===n||st(Object(o.l)(t,e,i),n,r)},st=function(t,e,n){var r=n instanceof Q?new Y(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Object(o.D)(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(D(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!nt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),st(t,n,r),r.pop()})),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},at=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];D(n,(function(t,e){var n=new Q(t);if(st(s,e,r.child(n)),".priority"===n.getBack()&&!it(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!nt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Q.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ut=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!it(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ct=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},lt=function(t,e,n,r){if(!(r&&void 0===n||nt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ht=function(t,e,n,r){if(!(r&&void 0===n||rt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ft=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ht(t,e,n,r)},dt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},pt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!nt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),rt(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},yt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},mt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),dt("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),dt("OnDisconnect.set",this.path_),ot("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),dt("OnDisconnect.setWithPriority",this.path_),ot("OnDisconnect.setWithPriority",1,t,this.path_,!1),ut("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),dt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}at("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),gt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),vt=(P="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",R=0,M=[],function(t){var e,n=t===R;R=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=P.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===M[e];e--)M[e]=0;M[e]++}else for(e=0;e<12;e++)M[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=P.charAt(M[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),bt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),_t=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new bt(O,t),r=new bt(O,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return bt.MIN},t}(),wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return L},set:function(t){L=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return new bt(I,L)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new bt(t,L)},e.prototype.toString=function(){return".key"},e}(_t),Et=new wt,Ct=function(t){return"number"==typeof t?"number:"+B(t):"string:"+t},St=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===F||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===F||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Tt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),St(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ct(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?B(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Ot=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return new bt(I,new Tt("[PRIORITY-POST]",q))},e.prototype.makePost=function(t,e){var n=U(t);return new bt(e,new Tt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(_t)),It=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),xt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:jt.EMPTY_NODE,this.right=null!=o?o:jt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return jt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return jt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),At=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new xt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),jt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new It(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new It(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new It(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new It(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new At,t}(),Nt=Math.log(2),kt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Nt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Dt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new xt(s,o.node,xt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new xt(s,o.node,xt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new xt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,xt.BLACK):(a(h,xt.BLACK),a(h,xt.RED))}return o}(new kt(t.length));return new jt(r||e,o)},Pt={},Rt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(Pt&&Ot,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":Pt},{".priority":Ot})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof jt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Et,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(bt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Dt(s,e.getCompare()):Pt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,(function(t,i){var s=Object(o.C)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===Pt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(bt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Dt(a,s.getCompare())}return Pt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new bt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,(function(t){if(t===Pt)return t;var r=n.get(e.name);return r?t.remove(new bt(e.name,r)):t})),this.indexSet_)},t}();function Mt(t,e){return x(t.name,e.name)}function Lt(t,e){return x(t,e)}var Ft=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&St(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return z||(z=new t(new jt(Lt),null,Rt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||z},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?z:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new bt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?z:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.d)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ot,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Ct(this.getPriority().val())+":"),this.forEachChild(Ot,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new bt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new bt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new bt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vt?-1:0},t.prototype.withIndex=function(e){if(e===Et||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Et||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ot),r=e.getIterator(Ot),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Et?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Vt=new(function(t){function e(){return t.call(this,new jt(Lt),Ft.EMPTY_NODE,Rt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ft.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ft));function Ut(t,e){if(void 0===e&&(e=null),null===t)return Ft.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Tt(t,Ut(e));if(t instanceof Array){var n=Ft.EMPTY_NODE;return D(t,(function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=Ut(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Ut(e))}var r=[],i=!1;if(D(t,(function(t,e){if("."!==t.substring(0,1)){var n=Ut(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new bt(t,n)))}})),0===r.length)return Ft.EMPTY_NODE;var s=Dt(r,Mt,(function(t){return t.name}),Lt);if(i){var a=Dt(r,Ot.getCompare());return new Ft(s,Ut(e),new Rt({".priority":a},{".priority":Ot}))}return new Ft(s,Ut(e),Rt.Default)}Object.defineProperties(bt,{MIN:{value:new bt(O,Ft.EMPTY_NODE)},MAX:{value:new bt(I,Vt)}}),wt.__EMPTY_NODE=Ft.EMPTY_NODE,Tt.__childrenNodeConstructor=Ft,F=Vt,function(t){q=t}(Vt),function(t){U=t}(Ut);var qt,Ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return bt.MAX},e.prototype.makePost=function(t,e){var n=Ut(t);return new bt(e,n)},e.prototype.toString=function(){return".value"},e}(_t)),zt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Ut(t),r=Ft.EMPTY_NODE.updateChild(this.indexPath_,n);return new bt(e,r)},e.prototype.maxPost=function(){var t=Ft.EMPTY_NODE.updateChild(this.indexPath_,Vt);return new bt(I,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(_t),Bt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),ht("DataSnapshot.child",1,e,!1);var n=new Q(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ot)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),ht("DataSnapshot.hasChild",1,t,!1);var e=new Q(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Ot))}))},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Gt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),Wt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Kt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Gt("value",this,new Bt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Wt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),$t=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Wt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Gt(t.type,this,new Bt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Qt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(qt,"Reference.ts has not been loaded"),qt},set:function(t){qt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Et){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==O)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ot){if(null!=e&&!it(e)||null!=n&&!it(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof zt||t.getIndex()===Ht,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),ct("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Kt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new $t(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),ct("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Kt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new $t(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.G)("Query.once",1,4,arguments.length),ct("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,(function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ht("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Q(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new zt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Et);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Ot);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Ht);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),ot("Query.startAt",1,e,this.path,!0),lt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),ot("Query.endAt",1,e,this.path,!0),lt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),ot("Query.equalTo",1,t,this.path,!1),lt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Yt=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Zt=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Jt=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Xt(t[".sv"],e,n):"object"==typeof t[".sv"]?te(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Xt=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},te=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},ee=function(t,e,n,r){return re(e,new Zt(n,t),r)},ne=function(t,e,n){return re(t,new Yt(e),n)};function re(t,e,n){var r,i=t.getPriority().val(),o=Jt(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Jt(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Tt(a,Ut(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Tt(o))),u.forEachChild(Ot,(function(t,i){var o=re(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var ie,oe,se=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ot,(function(t,e){n.remember(new Q(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Q(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),ae=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),ue=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.d)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),ce=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ae.ACK_USER_WRITE,this.source=ue.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Q(e));return new t(Q.Empty,n,this.revert)}return Object(o.d)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),le=function(){function t(t,e){void 0===e&&(ie||(ie=new jt(A)),e=ie),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return D(e,(function(t,e){n=n.set(new Q(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Q.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Q(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(Q.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Q.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Q.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Q.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),he=function(){function t(t,e){this.source=t,this.path=e,this.type=ae.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty):new t(this.source,this.path.popFront())},t}(),fe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ae.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),de=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ae.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new fe(this.source,Q.Empty,n.value):new t(this.source,Q.Empty,n)}return Object(o.d)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),pe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ye=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new pe(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new pe(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new pe(Ft.EMPTY_NODE,!1,!1),new pe(Ft.EMPTY_NODE,!1,!1)),t}(),me=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),ge=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me.childRemovedChange(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(me.childAddedChange(e,n)):s.trackChildChange(me.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ot,(function(t,r){e.hasChild(t)||n.trackChildChange(me.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Ot,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me.childChangedChange(e,r,i))}else n.trackChildChange(me.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ft.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ve=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)(e===me.CHILD_ADDED||e===me.CHILD_CHANGED||e===me.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===me.CHILD_ADDED&&i===me.CHILD_REMOVED)this.changeMap.set(n,me.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===me.CHILD_REMOVED&&i===me.CHILD_ADDED)this.changeMap.delete(n);else if(e===me.CHILD_REMOVED&&i===me.CHILD_CHANGED)this.changeMap.set(n,me.childRemovedChange(n,r.oldSnap));else if(e===me.CHILD_CHANGED&&i===me.CHILD_ADDED)this.changeMap.set(n,me.childAddedChange(n,t.snapshotNode));else{if(e!==me.CHILD_CHANGED||i!==me.CHILD_CHANGED)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),be=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),_e=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new pe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),we=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ee=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.d)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.d)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new ve;if(n.type===ae.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===ae.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===ae.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ae.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new we(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(me.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.d)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Ft?c:Ft.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.d)(1===e.getLength(),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var y=e.popFront(),m=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);m=null!=g?s.getNode().getImmediateChild(f).updateChild(y,g):s.getNode().getImmediateChild(f)}else m=n.calcCompleteChild(f,t.getServerCache());a=null!=m?this.filter_.updateChild(s.getNode(),f,m,y,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,be,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new _e(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,y,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new _e(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Ft.EMPTY_NODE}if(f.equals(d))s=t;else{var y=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:le.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new Q(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new Q(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=le.Empty;return a.getNode().forEachChild(Et,(function(t,e){u=u.set(new Q(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=le.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,be,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new _e(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.d)(h instanceof Ft,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ft.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Q.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Ce=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===me.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(me.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,me.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,me.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,me.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,me.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,me.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.e)("Should only compare child_ events.");var n=new bt(t.childName,t.snapshotNode),r=new bt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Se=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new ge(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ee(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ft.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ft.EMPTY_NODE,s.getNode(),null),c=new pe(a,o.isFullyInitialized(),r.filtersNodes()),l=new pe(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ye(l,c),this.eventGenerator_=new Ce(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.d)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===ae.MERGE&&null!==t.source.queryId&&(Object(o.d)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.d)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.d)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ot,(function(t,e){n.push(me.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(me.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Te=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(oe,"Reference.ts has not been loaded"),oe},set:function(t){Object(o.d)(!oe,"__referenceConstructor has already been defined"),oe=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.d)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Ft?(a=n.calcCompleteEventChildren(r),u=!1):(a=Ft.EMPTY_NODE,u=!1);var c=new ye(new pe(a,u,!1),new pe(r,i,!1));s=new Se(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),y=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(y),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(m){o={error:m}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Oe=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new le(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Q.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new le(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return D(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,le.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Q.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ot,(function(e,n){t.push(new bt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new bt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new le(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(o.d)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):r=t(e.child(n),s,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(Q.Empty,this.writeTree_,t)},t.Empty=new t(new le(null)),t}(),Ie=function(){function t(){this.visibleWrites_=Oe.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new xe(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.d)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.d)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):D(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(Q.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Ft.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(Q.Empty)?a.apply(n||Ft.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ft.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Ot,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Ot,(function(t,e){var r=i.childCompoundWrite(new Q(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.d)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Q.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Q.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Oe.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=Q.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=Q.relativePath(a,n),r=r.addWrite(Q.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(n.contains(a))u=Q.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=Q.relativePath(a,n)).isEmpty())r=r.addWrites(Q.Empty,s.children);else{var c=Object(o.C)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(Q.Empty,l)}}}}}return r},t}(),xe=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ae=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=le.Empty,this.pendingWriteTree_=new Ie,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new fe(ue.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=le.fromObject(e);return this.applyOperationToSyncPoints_(new de(ue.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=le.Empty;return null!=n.snap?r=r.set(Q.Empty,!0):D(n.children,(function(t,e){r=r.set(new Q(t),e)})),this.applyOperationToSyncPoints_(new ce(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new fe(ue.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=le.fromObject(e);return this.applyOperationToSyncPoints_(new de(ue.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new he(ue.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Q.relativePath(s,e),c=new fe(ue.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Q.relativePath(s,e),c=le.fromObject(n),l=new de(ue.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Q.relativePath(o,e),u=new he(ue.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Q.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(Q.Empty)):(u=new Te,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Ft.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(Q.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.d)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var y=d[p],m=y.getQuery(),g=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(m),this.tagForQuery_(m),g.hashFn,g.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Q.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),D(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.d)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),D(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ft.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.d)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Q.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Q.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Q.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Q.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Q.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),je=function(){function t(){this.rootNode_=Ft.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ne=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),ke=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ne),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),De=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&D(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Pe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new De(t);var n=1e4+2e4*Math.random();$(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;D(e,(function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),$(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Re=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Me(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Me=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();g&&_("event: "+e.toString()),K(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Le=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Fe=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Le),Ve=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Le),Ue=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&K((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),qe=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=ke.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ue(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new He((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=s,n.password=a;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=k(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),He=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),ze="";function Be(t){ze=t}var Ge=null;"undefined"!=typeof MozWebSocket?Ge=MozWebSocket:"undefined"!=typeof WebSocket&&(Ge=WebSocket);var We=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=ke.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+ze+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Ge(this.connURL,[],r)}else this.mySock=new Ge(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ge&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=k(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ke=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[qe,We]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=We&&We.isAvailable(),s=o&&!We.previouslyFailed();if(e.webSocketOnly&&(o||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[We];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),$e=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Ke(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=j("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Qe=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Ye=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Fe.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Ve.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new $e(s,a.repoInfo_,a.applicationId_,n,r,i,(function(t){S(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&S(e),h())}))}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return N(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Q(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+ze.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Ve.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Qe),Ze=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.C)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){S("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&S("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(Qe),Je=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Re,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new se,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=ke.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Ze(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new Ye(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=ke.getOrCreateReporter(this.repoInfo_,(function(){return new Pe(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new je,this.infoSyncTree_=new Ae({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ae({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Q(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.A)(e,(function(t){return Ut(t)}));s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Ut(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.A)(e,(function(t){return Ut(t)}));s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Ut(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;D(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Q("/.info/"+t),r=Ut(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then((function(n){var r=Ut(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Bt(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){e.log_("get for query "+Object(o.F)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new Bt(r,t.getRef(),t.getQueryParams().getIndex()))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Ut(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=ne(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||S("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(D(e,(function(e,n){i=!1,s[e]=ee(t.child(e),Ut(n),r.serverSyncTree_,o)})),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||S("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),D(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new se;this.onDisconnect_.forEachTree(Q.Empty,(function(r,i){var o=ee(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Q.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new se,this.eventQueue_.raiseEventsForChangedPath(Q.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Ut(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Ut(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.r)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&D(e,(function(e,n){var i=Ut(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new De(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);D(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&K((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new hn(this))},enumerable:!1,configurable:!0}),t}(),Xe=function(){function t(e){this.indexedFilter_=new ge(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new bt(e,n))||(n=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ft.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ft.EMPTY_NODE);var i=this;return e.forEachChild(Ot,(function(t,e){i.matches(new bt(t,e))||(r=r.updateImmediateChild(t,Ft.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),tn=function(){function t(t){this.rangedFilter_=new Xe(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new bt(e,n))||(n=Ft.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ft.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ft.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Ft.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new bt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(me.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(me.childRemovedChange(e,f));var y=u.updateImmediateChild(e,Ft.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(me.childAddedChange(d.name,d.node)),y.updateImmediateChild(d.name,d.node)):y}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(me.childRemovedChange(l.name,l.node)),i.trackChildChange(me.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ft.EMPTY_NODE)):t},t}(),en=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ot}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:O},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Ot&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ot},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new ge(this.getIndex()):this.hasLimit()?new tn(this):new Xe(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Ot?e=n.PRIORITY_INDEX:this.index_===Ht?e=n.VALUE_INDEX:this.index_===Et?e=n.KEY_INDEX:(Object(o.d)(this.index_ instanceof zt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.F)(e),this.startSet_&&(r[n.START_AT]=Object(o.F)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.F)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.F)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.F)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),nn=function(t){function e(e,n){if(!(e instanceof Je))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,en.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Q||(null===this.path.getFront()?ft("Reference.child",1,t,!1):ht("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),dt("Reference.set",this.path),ot("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),dt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}at("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),dt("Reference.setWithPriority",this.path),ot("Reference.setWithPriority",1,t,this.path,!1),ut("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),dt("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),dt("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),yt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new gt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),dt("Reference.setPriority",this.path),ut("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),dt("Reference.push",this.path),ot("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=vt(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),s},e.prototype.onDisconnect=function(){return dt("Reference.onDisconnect",this.path),new mt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Qt);Qt.__referenceConstructor=nn,Te.__referenceConstructor=nn;var rn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),on=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new rn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Q?e:new Q(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.C)(r.node_.children,i)||new rn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.d)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;D(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Q(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.h)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),sn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});Je.MAX_TRANSACTION_RETRIES_=25,Je.prototype.transactionsInit_=function(){this.transactionQueueTree_=new on},Je.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new nn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Bt(a.currentInputSnapshot,new nn(this,a.path),Ot);a.onComplete(null,!1,l)}}else{st("transaction failed: Data returned ",c,a.path),a.status=sn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.h)(c,".priority")?(d=Object(o.C)(c,".priority"),Object(o.d)(it(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Ft.EMPTY_NODE).getPriority().val(),d=d;var y=this.generateServerValues(),m=Ut(c,d),g=ne(m,u,y);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},Je.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ft.EMPTY_NODE},Je.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===sn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},Je.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.d)(c.status===sn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=sn.SENT,c.retryCount++;var l=Q.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=sn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new nn(n,e[s].path),c=new Bt(a,u,Ot);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)K(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===sn.SENT_NEEDS_ABORT?sn.NEEDS_ABORT:sn.RUN;else for(S("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=sn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},Je.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Je.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===sn.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=Q.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.d)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===sn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===sn.RUN)if(a.retryCount>=Je.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){st("transaction failed: Data returned ",f,a.path);var d=Ut(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,y=this.generateServerValues(),m=ne(d,h,y);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,m,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=sn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var g=new nn(this,t[s].path),v=new Bt(t[s].currentInputSnapshot,g,Ot);n.push(t[s].onComplete.bind(null,null,!1,v))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)K(n[s]);this.sendReadyTransactions_()}},Je.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Je.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},Je.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},Je.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==sn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},Je.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},Je.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===sn.SENT_NEEDS_ABORT||(e[s].status===sn.SENT?(Object(o.d)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=sn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.d)(e[s].status===sn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)K(n[s])}};var an,un=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';S(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),cn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),ln=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return an||(an=new t),an},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new cn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=J(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=J(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new cn:new un(t,e);return pt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||C("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.C)(this.repos_,t.app.name);e&&Object(o.C)(e,t.key)===t||C("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.C)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Je(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),hn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.checkDeleted_("delete"),ln.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Je||C("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new nn(this.repo_,Q.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?C("Cannot call useEmulator() after instance has already been initialized."):ln.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof nn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=J(t,this.repo_.repoInfo_.nodeAdmin);pt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),fn=Object.freeze({__proto__:null,forceLongPolling:function(){We.forceDisallow(),qe.forceAllow()},forceWebSockets:function(){qe.forceDisallow()},isWebSocketsAvailable:function(){return We.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Be(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:ln.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),dn=Ye;Ye.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ye.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var pn=Object.freeze({__proto__:null,DataConnection:dn,RealTimeConnection:$e,hijackHash:function(t){var e=Ye.prototype.put;return Ye.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ye.prototype.put=e}},ConnectionTarget:Z,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){ln.getInstance().forceRestClient(t)}}),yn=hn.ServerValue;!function(e){Be(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return ln.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:nn,Query:Qt,Database:hn,DataSnapshot:Bt,enableLogging:b,INTERNAL:fn,ServerValue:yn,TEST_ACCESS:pn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.1"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("mCNh"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:Object(a.b)(t)(this)}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.2.1","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",(function(){return r}))},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("EY2u"),i=n("LRne"),o=n("HDdC");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return t=this.error,new o.a(e=>e.error(t));case"C":return Object(r.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Y7HM:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("51Dv"),i=n("SeVD"),o=n("HDdC");function s(t,e,n,s,a=new r.a(t,n,s)){if(!a.closed)return e instanceof o.a?e.subscribe(a):Object(i.a)(e)(a)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return Do})),n.d(e,"b",(function(){return jc})),n.d(e,"c",(function(){return Tc})),n.d(e,"d",(function(){return Cc})),n.d(e,"e",(function(){return Sc})),n.d(e,"f",(function(){return El})),n.d(e,"g",(function(){return fl})),n.d(e,"h",(function(){return mo})),n.d(e,"i",(function(){return qc})),n.d(e,"j",(function(){return ma})),n.d(e,"k",(function(){return Dc})),n.d(e,"l",(function(){return ga})),n.d(e,"m",(function(){return _n})),n.d(e,"n",(function(){return ec})),n.d(e,"o",(function(){return W})),n.d(e,"p",(function(){return l})),n.d(e,"q",(function(){return G})),n.d(e,"r",(function(){return ko})),n.d(e,"s",(function(){return Ma})),n.d(e,"t",(function(){return La})),n.d(e,"u",(function(){return kc})),n.d(e,"v",(function(){return st})),n.d(e,"w",(function(){return pl})),n.d(e,"x",(function(){return ot})),n.d(e,"y",(function(){return al})),n.d(e,"z",(function(){return Gc})),n.d(e,"A",(function(){return h})),n.d(e,"B",(function(){return Ac})),n.d(e,"C",(function(){return xc})),n.d(e,"D",(function(){return wa})),n.d(e,"E",(function(){return ba})),n.d(e,"F",(function(){return _a})),n.d(e,"G",(function(){return Ca})),n.d(e,"H",(function(){return ur})),n.d(e,"I",(function(){return d})),n.d(e,"J",(function(){return gl})),n.d(e,"K",(function(){return qa})),n.d(e,"L",(function(){return Xc})),n.d(e,"M",(function(){return Ta})),n.d(e,"N",(function(){return Sa})),n.d(e,"O",(function(){return za})),n.d(e,"P",(function(){return mt})),n.d(e,"Q",(function(){return qo})),n.d(e,"R",(function(){return ul})),n.d(e,"S",(function(){return Fn})),n.d(e,"T",(function(){return j})),n.d(e,"U",(function(){return Ln})),n.d(e,"V",(function(){return _l})),n.d(e,"W",(function(){return nl})),n.d(e,"X",(function(){return Nc})),n.d(e,"Y",(function(){return vo})),n.d(e,"Z",(function(){return ou})),n.d(e,"ab",(function(){return sr})),n.d(e,"bb",(function(){return hr})),n.d(e,"cb",(function(){return Hn})),n.d(e,"db",(function(){return xn})),n.d(e,"eb",(function(){return jn})),n.d(e,"fb",(function(){return Pn})),n.d(e,"gb",(function(){return kn})),n.d(e,"hb",(function(){return Nn})),n.d(e,"ib",(function(){return Dn})),n.d(e,"jb",(function(){return eu})),n.d(e,"kb",(function(){return bl})),n.d(e,"lb",(function(){return nu})),n.d(e,"mb",(function(){return ru})),n.d(e,"nb",(function(){return An})),n.d(e,"ob",(function(){return L})),n.d(e,"pb",(function(){return Ho})),n.d(e,"qb",(function(){return cs})),n.d(e,"rb",(function(){return us})),n.d(e,"sb",(function(){return Uo})),n.d(e,"tb",(function(){return tu})),n.d(e,"ub",(function(){return Ut})),n.d(e,"vb",(function(){return I})),n.d(e,"wb",(function(){return In})),n.d(e,"xb",(function(){return Zs})),n.d(e,"yb",(function(){return ra})),n.d(e,"zb",(function(){return da})),n.d(e,"Ab",(function(){return Mr})),n.d(e,"Bb",(function(){return Ko})),n.d(e,"Cb",(function(){return js})),n.d(e,"Db",(function(){return Ws})),n.d(e,"Eb",(function(){return Ks})),n.d(e,"Fb",(function(){return As})),n.d(e,"Gb",(function(){return pc})),n.d(e,"Hb",(function(){return yr})),n.d(e,"Ib",(function(){return _t})),n.d(e,"Jb",(function(){return It})),n.d(e,"Kb",(function(){return g})),n.d(e,"Lb",(function(){return v})),n.d(e,"Mb",(function(){return St})),n.d(e,"Nb",(function(){return xt})),n.d(e,"Ob",(function(){return Zo})),n.d(e,"Pb",(function(){return is})),n.d(e,"Qb",(function(){return ss})),n.d(e,"Rb",(function(){return os})),n.d(e,"Sb",(function(){return rs})),n.d(e,"Tb",(function(){return ns})),n.d(e,"Ub",(function(){return as})),n.d(e,"Vb",(function(){return mn})),n.d(e,"Wb",(function(){return $s})),n.d(e,"Xb",(function(){return xu})),n.d(e,"Yb",(function(){return Du})),n.d(e,"Zb",(function(){return Au})),n.d(e,"ac",(function(){return ku})),n.d(e,"bc",(function(){return et})),n.d(e,"cc",(function(){return Jo})),n.d(e,"dc",(function(){return Ec})),n.d(e,"ec",(function(){return Xo})),n.d(e,"fc",(function(){return ls})),n.d(e,"gc",(function(){return gc})),n.d(e,"hc",(function(){return ds})),n.d(e,"ic",(function(){return Yu})),n.d(e,"jc",(function(){return Zu})),n.d(e,"kc",(function(){return Ju})),n.d(e,"lc",(function(){return vs})),n.d(e,"mc",(function(){return ys})),n.d(e,"nc",(function(){return ts})),n.d(e,"oc",(function(){return bs})),n.d(e,"pc",(function(){return _s})),n.d(e,"qc",(function(){return Bu})),n.d(e,"rc",(function(){return Gu})),n.d(e,"sc",(function(){return Wu})),n.d(e,"tc",(function(){return fc})),n.d(e,"uc",(function(){return Yo})),n.d(e,"vc",(function(){return se})),n.d(e,"wc",(function(){return fr})),n.d(e,"xc",(function(){return pr})),n.d(e,"yc",(function(){return Tt})),n.d(e,"zc",(function(){return yc})),n.d(e,"Ac",(function(){return dc})),n.d(e,"Bc",(function(){return xs})),n.d(e,"Cc",(function(){return Qo})),n.d(e,"Dc",(function(){return wc})),n.d(e,"Ec",(function(){return Hs})),n.d(e,"Fc",(function(){return zs})),n.d(e,"Gc",(function(){return Bs})),n.d(e,"Hc",(function(){return Gs})),n.d(e,"Ic",(function(){return Qs}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}function c(t,e,n){return u(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const l=c("Inject",t=>({token:t})),h=c("Optional"),f=c("Self"),d=c("SkipSelf");var p=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function y(t){for(let e in t)if(t[e]===y)return e;throw Error("Could not find renamed property on target object.")}function m(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function g(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function v(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function b(t){return _(t,t[E])||_(t,t[T])}function _(t,e){return e&&e.token===t?e:null}function w(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(O))?t[C]:null}const E=y({"\u0275prov":y}),C=y({"\u0275inj":y}),S=y({"\u0275provFallback":y}),T=y({ngInjectableDef:y}),O=y({ngInjectorDef:y});function I(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(I).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function x(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const A=y({__forward_ref__:y});function j(t){return t.__forward_ref__=j,t.toString=function(){return I(this())},t}function N(t){return k(t)?t():t}function k(t){return"function"==typeof t&&t.hasOwnProperty(A)&&t.__forward_ref__===j}const D="undefined"!=typeof globalThis&&globalThis,P="undefined"!=typeof window&&window,R="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,M="undefined"!=typeof global&&global,L=D||M||P||R,F=y({"\u0275cmp":y}),V=y({"\u0275dir":y}),U=y({"\u0275pipe":y}),q=y({"\u0275mod":y}),H=y({"\u0275loc":y}),z=y({"\u0275fac":y}),B=y({__NG_ELEMENT_ID__:y});class G{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=g({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const W=new G("INJECTOR",-1),K={},$=/\n/gm,Q=y({provide:String,useValue:y});let Y,Z=void 0;function J(t){const e=Z;return Z=t,e}function X(t){const e=Y;return Y=t,e}function tt(t,e=p.Default){if(void 0===Z)throw new Error("inject() must be called from an injection context");return null===Z?nt(t,void 0,e):Z.get(t,e&p.Optional?null:void 0,e)}function et(t,e=p.Default){return(Y||tt)(N(t),e)}function nt(t,e,n){const r=b(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&p.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${I(t)}]`)}function rt(t){const e=[];for(let n=0;n<t.length;n++){const r=N(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=p.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof h||"Optional"===i.ngMetadataName||i===h?n|=p.Optional:i instanceof d||"SkipSelf"===i.ngMetadataName||i===d?n|=p.SkipSelf:i instanceof f||"Self"===i.ngMetadataName||i===f?n|=p.Self:t=i instanceof l||i===l?i.token:i}e.push(et(t,n))}else e.push(et(r))}return e}class it{get(t,e=K){if(e===K){const e=new Error(`NullInjectorError: No provider for ${I(t)}!`);throw e.name="NullInjectorError",e}return e}}class ot{}class st{}function at(t,e){for(let n=0;n<t.length;n++)e.push(t[n])}function ut(t,e){t.forEach(t=>Array.isArray(t)?ut(t,e):e(t))}function ct(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function lt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ht(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function ft(t,e,n){let r=pt(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function dt(t,e){const n=pt(t,e);if(n>=0)return t[1|n]}function pt(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const yt=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),mt=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),gt={},vt=[];let bt=0;function _t(t){return u(()=>{const e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===yt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||vt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||mt.Emulated,id:"c",styles:t.styles||vt,_:null,setInput:null,schemas:t.schemas||null,tView:null},o=t.directives,s=t.features,a=t.pipes;return i.id+=bt++,i.inputs=Ot(t.inputs,r),i.outputs=Ot(t.outputs),s&&s.forEach(t=>t(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(wt):null,i.pipeDefs=a?()=>("function"==typeof a?a():a).map(Et):null,i})}function wt(t){return At(t)||function(t){return t[V]||null}(t)}function Et(t){return function(t){return t[U]||null}(t)}const Ct={};function St(t){const e={type:t.type,bootstrap:t.bootstrap||vt,declarations:t.declarations||vt,imports:t.imports||vt,exports:t.exports||vt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{Ct[t.id]=t.type}),e}function Tt(t,e){return u(()=>{const n=Nt(t,!0);n.declarations=e.declarations||vt,n.imports=e.imports||vt,n.exports=e.exports||vt})}function Ot(t,e){if(null==t)return gt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const It=_t;function xt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function At(t){return t[F]||null}function jt(t,e){return t.hasOwnProperty(z)?t[z]:null}function Nt(t,e){const n=t[q]||null;if(!n&&!0===e)throw new Error(`Type ${I(t)} does not have '\u0275mod' property.`);return n}function kt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Dt(t){return Array.isArray(t)&&!0===t[1]}function Pt(t){return 0!=(8&t.flags)}function Rt(t){return 2==(2&t.flags)}function Mt(t){return 1==(1&t.flags)}function Lt(t){return null!==t.template}function Ft(t){return 0!=(512&t[2])}let Vt=void 0;function Ut(t){Vt=t}function qt(){return void 0!==Vt?Vt:"undefined"!=typeof document?document:void 0}function Ht(t){return!!t.listen}const zt={createRenderer:(t,e)=>qt()};function Bt(t){for(;Array.isArray(t);)t=t[0];return t}function Gt(t,e){return Bt(e[t+20])}function Wt(t,e){return Bt(e[t.index])}function Kt(t,e){return t.data[e+20]}function $t(t,e){return t[e+20]}function Qt(t,e){const n=e[t];return kt(n)?n:n[0]}function Yt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Zt(t){return 4==(4&t[2])}function Jt(t){return 128==(128&t[2])}function Xt(t,e){return null===t||null==e?null:t[e]}function te(t){t[18]=0}function ee(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const ne={lFrame:Te(null),bindingsEnabled:!0,checkNoChangesMode:!1};function re(){return ne.bindingsEnabled}function ie(){return ne.lFrame.lView}function oe(){return ne.lFrame.tView}function se(t){ne.lFrame.contextLView=t}function ae(){return ne.lFrame.previousOrParentTNode}function ue(t,e){ne.lFrame.previousOrParentTNode=t,ne.lFrame.isParent=e}function ce(){return ne.lFrame.isParent}function le(){ne.lFrame.isParent=!1}function he(){return ne.checkNoChangesMode}function fe(t){ne.checkNoChangesMode=t}function de(){const t=ne.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function pe(){return ne.lFrame.bindingIndex}function ye(){return ne.lFrame.bindingIndex++}function me(t){const e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ge(t,e){const n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,ve(e)}function ve(t){ne.lFrame.currentDirectiveIndex=t}function be(t){const e=ne.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function _e(){return ne.lFrame.currentQueryIndex}function we(t){ne.lFrame.currentQueryIndex=t}function Ee(t,e){const n=Se();ne.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function Ce(t,e){const n=Se(),r=t[1];ne.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function Se(){const t=ne.lFrame,e=null===t?null:t.child;return null===e?Te(t):e}function Te(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Oe(){const t=ne.lFrame;return ne.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const Ie=Oe;function xe(){const t=Oe();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.currentSanitizer=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ae(){return ne.lFrame.selectedIndex}function je(t){ne.lFrame.selectedIndex=t}function Ne(){const t=ne.lFrame;return Kt(t.tView,t.selectedIndex)}function ke(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n];e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(-n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked)),e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(-n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked)),null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}}function De(t,e,n){Me(t,e,3,n)}function Pe(t,e,n,r){(3&t[2])===n&&Me(t,e,n,r)}function Re(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Me(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Le(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Le(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class Fe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ve(t,e,n){const r=Ht(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];qe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ue(t){return 3===t||4===t||6===t}function qe(t){return 64===t.charCodeAt(0)}function He(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ze(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ze(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Be(t){return-1!==t}function Ge(t){return 32767&t}function We(t){return t>>16}function Ke(t,e){let n=We(t),r=e;for(;n>0;)r=r[15],n--;return r}function $e(t){return"string"==typeof t?t:null==t?"":""+t}function Qe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():$e(t)}const Ye=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(L))();function Ze(t){return t instanceof Function?t():t}let Je=!0;function Xe(t){const e=Je;return Je=t,e}let tn=0;function en(t,e){const n=rn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,nn(r.data,t),nn(e,null),nn(r.blueprint,null));const i=on(t,e),o=t.injectorIndex;if(Be(i)){const t=Ge(i),n=Ke(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function nn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function rn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function on(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function sn(t,e,n){!function(t,e,n){let r="string"!=typeof n?n[B]:n.charCodeAt(0)||0;null==r&&(r=n[B]=tn++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function an(t,e,n,r=p.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t[B];return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){Ee(e,t);try{const t=i();if(null!=t||r&p.Optional)return t;throw new Error(`No provider for ${Qe(n)}!`)}finally{Ie()}}else if("number"==typeof i){if(-1===i)return new pn(t,e);let o=null,s=rn(t,e),a=-1,u=r&p.Host?e[16][6]:null;for((-1===s||r&p.SkipSelf)&&(a=-1===s?on(t,e):e[s+8],dn(r,!1)?(o=e[1],s=Ge(a),e=Ke(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if(fn(i,s,t.data)){const t=cn(s,e,n,o,r,u);if(t!==un)return t}dn(r,e[1].data[s+8]===u)&&fn(i,s,e)?(o=t,s=Ge(a),e=Ke(a,e)):s=-1}}}if(r&p.Optional&&void 0===i&&(i=null),0==(r&(p.Self|p.Host))){const t=e[9],o=X(void 0);try{return t?t.get(n,i,r&p.Optional):nt(n,i,r&p.Optional)}finally{X(o)}}if(r&p.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${Qe(n)}]`)}const un={};function cn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=ln(a,s,n,null==r?Rt(a)&&Je:r!=s&&3===a.type,i&p.Host&&o===a);return null!==u?hn(e,s,u,a):un}function ln(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=65535&o,u=t.directiveStart,c=o>>16,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Lt(t)&&t.type===n)return u}return null}function hn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Fe){const s=i;if(s.resolving)throw new Error("Circular dep for "+Qe(o[n]));const a=Xe(s.canSeeViewProviders);let u;s.resolving=!0,s.injectImpl&&(u=X(s.injectImpl)),Ee(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{onChanges:r,onInit:i,doCheck:o}=e;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{s.injectImpl&&X(u),Xe(a),s.resolving=!1,Ie()}}return i}function fn(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function dn(t,e){return!(t&p.Self||t&p.Host&&e)}class pn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return an(this._tNode,this._lView,t,void 0,e)}}function yn(t){const e=t;if(k(t))return()=>{const t=yn(N(e));return t?t():null};let n=jt(e);if(null===n){const t=w(e);n=t&&t.factory}return n||null}function mn(t){return u(()=>{const e=t.prototype.constructor,n=e[z]||yn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[z]||yn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function gn(t){return t.ngDebugContext}function vn(t){return t.ngOriginalError}function bn(t,...e){t.error(...e)}class _n{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||bn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?gn(t)?gn(t):this._findContext(vn(t)):null}_findOriginalError(t){let e=vn(t);for(;e&&vn(e);)e=vn(e);return e}}class wn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class En extends wn{getTypeName(){return"HTML"}}class Cn extends wn{getTypeName(){return"Style"}}class Sn extends wn{getTypeName(){return"Script"}}class Tn extends wn{getTypeName(){return"URL"}}class On extends wn{getTypeName(){return"ResourceURL"}}function In(t){return t instanceof wn?t.changingThisBreaksApplicationSecurity:t}function xn(t,e){const n=An(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function An(t){return t instanceof wn&&t.getTypeName()||null}function jn(t){return new En(t)}function Nn(t){return new Cn(t)}function kn(t){return new Sn(t)}function Dn(t){return new Tn(t)}function Pn(t){return new On(t)}let Rn=!0,Mn=!1;function Ln(){return Mn=!0,Rn}function Fn(){if(Mn)throw new Error("Cannot enable prod mode after platform setup.");Rn=!1}class Vn{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");let e=this.inertDocument.body;if(null==e){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),e=this.inertDocument.createElement("body"),t.appendChild(e)}e.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!e.querySelector||e.querySelector("svg")?(e.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=e.querySelector&&e.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Un=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Hn(t){return(t=String(t)).match(Un)||t.match(qn)?t:(Ln()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function zn(t){return(t=String(t)).split(",").map(t=>Hn(t.trim())).join(", ")}function Bn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Gn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Wn=Bn("area,br,col,hr,img,wbr"),Kn=Bn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$n=Bn("rp,rt"),Qn=Gn($n,Kn),Yn=Gn(Wn,Gn(Kn,Bn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gn($n,Bn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qn),Zn=Bn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jn=Bn("srcset"),Xn=Gn(Zn,Jn,Bn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tr=Bn("script,style,template");class er{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Yn.hasOwnProperty(e))return this.sanitizedSomething=!0,!tr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!Xn.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;Zn[i]&&(o=Hn(o)),Jn[i]&&(o=zn(o)),this.buf.push(" ",e,'="',ir(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Yn.hasOwnProperty(e)&&!Wn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ir(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const nr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rr=/([^\#-~ |!])/g;function ir(t){return t.replace(/&/g,"&amp;").replace(nr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(rr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let or;function sr(t,e){let n=null;try{or=or||new Vn(t);let r=e?String(e):"";n=or.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=or.getInertBodyElement(r)}while(r!==o);const s=new er,a=s.sanitizeChildren(ar(n)||n);return Ln()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=ar(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ar(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const ur=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),cr=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:attr|calc|var))\\([-0-9.%, #a-zA-Z]+\\))$","g"),lr=/^url\(([^)]+)\)$/;function hr(t){if(!(t=String(t).trim()))return"";const e=t.match(lr);return e&&Hn(e[1])===e[1]||t.match(cr)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Ln()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}function fr(t){const e=mr();return e?e.sanitize(ur.HTML,t)||"":xn(t,"HTML")?In(t):sr(qt(),$e(t))}function dr(t){const e=mr();return e?e.sanitize(ur.STYLE,t)||"":xn(t,"Style")?In(t):hr($e(t))}function pr(t){const e=mr();return e?e.sanitize(ur.URL,t)||"":xn(t,"URL")?In(t):Hn($e(t))}const yr=function(t,e,n){if(void 0===e&&void 0===n)return dr(t);let r=!0;return 1&(n=n||3)&&(r=function(t){return"background-image"===t||"backgroundImage"===t||"background"===t||"border-image"===t||"borderImage"===t||"border-image-source"===t||"borderImageSource"===t||"filter"===t||"list-style"===t||"listStyle"===t||"list-style-image"===t||"listStyleImage"===t||"clip-path"===t||"clipPath"===t}(t)),2&n?r?dr(e):In(e):r};function mr(){const t=ie();return t&&t[12]}function gr(t,e){t.__ngContext__=e}function vr(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function br(){throw new Error("Cannot mix multi providers and regular providers")}function _r(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function wr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==_r(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Er(t){return 0===t.type&&"ng-template"!==t.tagName}function Cr(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function Sr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ue(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Cr(t,u,n)||""===u&&1===e.length){if(Tr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!wr(t.attrs,c,n)){if(Tr(r))return!1;s=!0}continue}const l=Or(8&r?"class":u,i,Er(t),n);if(-1===l){if(Tr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==_r(e,c,0)||2&r&&c!==t){if(Tr(r))return!1;s=!0}}}}else{if(!s&&!Tr(r)&&!Tr(u))return!1;if(s&&Tr(u))continue;s=!1,r=u|1&r}}return Tr(r)||s}function Tr(t){return 0==(1&t)}function Or(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Ir(t,e,n=!1){for(let r=0;r<e.length;r++)if(Sr(t,e[r],n))return!0;return!1}function xr(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Ar(t,e){return t?":not("+e.trim()+")":e}function jr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Tr(s)||(e+=Ar(o,i),i=""),r=s,o=o||!Tr(r);n++}return""!==i&&(e+=Ar(o,i)),e}const Nr={};function kr(t){const e=t[3];return Dt(e)?e[3]:e}function Dr(t){return Rr(t[13])}function Pr(t){return Rr(t[4])}function Rr(t){for(;null!==t&&!Dt(t);)t=t[4];return t}function Mr(t){Lr(oe(),ie(),Ae()+t,he())}function Lr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&De(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Pe(e,r,0,n)}je(n)}const Fr={marker:"element"},Vr={marker:"comment"};function Ur(t,e){return t<<17|e<<2}function qr(t){return t>>17&32767}function Hr(t){return 2|t}function zr(t){return(131068&t)>>2}function Br(t,e){return-131069&t|e<<2}function Gr(t){return 1|t}function Wr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];we(i),n.contentQueries(2,e[o],o)}}}function Kr(t,e,n){return Ht(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function $r(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,te(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Qr(t,e,n,r,i,o){const s=n+20,a=t.data[s]||function(t,e,n,r,i,o){const s=ae(),a=ce(),u=a?s:s&&s.parent,c=t.data[n]=oi(0,u&&u!==e?u:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=c),s&&(!a||null!=s.child||null===c.parent&&2!==s.type?a||(s.next=c):s.child=c),c}(t,e,s,r,i,o);return ue(a,!0),a}function Yr(t,e,n){Ce(e,e[6]);try{const r=t.viewQuery;null!==r&&xi(1,r,n);const i=t.template;null!==i&&Xr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Wr(t,e),t.staticViewQueries&&xi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ci(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,xe()}}function Zr(t,e,n,r){const i=e[2];if(256==(256&i))return;Ce(e,e[6]);const o=he();try{te(e),ne.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Xr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&De(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Pe(e,n,0,null),Re(e,0)}if(function(t){for(let e=Dr(t);null!==e;e=Pr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&ee(r,1),n[2]|=1024}}}(e),function(t){for(let e=Dr(t);null!==e;e=Pr(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Jt(n)&&Zr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Wr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&De(e,n)}else{const n=t.contentHooks;null!==n&&Pe(e,n,1),Re(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,je(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(ge(r,i),s(2,e[i])),i++)}}}finally{je(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ei(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&xi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&De(e,n)}else{const n=t.viewHooks;null!==n&&Pe(e,n,2),Re(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ee(e[3],-1))}finally{xe()}}function Jr(t,e,n,r){const i=e[10],o=!he(),s=Zt(e);try{o&&!s&&i.begin&&i.begin(),s&&Yr(t,e,r),Zr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Xr(t,e,n,r,i){const o=Ae();try{je(-1),2&r&&e.length>20&&Lr(t,e,0,he()),n(r,i)}finally{je(o)}}function ti(t,e,n){if(Pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function ei(t,e,n){re()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||en(n,e),gr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Lt(r);o&&gi(e,n,r);const u=hn(e,t,a,n);gr(u,e),null!==s&&bi(0,a-i,u,r,0,s),o&&(Qt(n.index,e)[8]=u)}}(t,e,n,Wt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-20,u=ne.lFrame.currentDirectiveIndex;try{je(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ve(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?hi(r,i):s&&o.push(null)}}finally{je(-1),ve(u)}}(t,e,n))}function ni(t,e,n=Wt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ri(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ii(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ii(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Nr);return n}(l,h);return f[1]={type:t,id:e,blueprint:f,template:n,queries:null,viewQuery:a,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function oi(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function si(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ai(t,e,n,r,i,o,s,a){const u=Wt(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(Di(t,n,c,r,i),Rt(e)&&function(t,e){const n=Qt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.tagName||"",r):i,Ht(o)?o.setProperty(u,r,i):qe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ui(t,e,n,r){let i=!1;if(re()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Ir(n,s.selectors,!1)&&(i||(i=[]),sn(en(n,e),t,s.type),Lt(s)?(2&n.flags&&vr(n),di(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,yi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}fi(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=He(n.mergedAttrs,c.hostAttrs),mi(t,e,c),pi(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128),!a&&(c.onChanges||c.onInit||c.doCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),u||!c.onChanges&&!c.doCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),u=!0),ci(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Er(e)?null:_i(n,i);o.push(c),s=si(n,u,s),a=si(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),li(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=He(n.mergedAttrs,n.attrs),i}function ci(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function li(t,e,n){for(let r=0;r<n;r++)e.push(Nr),t.blueprint.push(Nr),t.data.push(null)}function hi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function fi(t,e,n){const r=20-e.index,i=t.data.length-(65535&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function di(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function pi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Lt(e)&&(n[""]=t)}}function yi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function mi(t,e,n){t.data.push(n);const r=n.factory||(n.factory=jt(n.type)),i=new Fe(r,Lt(n),null);t.blueprint.push(i),e.push(i)}function gi(t,e,n){const r=Wt(e,t),i=ri(n),o=t[10],s=Si(t,$r(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=s}function vi(t,e,n,r,i,o){const s=Wt(t,e),a=e[11];if(null==r)Ht(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?$e(r):i(r,t.tagName||"",n);Ht(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}function bi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function _i(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function wi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ei(t,e){const n=Qt(e,t);if(Jt(n)){const t=n[1];80&n[2]?Zr(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=Dr(e);null!==r;r=Pr(r))for(let e=10;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Zr(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Qt(n[r],e);Jt(i)&&i[5]>0&&t(i)}}(n)}}function Ci(t,e){const n=Qt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Yr(r,n,n[8])}function Si(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ti(t){for(;t;){t[2]|=64;const e=kr(t);if(Ft(t)&&!e)return t;t=e}return null}function Oi(t,e,n){const r=e[10];r.begin&&r.begin();try{Zr(t,e,t.template,n)}catch(i){throw ki(e,i),i}finally{r.end&&r.end()}}function Ii(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Yt(n),i=r[1];Jr(i,r,i.template,n)}}(t[8])}function xi(t,e,n){we(0),e(t,n)}const Ai=(()=>Promise.resolve(null))();function ji(t){return t[7]||(t[7]=[])}function Ni(t){return t.cleanup||(t.cleanup=[])}function ki(t,e){const n=t[9],r=n?n.get(_n,null):null;r&&r.handleError(e)}function Di(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Pi(t,e,n){const r=Gt(e,t),i=t[11];Ht(i)?i.setValue(r,n):r.textContent=n}function Ri(t,e){const n=e[3];return-1===t.index?Dt(n)?n:null:n}function Mi(t,e){const n=Ri(t,e);return n?Qi(e[11],n[7]):null}function Li(t,e,n,r,i){if(null!=r){let o,s=!1;Dt(r)?o=r:kt(r)&&(s=!0,r=r[0]);const a=Bt(r);0===t&&null!==n?null==i?Ki(e,n,a):Wi(e,n,a,i||null):1===t&&null!==n?Wi(e,n,a,i||null):2===t?Xi(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Bt(n)&&Li(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];eo(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Fi(t,e){return Ht(e)?e.createText(t):e.createTextNode(t)}function Vi(t,e,n,r){const i=Mi(t.node,e);i&&eo(t,e,e[11],n?1:2,i,r)}function Ui(t,e){const n=t[9],r=n.indexOf(e);1024&e[2]&&ee(e[3],-1),n.splice(r,1)}function qi(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Ui(i,r),e>0&&(t[n-1][4]=r[4]);const o=lt(t,10+e);Vi(r[1],r,!1,null);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Hi(t,e){if(!(256&e[2])){const n=e[11];Ht(n)&&n.destroyNode&&eo(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Bi(t[1],t);for(;e;){let n=null;if(kt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)kt(e)&&Bi(e[1],e),e=zi(e,t);null===e&&(e=t),kt(e)&&Bi(e[1],e),n=e&&e[4]}e=n}}(e)}}function zi(t,e){let n;return kt(t)&&(n=t[6])&&2===n.type?Ri(n,t):t[3]===e?null:t[3]}function Bi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Fe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Bt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Ht(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&Dt(e[3])){r!==e[3]&&Ui(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function Gi(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?Mi(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Wt(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==mt.ShadowDom&&n!==mt.Native)return null}return Wt(r,n)}function Wi(t,e,n,r){Ht(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Ki(t,e,n){Ht(t)?t.appendChild(e,n):e.appendChild(n)}function $i(t,e,n,r){null!==r?Wi(t,e,n,r):Ki(t,e,n)}function Qi(t,e){return Ht(t)?t.parentNode(e):e.parentNode}function Yi(t,e){if(2===t.type){const n=Ri(t,e);return null===n?null:Ji(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?Wt(t,e):null}function Zi(t,e,n,r){const i=Gi(t,r,e);if(null!=i){const t=e[11],o=Yi(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)$i(t,i,n[e],o);else $i(t,i,n,o)}}function Ji(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return Wt(n,e);if(0===r)return Ji(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return Dt(t)?Ji(-1,t):Bt(t)}}{const r=e[16],i=r[6],o=kr(r),s=i.projection[n.projection];return null!=s?t(o,s):t(e,n.next)}}return null}(t,r)}return e[7]}function Xi(t,e,n){const r=Qi(t,e);r&&function(t,e,n,r){Ht(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function to(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&gr(Bt(a),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(to(t,e,n.child,r,i,o,!1),Li(e,t,i,a,o)):1===u?ro(t,e,r,n,i,o):Li(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function eo(t,e,n,r,i,o){to(n,r,t.node.child,e,i,o,!1)}function no(t,e,n){ro(e[11],0,e,n,Gi(t,n,e),Yi(n.parent||e[6],e))}function ro(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Li(e,t,i,a[u],o);else to(t,e,a,s[3],i,o,!0)}function io(t,e,n){Ht(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function oo(t,e,n){Ht(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class so{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Bt(s)),Dt(s))for(let e=10;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(4===a||5===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=kr(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Hi(this._lView[1],this._lView)}onDestroy(t){var e,n,r;e=this._lView[1],r=t,ji(n=this._lView).push(r),e.firstCreatePass&&Ni(e).push(n[7].length-1,null)}markForCheck(){Ti(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Oi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){fe(!0);try{Oi(t,e,n)}finally{fe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,eo(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ao extends so{constructor(t){super(t),this._view=t}detectChanges(){Ii(this._view)}checkNoChanges(){!function(t){fe(!0);try{Ii(t)}finally{fe(!1)}}(this._view)}get context(){return null}}let uo,co,lo;function ho(t,e,n){return uo||(uo=class extends t{}),new uo(Wt(e,n))}function fo(t,e,n,r){return co||(co=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=$r(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Yr(e,n,t),new so(n)}}),0===n.type?new co(r,n,ho(e,n,r)):null}function po(t,e,n,r){let i;lo||(lo=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return ho(e,this._hostTNode,this._hostView)}get injector(){return new pn(this._hostTNode,this._hostView)}get parentInjector(){const t=on(this._hostTNode,this._hostView),e=Ke(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=We(t),i=e,o=e[6];for(;r>1;)i=i[15],o=i[6],r--;return o}(t,this._hostView,this._hostTNode);return Be(t)&&null!=n?new pn(n,e):new pn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ot,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new lo(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],ct(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),Vi(r,n,!0,Ji(i,this._lContainer)),t.attachToViewContainerRef(this),ct(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);!function(t,e){const n=qi(t,e);n&&Hi(n[1],n)}(this._lContainer,e),lt(this._lContainer[8],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=qi(this._lContainer,e);return n&&null!=lt(this._lContainer[8],e)?new so(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Dt(o))i=o;else{let t;if(4===n.type)t=Bt(o);else if(t=r[11].createComment(""),Ft(r)){const e=r[11],i=Wt(n,r);Wi(e,Qi(e,i),t,function(t,e){return Ht(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Zi(r[1],r,t,n);r[n.index]=i=wi(o,r,t,n),Si(r,i)}return new lo(i,n,r)}function yo(t=!1){return function(t,e,n){if(!n&&Rt(t)){const n=Qt(t.index,e);return new so(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new so(e[16],e):null}(ae(),ie(),t)}let mo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>go(),t})();const go=yo,vo=new G("Set Injector scope."),bo={},_o={},wo=[];let Eo=void 0;function Co(){return void 0===Eo&&(Eo=new it),Eo}function So(t,e=null,n=null,r){return new To(t,n,e||Co(),r)}class To{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ut(e,n=>this.processProvider(n,t,e)),ut([t],t=>this.processInjectorType(t,[],i)),this.records.set(W,xo(void 0,this));const o=this.records.get(vo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:I(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=K,n=p.Default){this.assertNotDestroyed();const r=J(this);try{if(!(n&p.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof G)&&b(t);e=n&&this.injectableDefInScope(n)?xo(Oo(t),bo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&p.Self?Co():this.parent).get(t,e=n&p.Optional&&e===K?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(I(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=I(e);if(Array.isArray(e))i=e.map(I).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):I(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace($,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{J(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(I(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=N(t)))return!1;let r=w(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=w(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{ut(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ut(r,t=>this.processProvider(t,n,r||wo))}}this.injectorDefTypes.add(o),this.records.set(o,xo(r.factory,bo));const a=r.providers;if(null!=a&&!s){const e=t;ut(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=jo(t=N(t))?t:N(t&&t.provide);const i=function(t,e,n){return Ao(t)?xo(void 0,t.useValue):xo(Io(t,e,n),bo)}(t,e,n);if(jo(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&br()}else{let e=this.records.get(r);e?void 0===e.multi&&br():(e=xo(void 0,bo,!0),e.factory=()=>rt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===_o?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(I(t)):e.value===bo&&(e.value=_o,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Oo(t){const e=b(t),n=null!==e?e.factory:jt(t);if(null!==n)return n;const r=w(t);if(null!==r)return r.factory;if(t instanceof G)throw new Error(`Token ${I(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=ht(e,"?");throw new Error(`Can't resolve all parameters for ${I(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[E]||t[T]||t[S]&&t[S]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Io(t,e,n){let r=void 0;if(jo(t)){const e=N(t);return jt(e)||Oo(e)}if(Ao(t))r=()=>N(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...rt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>et(N(t.useExisting));else{const i=N(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${I(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return jt(i)||Oo(i);r=()=>new i(...rt(t.deps))}var i;return r}function xo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ao(t){return null!==t&&"object"==typeof t&&Q in t}function jo(t){return"function"==typeof t}const No=function(t,e,n){return function(t,e=null,n=null,r){const i=So(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ko=(()=>{class t{static create(t,e){return Array.isArray(t)?No(t,e,""):No(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=K,t.NULL=new it,t.\u0275prov=g({token:t,providedIn:"any",factory:()=>et(W)}),t.__NG_ELEMENT_ID__=-1,t})();const Do=new G("AnalyzeForEntryComponents");let Po=new Map;const Ro=new Set;function Mo(t){return"string"==typeof t?t:t.text()}function Lo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=x(i,t):2==o&&(r=x(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}let Fo=null;function Vo(){if(!Fo){const t=L.Symbol;if(t&&t.iterator)Fo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Fo=n)}}}return Fo}function Uo(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}class qo{constructor(t){this.wrapped=t}static wrap(t){return new qo(t)}static unwrap(t){return qo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof qo}}function Ho(t){return!!zo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Vo()in t)}function zo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Bo(t,e,n){return t[e]=n}function Go(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Wo(t,e,n,r){const i=Go(t,e,n);return Go(t,e+1,r)||i}function Ko(t,e,n,r){const i=ie();return Go(i,ye(),e)&&(oe(),vi(Ne(),i,t,e,n,r)),Ko}function $o(t,e,n,r){return Go(t,ye(),n)?e+$e(n)+r:Nr}function Qo(t,e,n,r,i,o,s,a){const u=ie(),c=oe(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Qr(e,n[6],t,0,s||null,Xt(c,a));ui(e,n,l,Xt(c,u)),ke(e,l);const h=l.tViews=ii(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),f=oi(0,null,2,-1,null,null);return f.injectorIndex=l.injectorIndex,h.node=f,null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];ue(h,!1);const f=u[11].createComment("");Zi(c,u,f,h),gr(f,u),Si(u,u[l]=wi(f,u,f,h)),Mt(h)&&ei(c,u,h),null!=s&&ni(u,h,a)}function Yo(t){return $t(ne.lFrame.contextLView,t)}function Zo(t,e=p.Default){const n=ie();return null==n?et(t,e):an(ae(),n,N(t),e)}function Jo(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ue(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(ae(),t)}function Xo(){throw new Error("invalid")}function ts(t,e,n){const r=ie();return Go(r,ye(),e)&&ai(oe(),Ne(),r,t,e,r[11],n,!1),ts}function es(t,e,n,r,i){const o=i?"class":"style";Di(t,n,e.inputs[o],o,r)}function ns(t,e,n,r){const i=ie(),o=oe(),s=20+t,a=i[11],u=i[s]=Kr(e,a,ne.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Xt(a,o),c=Qr(e,n[6],t,3,i,u);return ui(e,n,c,Xt(a,s)),null!==c.attrs&&Lo(c,c.attrs,!1),null!==c.mergedAttrs&&Lo(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(t,o,i,0,e,n,r):o.data[s];ue(c,!0);const l=c.mergedAttrs;null!==l&&Ve(a,u,l);const h=c.classes;null!==h&&oo(a,u,h);const f=c.styles;null!==f&&io(a,u,f),Zi(o,i,u,c),0===ne.lFrame.elementDepthCount&&gr(u,i),ne.lFrame.elementDepthCount++,Mt(c)&&(ei(o,i,c),ti(o,c,i)),null!==r&&ni(i,c)}function rs(){let t=ae();ce()?le():(t=t.parent,ue(t,!1));const e=t;ne.lFrame.elementDepthCount--;const n=oe();n.firstCreatePass&&(ke(n,t),Pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&es(n,e,ie(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&es(n,e,ie(),e.stylesWithoutHost,!1)}function is(t,e,n,r){ns(t,e,n,r),rs()}function os(t,e,n){const r=ie(),i=oe(),o=t+20,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Xt(o,r),a=Qr(e,n[6],t,4,"ng-container",s);return null!==s&&Lo(a,s,!0),ui(e,n,a,Xt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,i,r,e,n):i.data[o];ue(s,!0);const a=r[o]=r[11].createComment("");Zi(i,r,a,s),gr(a,r),Mt(s)&&(ei(i,r,s),ti(i,s,r)),null!=n&&ni(r,s)}function ss(){let t=ae();const e=oe();ce()?le():(t=t.parent,ue(t,!1)),e.firstCreatePass&&(ke(e,t),Pt(t)&&e.queries.elementEnd(t))}function as(){return ie()}function us(t){return!!t&&"function"==typeof t.then}function cs(t){return!!t&&"function"==typeof t.subscribe}function ls(t,e,n=!1,r){const i=ie(),o=oe(),s=ae();return function(t,e,n,r,i,o,s=!1,a){const u=Mt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=ji(e);let h=!0;if(3===r.type){const f=Wt(r,e),d=a?a(f):gt,p=d.target||f,y=l.length,m=a?t=>a(Bt(t[r.index])).target:r.index;if(Ht(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=fs(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,y,y+1)}}else o=fs(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,y,s)}const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),ls}function hs(t,e,n){try{return!1!==e(n)}catch(r){return ki(t,r),!1}}function fs(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Qt(t.index,e):e;0==(32&e[2])&&Ti(s);let a=hs(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=hs(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ds(t=1){return function(t){return(ne.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ne.lFrame.contextLView))[8]}(t)}function ps(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Ir(t,o,!0):xr(r,o))return i}else n=i}return n}function ys(t){const e=ie()[16][6];if(!e.projection){const n=e.projection=ht(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?ps(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}let ms=!1;function gs(t){ms=t}function vs(t,e=0,n){const r=ie(),i=oe(),o=Qr(i,r[6],t,1,null,n||null);null===o.projection&&(o.projection=e),le(),ms||no(i,r,o)}function bs(t,e,n){return _s(t,"",e,"",n),bs}function _s(t,e,n,r,i){const o=ie(),s=$o(o,e,n,r);return s!==Nr&&ai(oe(),Ne(),o,t,s,o[11],i,!1),_s}const ws=[];function Es(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?qr(o):zr(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Cs(t[a],e)&&(u=!0,t[a+1]=r?Gr(n):Hr(n)),a=r?qr(n):zr(n)}u&&(t[n+1]=r?Hr(o):Gr(o))}function Cs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pt(t,e)>=0}const Ss={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ts(t){return t.substring(Ss.key,Ss.keyEnd)}function Os(t,e){const n=Ss.textEnd;return n===e?-1:(e=Ss.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ss.key=e,n),Is(t,e,n))}function Is(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function xs(t,e,n){return ks(t,e,n,!1),xs}function As(t,e){return ks(t,e,null,!0),As}function js(t){Ds(ft,Ns,t,!0)}function Ns(t,e){for(let n=function(t){return function(t){Ss.key=0,Ss.keyEnd=0,Ss.value=0,Ss.valueEnd=0,Ss.textEnd=t.length}(t),Os(t,Is(t,0,Ss.textEnd))}(e);n>=0;n=Os(e,n))ft(t,Ts(e),!0)}function ks(t,e,n,r){const i=ie(),o=oe(),s=me(2);if(o.firstUpdatePass&&Rs(o,t,s,r),e!==Nr&&Go(i,s,e)){let a;null==n&&(a=function(){const t=ne.lFrame;return null===t?null:t.currentSanitizer}())&&(n=a),Fs(o,o.data[Ae()+20],i,i[11],t,i[s+1]=function(t,e){return null==t||("function"==typeof e?t=e(t):"string"==typeof e?t+=e:"object"==typeof t&&(t=I(In(t)))),t}(e,n),r,s)}}function Ds(t,e,n,r){const i=oe(),o=me(2);i.firstUpdatePass&&Rs(i,null,o,r);const s=ie();if(n!==Nr&&Go(s,o,n)){const a=i.data[Ae()+20];if(qs(a,r)&&!Ps(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=x(t,n||"")),es(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Nr&&(i=ws);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const f=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let p=null,y=void 0;l===h?(u+=2,c+=2,f!==d&&(p=h,y=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,y=d),null!==p&&Fs(t,e,n,r,p,y,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return ws;const r=[],i=In(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Ps(t,e){return e>=t.expandoStartIndex}function Rs(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Ae()+20],s=Ps(t,n);qs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=be(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ls(n=Ms(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ms(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==zr(r))return t[qr(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Ms(null,t,e,n[1],r),n=Ls(n,e.attrs,r),function(t,e,n,r){t[qr(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ls(r,t[o].hostAttrs,n);return Ls(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qr(s),u=zr(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||pt(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=qr(t[a+1]);t[r+1]=Ur(e,a),0!==e&&(t[e+1]=Br(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Ur(a,0),0!==a&&(t[a+1]=Br(t[a+1],r)),a=r;else t[r+1]=Ur(u,0),0===a?a=r:t[u+1]=Br(t[u+1],r),u=r;l&&(t[r+1]=Hr(t[r+1])),Es(t,c,r,!0),Es(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pt(o,e)>=0&&(n[r+1]=Gr(n[r+1]))}(e,c,t,r,o),s=Ur(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Ms(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ls(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ls(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ft(t,s,!!n||e[++o]))}return void 0===t?null:t}function Fs(t,e,n,r,i,o,s,a){if(3!==e.type)return;const u=t.data,c=u[a+1];Us(1==(1&c)?Vs(u,e,n,i,zr(c),s):void 0)||(Us(o)||function(t){return 2==(2&t)}(c)&&(o=Vs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Ht(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?o?t.removeStyle(n,r,e):n.style.removeProperty(r):o?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,s,Gt(Ae(),n),i,o))}function Vs(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Nr&&(l=c?ws:void 0);let h=c?dt(l,r):u===r?l:void 0;if(o&&!Us(h)&&(h=dt(e,r)),Us(h)&&(a=h,s))return a;const f=t[i+1];i=s?qr(f):zr(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=dt(t,r))}return a}function Us(t){return void 0!==t}function qs(t,e){return 0!=(t.flags&(e?16:32))}function Hs(t,e=""){const n=ie(),r=oe(),i=t+20,o=r.firstCreatePass?Qr(r,n[6],t,3,null,null):r.data[i],s=n[i]=Fi(e,n[11]);Zi(r,n,s,o),ue(o,!1)}function zs(t){return Bs("",t,""),zs}function Bs(t,e,n){const r=ie(),i=$o(r,t,e,n);return i!==Nr&&Pi(r,Ae(),i),Bs}function Gs(t,e,n,r,i){const o=ie(),s=function(t,e,n,r,i,o){const s=Wo(t,pe(),n,i);return me(2),s?e+$e(n)+r+$e(i)+o:Nr}(o,t,e,n,r,i);return s!==Nr&&Pi(o,Ae(),s),Gs}function Ws(t,e,n){Ds(ft,Ns,$o(ie(),t,e,n),!0)}function Ks(t,e,n,r,i,o,s,a,u){Ds(ft,Ns,function(t,e,n,r,i,o,s,a,u,c){const l=function(t,e,n,r,i,o){const s=Wo(t,e,n,r);return Wo(t,e+2,i,o)||s}(t,pe(),n,i,s,u);return me(4),l?e+$e(n)+r+$e(i)+o+$e(s)+a+$e(u)+c:Nr}(ie(),t,e,n,r,i,o,s,a,u),!0)}function $s(t,e,n){const r=ie();return Go(r,ye(),e)&&ai(oe(),Ne(),r,t,e,r[11],n,!0),$s}function Qs(t,e,n){const r=ie();if(Go(r,ye(),e)){const i=oe(),o=Ne();ai(i,o,r,t,e,function(t,e,n){return(null===t||Lt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}(be(i.data),o,r),n,!0)}return Qs}function Ys(t,e){const n=Yt(t)[1],r=n.data.length-1;ke(n,{directiveStart:r,directiveEnd:r+1})}function Zs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Lt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Js(t.inputs),e.declaredInputs=Js(t.declaredInputs),e.outputs=Js(t.outputs);const n=i.hostBindings;n&&ea(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Xs(t,o),s&&ta(t,s),m(t.inputs,i.inputs),m(t.declaredInputs,i.declaredInputs),m(t.outputs,i.outputs),Lt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}e.afterContentChecked=e.afterContentChecked||i.afterContentChecked,e.afterContentInit=t.afterContentInit||i.afterContentInit,e.afterViewChecked=t.afterViewChecked||i.afterViewChecked,e.afterViewInit=t.afterViewInit||i.afterViewInit,e.doCheck=t.doCheck||i.doCheck,e.onDestroy=t.onDestroy||i.onDestroy,e.onInit=t.onInit||i.onInit}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Zs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=He(i.hostAttrs,n=He(n,i.hostAttrs))}}(r)}function Js(t){return t===gt?{}:t===vt?[]:t}function Xs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function ta(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function ea(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}class na{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ra(t){t.type.prototype.ngOnChanges&&(t.setInput=ia,t.onChanges=function(){const t=oa(this),e=t&&t.current;if(e){const n=t.previous;if(n===gt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}})}function ia(t,e,n,r){const i=oa(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:gt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new na(u&&u.currentValue,e,s===gt),t[r]=e}function oa(t){return t.__ngSimpleChanges__||null}function sa(t,e,n,r,i){if(t=N(t),Array.isArray(t))for(let o=0;o<t.length;o++)sa(t[o],e,n,r,i);else{const o=oe(),s=ie();let a=jo(t)?t:N(t.provide),u=Io(t);const c=ae(),l=65535&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>16;if(jo(t)||!t.multi){const r=new Fe(u,i,Zo),d=ca(a,e,i?l:l+f,h);-1===d?(sn(en(c,s),o,a),aa(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=65536),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=ca(a,e,l+f,h),p=ca(a,e,l,l+f),y=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!y){sn(en(c,s),o,a);const l=function(t,e,n,r,i){const o=new Fe(t,n,Zo);return o.multi=[],o.index=e,o.componentProviders=0,ua(o,i,r&&!n),o}(i?ha:la,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),aa(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=65536),n.push(l),s.push(l)}else aa(o,t,d>-1?d:p,ua(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function aa(t,e,n,r){const i=jo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ua(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ca(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function la(t,e,n,r){return fa(this.multi,[])}function ha(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=hn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),fa(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],fa(i,o);return o}function fa(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function da(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=oe();if(r.firstCreatePass){const i=Lt(t);sa(n,r.data,r.blueprint,i,!0),sa(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}ra.ngInherit=!0;class pa{}class ya{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${I(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ma=(()=>{class t{}return t.NULL=new ya,t})(),ga=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>va(t),t})();const va=function(t){return ho(t,ae(),ie())};class ba{}const _a=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let wa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ea(),t})();const Ea=function(){const t=ie(),e=Qt(ae().index,t);return function(t){const e=t[11];if(Ht(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(kt(e)?e:t)};let Ca=(()=>{class t{}return t.\u0275prov=g({token:t,providedIn:"root",factory:()=>null}),t})();class Sa{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ta=new Sa("9.1.13");class Oa{constructor(){}supports(t){return Ho(t)}create(t){return new xa(t)}}const Ia=(t,e)=>e;class xa{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ia}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ka(n,r,i)?e:n,s=ka(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ho(t))throw new Error(`Error trying to diff '${I(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Uo(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Uo(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Vo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Uo(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Uo(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Uo(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Uo(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Aa(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Na),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Na),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Aa{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ja{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Uo(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Na{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ja,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ka(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Da{constructor(){}supports(t){return t instanceof Map||zo(t)}create(){return new Pa}}class Pa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||zo(t)))throw new Error(`Error trying to diff '${I(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ra(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Uo(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ra{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Ma=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new d,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=g({token:t,providedIn:"root",factory:()=>new t([new Oa])}),t})(),La=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new d,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=g({token:t,providedIn:"root",factory:()=>new t([new Da])}),t})();const Fa=[new Da],Va=new Ma([new Oa]),Ua=new La(Fa);let qa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ha(t,ga),t})();const Ha=function(t,e){return fo(t,e,ae(),ie())};let za=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ba(t,ga),t})();const Ba=function(t,e){return po(t,e,ae(),ie())},Ga={};class Wa extends ma{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=At(t);return new Qa(e,this.ngModule)}}function Ka(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const $a=new G("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ye});class Qa extends pa{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(jr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ka(this.componentDef.inputs)}get outputs(){return Ka(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ga,i);return o!==Ga||r===Ga?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ba,zt),s=i.get(Ca,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ht(t))return t.selectRootElement(e,n===mt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Kr(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),f={components:[],scheduler:Ye,clean:Ai,playerHandler:null,flags:0},d=ii(0,-1,null,1,0,null,null,null,null,null),p=$r(null,d,f,l,null,null,o,a,s,i);let y,m;Ce(p,null);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Qr(s,null,0,3,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Lo(a,u,!0),null!==t&&(Ve(i,t,u),null!==a.classes&&oo(i,t,a.classes),null!==a.styles&&io(i,t,a.styles)));const c=r.createRenderer(t,e),l=$r(n,ri(e),null,e.onPush?64:16,n[20],a,r,c,void 0);return s.firstCreatePass&&(sn(en(a,n),s,e.type),di(s,a),yi(a,n.length,1)),Si(n,l),n[20]=l}(c,this.componentDef,p,o,a);if(c)if(n)Ve(a,c,["ng-version",Ta.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Tr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ve(a,c,t),e&&e.length>0&&oo(a,c,e.join(" "))}if(m=Kt(d,0),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}y=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=ae();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),fi(t,r,1),mi(t,e,n));const i=hn(e,t,e.length-1,r);gr(i,e);const o=Wt(r,e);return o&&gr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=ae();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){je(a.index-20);const t=n[1];ci(t,e),li(t,n,e.hostVars),hi(e,s)}return s}(t,this.componentDef,p,f,[Ys]),Yr(d,p,null)}finally{xe()}const g=new Ya(this.componentType,y,ho(ga,m,p),p,m);return n&&!h||(d.node.child=m),g}}class Ya extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new ao(r),function(t,e,n,r){let i=t.node;null==i&&(t.node=i=oi(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new pn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Za=void 0;var Ja=["en",[["a","p"],["AM","PM"],Za],[["AM","PM"],Za,Za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Za,"{1} 'at' {0}",Za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Xa={};function tu(t,e,n){"string"!=typeof e&&(n=e,e=t[ou.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Xa[e]=t,n&&(Xa[e][ou.ExtraData]=n)}function eu(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=iu(e);if(n)return n;const r=e.split("-")[0];if(n=iu(r),n)return n;if("en"===r)return Ja;throw new Error(`Missing locale data for the locale "${t}".`)}function nu(t){return eu(t)[ou.CurrencyCode]||null}function ru(t){return eu(t)[ou.PluralCase]}function iu(t){return t in Xa||(Xa[t]=L.ng&&L.ng.common&&L.ng.common.locales&&L.ng.common.locales[t]),Xa[t]}const ou=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencyCode]="CurrencyCode",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.Directionality]="Directionality",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),su=["zero","one","two","few","many"],au=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,uu=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,cu=/\ufffd(\/?[#*!]\d+):?\d*\ufffd/gi,lu=/\ufffd(\d+):?\d*\ufffd/gi,hu=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi;function fu(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);au.test(n)?r.push(du(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function du(t){const e=[],n=[];let r=1,i=0;const o=fu(t=t.replace(au,(function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""})));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=fu(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function pu(t){let e,n,r="",i=0,o=!1;for(;null!==(e=uu.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function yu(t,e,n,r=null){const i=[null,null],o=t.split(lu);let s=0;for(let a=0;a<o.length;a++){const t=o[a];if(1&a){const e=parseInt(t,10);i.push(-1-e),s|=bu(e)}else""!==t&&i.push(t)}return i.push(e<<2|(n?1:0)),n&&i.push(n,r),i[0]=s,i[1]=i.length-2,i}function mu(t,e=0){let n;e|=bu(t.mainBinding);for(let r=0;r<t.values.length;r++){const i=t.values[r];for(let t=0;t<i.length;t++){const r=i[t];if("string"==typeof r)for(;n=lu.exec(r);)e|=bu(parseInt(n[1],10));else e=mu(r,e)}}return e}const gu=[];let vu=-1;function bu(t){return 1<<Math.min(t,31)}const _u=[];let wu;function Eu(t){return t+wu++}function Cu(t,e,n,r,i){const o=e.next;r||(r=n),r===n&&e!==n.child?(e.next=n.child,n.child=e):r!==n&&e!==r.next?(e.next=r.next,r.next=e):e.next=null,n!==i[6]&&(e.parent=n);let s=e.next;for(;s;)s.next===e&&(s.next=o),s=s.next;if(1===e.type)return no(t,i,e),e;Zi(t,i,Wt(e,i),e);const a=i[e.index];return 0!==e.type&&Dt(a)&&Zi(t,i,a[7],e),e}function Su(t){return void 0===t}function Tu(t,e,n,r,i,o){const s=ae();e[n+20]=i;const a=Qr(t,e[6],n,r,o,null);return s&&s.next===a&&(s.next=null),a}function Ou(t,e,n,r){const i=r[11];let o=null,s=null;const a=[];for(let u=0;u<e.length;u++){const c=e[u];if("string"==typeof c){const t=Fi(c,i),l=e[++u];s=o,o=Tu(n,r,l,3,t,null),a.push(l),le()}else if("number"==typeof c)switch(7&c){case 1:const i=c>>>17;let l;l=i===t?r[6]:Kt(n,i),s=Cu(n,o,l,s,r);break;case 0:const h=c>=0,f=(h?c:~c)>>>3;a.push(f),s=o,o=Kt(n,f),o&&ue(o,h);break;case 5:s=o=Kt(n,c>>>3),ue(o,!1);break;case 4:const d=e[++u],p=e[++u];vi(Kt(n,c>>>3),r,d,p,null,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}else switch(c){case Vr:const t=e[++u],l=e[++u],h=i.createComment(t);s=o,o=Tu(n,r,l,5,h,null),a.push(l),gr(h,r),o.activeCaseIndex=null,le();break;case Fr:const f=e[++u],d=e[++u];s=o,o=Tu(n,r,d,3,i.createElement(f),f),a.push(d);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}}return le(),a}function Iu(t,e,n,r){const i=Kt(t,n),o=Gt(n,e);o&&Xi(e[11],o);const s=$t(e,n);if(Dt(s)){const t=s;0!==i.type&&Xi(e[11],t[7])}r&&(i.flags|=64)}function xu(t,e,n){(function(t,e,n){const r=oe();gu[++vu]=t,gs(!0),r.firstCreatePass&&null===r.data[t+20]&&function(t,e,n,r,i){const o=e.blueprint.length-20;wu=0;const s=ae(),a=ce()?s:s&&s.parent;let u=a&&a!==t[6]?a.index-20:n,c=0;_u[c]=u;const l=[];if(n>0&&s!==a){let t=s.index-20;ce()||(t=~t),l.push(t<<3|0)}const h=[],f=[];if(""===r&&Su(i))l.push(r,Eu(o),u<<17|1);else{const t=function(t,e){if(Su(e))return pu(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return pu(t.substring(n,r))}}(r,i),e=(d=t,d.replace(Fu," ")).split(cu);for(let n=0;n<e.length;n++){let r=e[n];if(1&n)if("/"===r.charAt(0)){if("#"===r.charAt(1)){const t=parseInt(r.substr(2),10);u=_u[--c],l.push(t<<3|5)}}else{const t=parseInt(r.substr(1),10),e="#"===r.charAt(0);l.push((e?t:~t)<<3|0,u<<17|1),e&&(_u[++c]=u=t)}else{const e=fu(r);for(let n=0;n<e.length;n++)if(1&n){const r=e[n];if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${t}" message.`);const i=Eu(o);l.push(Vr,"",i,u<<17|1);const s=mu(r);Ru(f,r,i,i);const a=f.length-1;h.push(bu(r.mainBinding),3,-1-r.mainBinding,i<<2|2,a,s,2,i<<2|3,a)}else if(""!==e[n]){const t=e[n],r=t.match(lu),i=Eu(o);l.push(r?"":t,i,u<<17|1),r&&at(yu(t,i),h)}}}}var d;wu>0&&function(t,e,n){if(n>0&&t.firstCreatePass){for(let r=0;r<n;r++)t.blueprint.push(null),t.data.push(null),e.push(null);t.expandoInstructions?t.expandoInstructions.push(n):t.expandoStartIndex+=n}}(e,t,wu),e.data[n+20]={vars:wu,create:l,update:h,icus:f.length?f:null}}(ie(),r,t,e,n)})(t,e,n),function(){const t=ie();!function(t,e){const n=gu[vu--],r=t.data[n+20],i=ae(),o=Ou(n,r.create,t,e);let s=n+1;for(;s<=i.index-20;){-1===o.indexOf(s)&&Iu(t,e,s,!0);const n=Kt(t,s);!n||0!==n.type&&3!==n.type&&4!==n.type||null===n.localNames||(s+=n.localNames.length>>1),s++}}(oe(),t),gs(!1)}()}function Au(t,e){!function(t,e,n,r){const i=ae().index-20,o=[];for(let s=0;s<r.length;s+=2){const a=r[s],u=r[s+1].split(hu);for(let r=0;r<u.length;r++){const s=u[r];if(1&r)throw new Error("ICU expressions are not yet supported in attributes");if(""!==s)if(s.match(lu))e.firstCreatePass&&null===e.data[n+20]&&at(yu(s,i,a),o);else{const n=Kt(e,i);3===n.type&&vi(n,t,a,s,null,null);const r=null!==n.inputs&&n.inputs[a];r&&Di(e,t,r,a,s)}}}e.firstCreatePass&&null===e.data[n+20]&&(e.data[n+20]=o)}(ie(),oe(),t,e)}let ju=0,Nu=0;function ku(t){return Go(ie(),ye(),t)&&(ju|=1<<Nu),Nu++,ku}function Du(t){if(Nu){const e=oe(),n=e.data[t+20];let r,i=null;Array.isArray(n)?r=n:(r=n.update,i=n.icus);const o=pe()-Nu-1,s=ie();!function t(e,n,r,i,o,s,a=!1){let u=!1;for(let c=0;c<e.length;c++){const l=e[c],h=e[++c];if(a||l&i){let a="";for(let l=c+1;l<=c+h;l++){const c=e[l];if("string"==typeof c)a+=c;else if("number"==typeof c)if(c<0)a+=$e(s[r-c]);else{const h=c>>>2;let f,d,p;switch(3&c){case 1:const c=e[++l],y=e[++l];ai(o,Kt(o,h),s,c,a,s[11],y,!1);break;case 0:Pi(s,h,a);break;case 2:if(f=e[++l],d=n[f],p=Kt(o,h),null!==p.activeCaseIndex){const t=d.remove[p.activeCaseIndex];for(let e=0;e<t.length;e++){const r=t[e];switch(7&r){case 3:Iu(o,s,r>>>3,!1);break;case 6:const i=Kt(o,t[e+1]>>>3).activeCaseIndex;null!==i&&at(n[r>>>3].remove[i],t)}}}const m=Pu(d,a);p.activeCaseIndex=-1!==m?m:null,m>-1&&(Ou(-1,d.create[m],o,s),u=!0);break;case 3:f=e[++l],d=n[f],p=Kt(o,h),null!==p.activeCaseIndex&&t(d.update[p.activeCaseIndex],n,r,i,o,s,u)}}}}c+=h}}(r,i,o,ju,e,s),ju=0,Nu=0}}function Pu(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=ru(e)(parseInt(t,10)),r=su[n];return void 0!==r?r:"other"}(e,Vu);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return n}function Ru(t,e,n,r){const i=[],o=[],s=[],a=[],u=[];for(let c=0;c<e.values.length;c++){const l=e.values[c],h=[];for(let t=0;t<l.length;t++){const e=l[t];if("string"!=typeof e){const n=h.push(e)-1;l[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}const f=Mu(l.join(""),n,h,t,r);i.push(f.create),o.push(f.remove),s.push(f.update),a.push(f.vars),u.push(f.childIcus)}t.push({type:e.type,vars:a,childIcus:u,cases:e.cases,create:i,remove:o,update:s}),wu+=Math.max(...a)}function Mu(t,e,n,r,i){const o=new Vn(qt()).getInertBodyElement(t);if(!o)throw new Error("Unable to generate inert body element");const s={vars:0,childIcus:[],create:[],remove:[],update:[]};return function t(e,n,r,i,o,s){if(e){const a=[];for(;e;){const u=e.nextSibling,c=s+ ++n.vars;switch(e.nodeType){case Node.ELEMENT_NODE:const u=e,l=u.tagName.toLowerCase();if(Yn.hasOwnProperty(l)){n.create.push(Fr,l,c,r<<17|1);const a=u.attributes;for(let t=0;t<a.length;t++){const e=a.item(t),r=e.name.toLowerCase();e.value.match(lu)?Xn.hasOwnProperty(r)&&at(Zn[r]?yu(e.value,c,e.name,Hn):Jn[r]?yu(e.value,c,e.name,zn):yu(e.value,c,e.name),n.update):n.create.push(c<<3|4,e.name,e.value)}t(e.firstChild,n,c,i,o,s),n.remove.push(c<<3|3)}else n.vars--;break;case Node.TEXT_NODE:const h=e.textContent||"",f=h.match(lu);n.create.push(f?"":h,c,r<<17|1),n.remove.push(c<<3|3),f&&at(yu(h,c),n.update);break;case Node.COMMENT_NODE:const d=Lu.exec(e.textContent||"");if(d){const t=parseInt(d[1],10);n.create.push(Vr,"",c,r<<17|1),a.push([i[t],c])}else n.vars--;break;default:n.vars--}e=u}for(let t=0;t<a.length;t++){const e=a[t][0],r=a[t][1];Ru(o,e,r,s+n.vars);const i=o.length-1;n.vars+=Math.max(...o[i].vars),n.childIcus.push(i);const u=mu(e);n.update.push(bu(e.mainBinding),3,-1-e.mainBinding,r<<2|2,i,u,2,r<<2|3,i),n.remove.push(i<<3|6,r<<3|3)}}}((ar(o)||o).firstChild,s,e,n,r,i),s}const Lu=/\ufffd(\d+)\ufffd/,Fu=/\uE500/g;let Vu="en-US";function Uu(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Vu=t.toLowerCase().replace(/_/g,"-"))}const qu=new Map;class Hu extends ot{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Wa(this);const n=Nt(t),r=t[H]||null;r&&Uu(r),this._bootstrapComponents=Ze(n.bootstrap),this._r3Injector=So(t,e,[{provide:ot,useValue:this},{provide:ma,useValue:this.componentFactoryResolver}],I(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ko.THROW_IF_NOT_FOUND,n=p.Default){return t===ko||t===ot||t===W?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class zu extends st{constructor(t){super(),this.moduleType=t,null!==Nt(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${I(e)} vs ${I(e.name)}`)})(t,qu.get(t),e),qu.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new Hu(this.moduleType,t)}}function Bu(t,e,n,r){return $u(ie(),de(),t,e,n,r)}function Gu(t,e,n,r,i){return Qu(ie(),de(),t,e,n,r,i)}function Wu(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=Wo(t,e,n,r);return Go(t,e+2,i)||o}(t,u,i,o,s)?Bo(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):Ku(t,u+3)}(ie(),de(),t,e,n,r,i,o)}function Ku(t,e){const n=t[e];return n===Nr?void 0:n}function $u(t,e,n,r,i,o){const s=e+n;return Go(t,s,i)?Bo(t,s+1,o?r.call(o,i):r(i)):Ku(t,s+1)}function Qu(t,e,n,r,i,o,s){const a=e+n;return Wo(t,a,i,o)?Bo(t,a+2,s?r.call(s,i,o):r(i,o)):Ku(t,a+2)}function Yu(t,e){const n=oe();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=jt(r.type)),s=X(Zo),a=Xe(!1),u=o();return Xe(a),X(s),function(t,e,n,r){const i=n+20;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,ie(),t,u),u}function Zu(t,e,n){const r=ie(),i=$t(r,t);return tc(r,Xu(r,t)?$u(r,de(),e,i.transform,n,i):i.transform(n))}function Ju(t,e,n,r){const i=ie(),o=$t(i,t);return tc(i,Xu(i,t)?Qu(i,de(),e,o.transform,n,r,o):o.transform(n,r))}function Xu(t,e){return t[1].data[e+20].pure}function tc(t,e){return qo.isWrapped(e)&&(e=qo.unwrap(e),t[pe()]=Nr),e}class ec extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}}function nc(){return this._results[Vo()]()}class rc{constructor(){this.dirty=!0,this._results=[],this.changes=new ec,this.length=0;const t=Vo(),e=rc.prototype;e[t]||(e[t]=nc)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ic{constructor(t){this.queryList=t,this.matches=null}clone(){return new ic(this.queryList)}setDirty(){this.queryList.setDirty()}}class oc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new oc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==_c(t,e).matches&&this.queries[e].setDirty()}}class sc{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class ac{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new ac(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class uc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new uc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let r=0;r<n.length;r++)this.matchTNodeWithReadOption(t,e,cc(e,n[r]))}else{const n=this.metadata.predicate;n===qa?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,ln(e,t,n,!1,!1))}}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ga||r===za||r===qa&&0===e.type)this.addMatch(e.index,-2);else{const n=ln(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function cc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function lc(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?ho(ga,t,e):0===t.type?fo(qa,ga,t,e):null}(e,t):-2===n?function(t,e,n){return n===ga?ho(ga,e,t):n===qa?fo(qa,ga,e,t):n===za?po(za,ga,e,t):void 0}(t,e,r):hn(t,t[1],n,e)}function hc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:lc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function fc(t){const e=ie(),n=oe(),r=_e();we(r+1);const i=_c(n,r);if(t.dirty&&Zt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=hc(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=10;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):hc(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function dc(t,e,n){!function(t,e,n,r,i,o){t.firstCreatePass&&(bc(t,new sc(n,r,!0,i),-1),t.staticViewQueries=!0),vc(t,e)}(oe(),ie(),t,e,n)}function pc(t,e,n,r){mc(oe(),ie(),e,n,r,!1,ae(),t)}function yc(t,e,n,r){mc(oe(),ie(),e,n,r,!0,ae(),t)}function mc(t,e,n,r,i,o,s,a){t.firstCreatePass&&(bc(t,new sc(n,r,o,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a),o&&(t.staticContentQueries=!0)),vc(t,e)}function gc(){return t=ie(),e=_e(),t[19].queries[e].queryList;var t,e}function vc(t,e){const n=new rc;!function(t,e,n,r){const i=ji(e);i.push(n),t.firstCreatePass&&Ni(t).push(r,i.length-1)}(t,e,n,n.destroy),null===e[19]&&(e[19]=new oc),e[19].queries.push(new ic(n))}function bc(t,e,n){null===t.queries&&(t.queries=new ac),t.queries.track(new uc(e,n))}function _c(t,e){return t.queries.getByIndex(e)}function wc(t,e){return fo(qa,ga,t,e)}function Ec(t=p.Default){const e=yo(!0);if(null!=e||t&p.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}const Cc=new G("Application Initializer");let Sc=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();us(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(et(Cc,8))},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();const Tc=new G("AppId"),Oc={provide:Tc,useFactory:function(){return`${Ic()}${Ic()}${Ic()}`},deps:[]};function Ic(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xc=new G("Platform Initializer"),Ac=new G("Platform ID"),jc=new G("appBootstrapListener");let Nc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();const kc=new G("LocaleId"),Dc=new G("DefaultCurrencyCode");class Pc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Rc=function(t){return new zu(t)},Mc=Rc,Lc=function(t){return Promise.resolve(Rc(t))},Fc=function(t){const e=Rc(t),n=Ze(Nt(t).declarations).reduce((t,e)=>{const n=At(e);return n&&t.push(new Qa(n)),t},[]);return new Pc(e,n)},Vc=Fc,Uc=function(t){return Promise.resolve(Fc(t))};let qc=(()=>{class t{constructor(){this.compileModuleSync=Mc,this.compileModuleAsync=Lc,this.compileModuleAndAllComponentsSync=Vc,this.compileModuleAndAllComponentsAsync=Uc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();const Hc=new G("compilerOptions"),zc=(()=>Promise.resolve(0))();function Bc(t){"undefined"==typeof Zone?zc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Gc{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ec(!1),this.onMicrotaskEmpty=new ec(!1),this.onStable=new ec(!1),this.onError=new ec(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=L.requestAnimationFrame,e=L.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(L,()=>{t.lastRequestAnimationFrameId=-1,Qc(t),$c(t)}),Qc(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Yc(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Zc(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Yc(t),e.invoke(r,i,o,s,a)}finally{Zc(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Qc(t),$c(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Gc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Kc,Wc,Wc);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Wc(){}const Kc={};function $c(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Qc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Yc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Zc(t){t._nesting--,$c(t)}class Jc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ec,this.onMicrotaskEmpty=new ec,this.onStable=new ec,this.onError=new ec}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Xc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gc.assertNotInAngularZone(),Bc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(et(Gc))},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})(),tl=(()=>{class t{constructor(){this._applications=new Map,il.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return il.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();class el{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function nl(t){il=t}let rl,il=new el,ol=function(t,e,n){const r=t.get(Hc,[]).concat(e),i=new zu(n);if(0===Po.size)return Promise.resolve(i);const o=function(t){const e=[];return t.forEach(t=>t&&e.push(...t)),e}(r.map(t=>t.providers));if(0===o.length)return Promise.resolve(i);const s=function(){const t=L.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}(),a=ko.create({providers:o}).get(s.ResourceLoader);return function(t){const e=[],n=new Map;function r(t){let e=n.get(t);if(!e){const r=(t=>Promise.resolve(a.get(t)))(t);n.set(t,e=r.then(Mo))}return e}return Po.forEach((t,n)=>{const i=[];t.templateUrl&&i.push(r(t.templateUrl).then(e=>{t.template=e}));const o=t.styleUrls,s=t.styles||(t.styles=[]),a=t.styles.length;o&&o.forEach((e,n)=>{s.push(""),i.push(r(e).then(r=>{s[a+n]=r,o.splice(o.indexOf(e),1),0==o.length&&(t.styleUrls=void 0)}))});const u=Promise.all(i).then(()=>function(t){Ro.delete(t)}(n));e.push(u)}),Po=new Map,Promise.all(e).then(()=>{})}().then(()=>i)};const sl=new G("AllowMultipleToken");class al{constructor(t,e){this.name=t,this.token=e}}function ul(t,e,n=[]){const r="Platform: "+e,i=new G(r);return(e=[])=>{let o=cl();if(!o||o.injector.get(sl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:vo,useValue:"platform"});!function(t){if(rl&&!rl.destroyed&&!rl.injector.get(sl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");rl=t.get(ll);const e=t.get(xc,null);e&&e.forEach(t=>t())}(ko.create({providers:t,name:r}))}return function(t){const e=cl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function cl(){return rl&&!rl.destroyed?rl:null}let ll=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Jc:("zone.js"===t?void 0:t)||new Gc({enableLongStackTrace:Ln(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Gc,useValue:n}];return n.run(()=>{const e=ko.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(_n,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>dl(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return us(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Sc);return t.runInitializers(),t.donePromise.then(()=>(Uu(i.injector.get(kc,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=hl({},e);return ol(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(fl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${I(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(et(ko))},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();function hl(t,e){return Array.isArray(e)?e.reduce(hl,t):Object.assign(Object.assign({},t),e)}let fl=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Ln(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Gc.assertNotInAngularZone(),Bc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Gc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof pa?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ot),i=n.create(ko.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Xc,null);return o&&i.injector.get(tl).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Ln()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;dl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(jc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),dl(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(et(Gc),et(Nc),et(ko),et(_n),et(ma),et(Sc))},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();function dl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class pl{}class yl{}const ml={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let gl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||ml}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>vl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>vl(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(et(qc),et(yl,8))},t.\u0275prov=g({token:t,factory:t.\u0275fac}),t})();function vl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const bl=function(t){return null},_l=ul(null,"core",[{provide:Ac,useValue:"unknown"},{provide:ll,deps:[ko]},{provide:tl,deps:[]},{provide:Nc,deps:[]}]),wl=[{provide:fl,useClass:fl,deps:[Gc,Nc,ko,_n,ma,Sc]},{provide:$a,deps:[Gc],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Sc,useClass:Sc,deps:[[new h,Cc]]},{provide:qc,useClass:qc,deps:[]},Oc,{provide:Ma,useFactory:function(){return Va},deps:[]},{provide:La,useFactory:function(){return Ua},deps:[]},{provide:kc,useFactory:function(t){return Uu(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new l(kc),new h,new d]]},{provide:Dc,useValue:"USD"}];let El=(()=>{class t{constructor(t){}}return t.\u0275mod=St({type:t}),t.\u0275inj=v({factory:function(e){return new(e||t)(et(fl))},providers:wl}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mCNh:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("SpAZ");function i(...t){return o(t)}function o(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return L})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return k})),n.d(e,"i",(function(){return F})),n.d(e,"j",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return H})),n.d(e,"m",(function(){return d})),n.d(e,"n",(function(){return N})),n.d(e,"o",(function(){return m})),n.d(e,"p",(function(){return g})),n.d(e,"q",(function(){return b})),n.d(e,"r",(function(){return P})),n.d(e,"s",(function(){return _})),n.d(e,"t",(function(){return p})),n.d(e,"u",(function(){return y})),n.d(e,"v",(function(){return E})),n.d(e,"w",(function(){return v})),n.d(e,"x",(function(){return w})),n.d(e,"y",(function(){return j})),n.d(e,"z",(function(){return I})),n.d(e,"A",(function(){return R})),n.d(e,"B",(function(){return M})),n.d(e,"C",(function(){return D})),n.d(e,"D",(function(){return W})),n.d(e,"E",(function(){return G})),n.d(e,"F",(function(){return x})),n.d(e,"G",(function(){return q})),n.d(e,"H",(function(){return z})),n.d(e,"I",(function(){return B}));var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function m(){return"object"==typeof self&&self.self===self}function g(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function E(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function T(t,e){return t.replace(O,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var O=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},j=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},N=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin};function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function P(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function R(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function z(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e,r)+"must be a valid function.")}function B(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e,r)+"must be a valid context object.")}var G=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i)},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:a,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(a))try{a.call(this)}catch(l){e=l instanceof s?u(l.errors):[l]}if(Object(r.a)(c)){let t=-1,n=c.length;for(;++t<n;){const n=c[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(l){e=e||[],l instanceof s?e=e.concat(u(l.errors)):e.push(l)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return g})),n.d(e,"f",(function(){return S})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return E}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.a){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const y=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(y.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),g=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.N("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[v,u.z,[new u.A,b]]};let O=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.M.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(e){return new(e||t)(u.bc(u.B))},providers:[T]}),t})()}).call(this,n("3UD+")(t))},t19r:function(t){t.exports=JSON.parse('{"a":[{"Title":"Back to the Future","Year":"19850205 ","imdbID":"tt0088763","Type":"movie","Poster":"https://images-na.ssl-images-amazon.com/images/M/MV5BZmU0M2Y1OGUtZjIxNi00ZjBkLTg1MjgtOWIyNThiZWIwYjRiXkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_SX300.jpg"},{"Title":"Back to the Future Part II","Year":"19890408 ","imdbID":"tt0096874","Type":"movie","Poster":"https://images-na.ssl-images-amazon.com/images/M/MV5BZTMxMGM5MjItNDJhNy00MWI2LWJlZWMtOWFhMjI5ZTQwMWM3XkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_SX300.jpg"},{"Title":"Back to the Future Part III","Year":"19901223","imdbID":"tt0099088","Type":"movie","Poster":"https://images-na.ssl-images-amazon.com/images/M/MV5BYjhlMGYxNmMtOWFmMi00Y2M2LWE5NWYtZTdlMDRlMGEzMDA3XkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_SX300.jpg"},{"Title":"Ivan Vasilievich: Back to the Future","Year":"19730101","imdbID":"tt0070233","Type":"movie","Poster":"http://ia.media-imdb.com/images/M/MV5BNDQ3NDM2NjM5MF5BMl5BanBnXkFtZTYwNTg1OTc5._V1_SX300.jpg"},{"Title":"Back to the Future... The Ride","Year":"19910320","imdbID":"tt0101392","Type":"movie","Poster":"https://images-na.ssl-images-amazon.com/images/M/MV5BMjM2OTc3NWQtODc0Mi00NDQxLTkwZDItY2U4ZTJjMDFiMzlmXkEyXkFqcGdeQXVyMzM4MjM0Nzg@._V1_SX300.jpg"},{"Title":"Back to the Future","Year":"19910408","imdbID":"tt0101042","Type":"series","Poster":"https://images-na.ssl-images-amazon.com/images/M/MV5BMTE5OTYzNjUzMV5BMl5BanBnXkFtZTcwNzczMzEzMQ@@._V1_SX300.jpg"},{"Title":"Back to the Future: The Game - Episode 1, It\'s About Time","Year":"20100108","imdbID":"tt1688659","Type":"game","Poster":"http://ia.media-imdb.com/images/M/MV5BYmJkM2U1NTktZDQ4Ny00YzllLWE3YzMtMGIwMTlkZjI4YTE2XkEyXkFqcGdeQXVyNTI2NTY2MDI@._V1_SX300.jpg"},{"Title":"Back to the Future: Making the Trilogy","Year":"20021108","imdbID":"tt0338228","Type":"movie","Poster":"N/A"},{"Title":"The Secrets of the Back to the Future Trilogy","Year":"19900908","imdbID":"tt0162636","Type":"movie","Poster":"http://ia.media-imdb.com/images/M/MV5BMTc5MTE3NTE3N15BMl5BanBnXkFtZTcwMzM4NTIyMQ@@._V1_SX300.jpg"},{"Title":"Back to the Future: The Game - Episode 5, Outatime","Year":"20110608","imdbID":"tt1841512","Type":"game","Poster":"http://ia.media-imdb.com/images/M/MV5BZDIyOGQ4NGQtMzViNi00YWYyLTljY2EtYmNhMGI5Y2UzMjUyXkEyXkFqcGdeQXVyNTI2NTY2MDI@._V1_SX300.jpg"}]}')},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("Y7HM");class y extends r.a{constructor(t,e=0,n=d){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new y(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(y.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new y(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.b("@firebase/app"),d=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return u}),"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}c(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return f.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var d=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.k)(d,a.serviceProps),r[h]=d,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,a.multipleInstances?t:[])}}try{for(var p=Object(o.h)(Object.keys(e)),y=p.next();!y.done;y=p.next())e[y.value]._addComponent(a)}catch(m){u={error:m}}finally{try{y&&!y.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(d);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.o)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.u)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),g.apply(void 0,t)};var v=p;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.13",void 0),t.registerVersion("fire-js","")}(v),e.a=v},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyCG334GLQAk1_dzSp98DpPzkLXOLiekoow",authDomain:"realcommerce-4c9bb.firebaseapp.com",projectId:"realcommerce-4c9bb",storageBucket:"realcommerce-4c9bb.appspot.com",messagingSenderId:"106253756909",appId:"1:106253756909:web:0a95b32278c7201787dfe4",measurementId:"G-9WG40DSRY5",databaseURL:"https://realcommerce-4c9bb-default-rtdb.firebaseio.com"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Kb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.bc)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.bc(a))},t.\u0275prov=Object(r.Kb)({factory:d,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function d(){return new h(Object(r.bc)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function y(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Kb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.bc)(a).location;return new _(Object(r.bc)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends g{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.bc(u),r.bc(b,8))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends g{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.bc(u),r.bc(b,8))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=y(S(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,S(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.bc(g),r.bc(u))},t.normalizeQueryParams=m,t.joinWithSlash=p,t.stripTrailingSlash=y,t.\u0275prov=Object(r.Kb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new E(Object(r.bc)(g),Object(r.bc)(u))}function S(t){return t.replace(/\/index.html$/,"")}const T=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),O=function(){var t={Format:0,Standalone:1};return t[t.Format]="Format",t[t.Standalone]="Standalone",t}(),I=function(){var t={Narrow:0,Abbreviated:1,Wide:2,Short:3};return t[t.Narrow]="Narrow",t[t.Abbreviated]="Abbreviated",t[t.Wide]="Wide",t[t.Short]="Short",t}(),x=function(){var t={Short:0,Medium:1,Long:2,Full:3};return t[t.Short]="Short",t[t.Medium]="Medium",t[t.Long]="Long",t[t.Full]="Full",t}(),A=function(){var t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return t[t.Decimal]="Decimal",t[t.Group]="Group",t[t.List]="List",t[t.PercentSign]="PercentSign",t[t.PlusSign]="PlusSign",t[t.MinusSign]="MinusSign",t[t.Exponential]="Exponential",t[t.SuperscriptingExponent]="SuperscriptingExponent",t[t.PerMille]="PerMille",t[t.Infinity]="Infinity",t[t.NaN]="NaN",t[t.TimeSeparator]="TimeSeparator",t[t.CurrencyDecimal]="CurrencyDecimal",t[t.CurrencyGroup]="CurrencyGroup",t}();function j(t,e){return M(Object(r.jb)(t)[r.Z.DateFormat],e)}function N(t,e){return M(Object(r.jb)(t)[r.Z.TimeFormat],e)}function k(t,e){return M(Object(r.jb)(t)[r.Z.DateTimeFormat],e)}function D(t,e){const n=Object(r.jb)(t),i=n[r.Z.NumberSymbols][e];if(void 0===i){if(e===A.CurrencyDecimal)return n[r.Z.NumberSymbols][A.Decimal];if(e===A.CurrencyGroup)return n[r.Z.NumberSymbols][A.Group]}return i}const P=r.mb;function R(t){if(!t[r.Z.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.Z.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function M(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function L(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const F=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,V={},U=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,q=function(){var t={Short:0,ShortGMT:1,Long:2,Extended:3};return t[t.Short]="Short",t[t.ShortGMT]="ShortGMT",t[t.Long]="Long",t[t.Extended]="Extended",t}(),H=function(){var t={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return t[t.FullYear]="FullYear",t[t.Month]="Month",t[t.Date]="Date",t[t.Hours]="Hours",t[t.Minutes]="Minutes",t[t.Seconds]="Seconds",t[t.FractionalSeconds]="FractionalSeconds",t[t.Day]="Day",t}(),z=function(){var t={DayPeriods:0,Days:1,Months:2,Eras:3};return t[t.DayPeriods]="DayPeriods",t[t.Days]="Days",t[t.Months]="Months",t[t.Eras]="Eras",t}();function B(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function G(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function W(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case H.FullYear:return e.getFullYear();case H.Month:return e.getMonth();case H.Date:return e.getDate();case H.Hours:return e.getHours();case H.Minutes:return e.getMinutes();case H.Seconds:return e.getSeconds();case H.FractionalSeconds:return e.getMilliseconds();case H.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===H.Hours)0===a&&-12===n&&(a=12);else if(t===H.FractionalSeconds)return u=e,G(a,3).substr(0,u);var u;const c=D(s,A.MinusSign);return G(a,e,c,r,i)}}function K(t,e,n=O.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case z.Months:return function(t,e,n){const i=Object(r.jb)(t),o=M([i[r.Z.MonthsFormat],i[r.Z.MonthsStandalone]],e);return M(o,n)}(e,o,i)[t.getMonth()];case z.Days:return function(t,e,n){const i=Object(r.jb)(t),o=M([i[r.Z.DaysFormat],i[r.Z.DaysStandalone]],e);return M(o,n)}(e,o,i)[t.getDay()];case z.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(s){const t=function(t){const e=Object(r.jb)(t);return R(e),(e[r.Z.ExtraData][2]||[]).map(t=>"string"==typeof t?L(t):[L(t[0]),L(t[1])])}(e),n=function(t,e,n){const i=Object(r.jb)(t);R(i);const o=M([i[r.Z.ExtraData][0],i[r.Z.ExtraData][1]],e)||[];return M(o,n)||[]}(e,o,i);let s;if(t.forEach((t,e)=>{if(Array.isArray(t)){const{hours:r,minutes:i}=t[0],{hours:o,minutes:c}=t[1];a>=r&&u>=i&&(a<o||a===o&&u<c)&&(s=n[e])}else{const{hours:r,minutes:i}=t;r===a&&i===u&&(s=n[e])}}),s)return s}return function(t,e,n){const i=Object(r.jb)(t),o=M([i[r.Z.DayPeriodsFormat],i[r.Z.DayPeriodsStandalone]],e);return M(o,n)}(e,o,i)[a<12?0:1];case z.Eras:return function(t,e){return M(Object(r.jb)(t)[r.Z.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(o,s,t,e,n,i)}}function $(t){return function(e,n,r){const i=-1*r,o=D(n,A.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case q.Short:return(i>=0?"+":"")+G(s,2,o)+G(Math.abs(i%60),2,o);case q.ShortGMT:return"GMT"+(i>=0?"+":"")+G(s,1,o);case q.Long:return"GMT"+(i>=0?"+":"")+G(s,2,o)+":"+G(Math.abs(i%60),2,o);case q.Extended:return 0===r?"Z":(i>=0?"+":"")+G(s,2,o)+":"+G(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function Q(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(n.getFullYear()),e=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(4-o.getDay()))).getTime()-t.getTime();i=1+Math.round(e/6048e5)}var o;return G(i,t,D(r,A.MinusSign))}}const Y={};function Z(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function J(t){return t instanceof Date&&!isNaN(t.valueOf())}class X{}let tt=(()=>{class t extends X{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(P(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.bc(r.u))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();function et(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class nt{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rt=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.U)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Qg){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new nt(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new it(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new it(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.O),r.Ob(r.K),r.Ob(r.s))},t.\u0275dir=r.Jb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class it{constructor(t,e){this.record=t,this.view=e}}let ot=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new st,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){at("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){at("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.O),r.Ob(r.K))},t.\u0275dir=r.Jb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class st{constructor(){this.$implicit=null,this.ngIf=null}}function at(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let ut=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,o){if(null==e||""===e||e!=e)return null;try{return function(t,e,n,i){let o=function(t){if(J(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(F))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,c),e}(n)}const e=new Date(t);if(!J(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const i=function(t){return Object(r.jb)(t)[r.Z.LocaleId]}(e);if(V[i]=V[i]||{},V[i][n])return V[i][n];let o="";switch(n){case"shortDate":o=j(e,x.Short);break;case"mediumDate":o=j(e,x.Medium);break;case"longDate":o=j(e,x.Long);break;case"fullDate":o=j(e,x.Full);break;case"shortTime":o=N(e,x.Short);break;case"mediumTime":o=N(e,x.Medium);break;case"longTime":o=N(e,x.Long);break;case"fullTime":o=N(e,x.Full);break;case"short":const n=t(e,"shortTime"),r=t(e,"shortDate");o=B(k(e,x.Short),[n,r]);break;case"medium":const i=t(e,"mediumTime"),s=t(e,"mediumDate");o=B(k(e,x.Medium),[i,s]);break;case"long":const a=t(e,"longTime"),u=t(e,"longDate");o=B(k(e,x.Long),[a,u]);break;case"full":const c=t(e,"fullTime"),l=t(e,"fullDate");o=B(k(e,x.Full),[c,l])}return o&&(V[i][n]=o),o}(n,e)||e;let s,a=[];for(;e;){if(s=U.exec(e),!s){a.push(e);break}{a=a.concat(s.slice(1));const t=a.pop();if(!t)break;e=t}}let u=o.getTimezoneOffset();i&&(u=Z(i,u),o=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Z(e,r)-r))}(o,i));let c="";return a.forEach(t=>{const e=function(t){if(Y[t])return Y[t];let e;switch(t){case"G":case"GG":case"GGG":e=K(z.Eras,I.Abbreviated);break;case"GGGG":e=K(z.Eras,I.Wide);break;case"GGGGG":e=K(z.Eras,I.Narrow);break;case"y":e=W(H.FullYear,1,0,!1,!0);break;case"yy":e=W(H.FullYear,2,0,!0,!0);break;case"yyy":e=W(H.FullYear,3,0,!1,!0);break;case"yyyy":e=W(H.FullYear,4,0,!1,!0);break;case"M":case"L":e=W(H.Month,1,1);break;case"MM":case"LL":e=W(H.Month,2,1);break;case"MMM":e=K(z.Months,I.Abbreviated);break;case"MMMM":e=K(z.Months,I.Wide);break;case"MMMMM":e=K(z.Months,I.Narrow);break;case"LLL":e=K(z.Months,I.Abbreviated,O.Standalone);break;case"LLLL":e=K(z.Months,I.Wide,O.Standalone);break;case"LLLLL":e=K(z.Months,I.Narrow,O.Standalone);break;case"w":e=Q(1);break;case"ww":e=Q(2);break;case"W":e=Q(1,!0);break;case"d":e=W(H.Date,1);break;case"dd":e=W(H.Date,2);break;case"E":case"EE":case"EEE":e=K(z.Days,I.Abbreviated);break;case"EEEE":e=K(z.Days,I.Wide);break;case"EEEEE":e=K(z.Days,I.Narrow);break;case"EEEEEE":e=K(z.Days,I.Short);break;case"a":case"aa":case"aaa":e=K(z.DayPeriods,I.Abbreviated);break;case"aaaa":e=K(z.DayPeriods,I.Wide);break;case"aaaaa":e=K(z.DayPeriods,I.Narrow);break;case"b":case"bb":case"bbb":e=K(z.DayPeriods,I.Abbreviated,O.Standalone,!0);break;case"bbbb":e=K(z.DayPeriods,I.Wide,O.Standalone,!0);break;case"bbbbb":e=K(z.DayPeriods,I.Narrow,O.Standalone,!0);break;case"B":case"BB":case"BBB":e=K(z.DayPeriods,I.Abbreviated,O.Format,!0);break;case"BBBB":e=K(z.DayPeriods,I.Wide,O.Format,!0);break;case"BBBBB":e=K(z.DayPeriods,I.Narrow,O.Format,!0);break;case"h":e=W(H.Hours,1,-12);break;case"hh":e=W(H.Hours,2,-12);break;case"H":e=W(H.Hours,1);break;case"HH":e=W(H.Hours,2);break;case"m":e=W(H.Minutes,1);break;case"mm":e=W(H.Minutes,2);break;case"s":e=W(H.Seconds,1);break;case"ss":e=W(H.Seconds,2);break;case"S":e=W(H.FractionalSeconds,1);break;case"SS":e=W(H.FractionalSeconds,2);break;case"SSS":e=W(H.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=$(q.Short);break;case"ZZZZZ":e=$(q.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=$(q.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=$(q.Long);break;default:return null}return Y[t]=e,e}(t);c+=e?e(o,n,u):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}(e,n,o||this.locale,i)}catch(s){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.vb)(t)}'`)}(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.u))},t.\u0275pipe=r.Nb({name:"date",type:t,pure:!0}),t})(),ct=(()=>{class t{constructor(t){this.differs=t,this.keyValues=[]}transform(t,e=lt){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const n=this.differ.diff(t);return n&&(this.keyValues=[],n.forEachItem(t=>{this.keyValues.push({key:t.key,value:t.currentValue})}),this.keyValues.sort(e)),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.t))},t.\u0275pipe=r.Nb({name:"keyvalue",type:t,pure:!1}),t})();function lt(t,e){const n=t.key,r=e.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const i=String(n),o=String(r);return i==o?0:i<o?-1:1}let ht=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[{provide:X,useClass:tt}]}),t})(),ft=(()=>{class t{}return t.\u0275prov=Object(r.Kb)({token:t,providedIn:"root",factory:()=>new dt(Object(r.bc)(a),window,Object(r.bc)(r.m))}),t})();class dt{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(db){this.errorHandler.handleError(db)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(Qg){return!1}}}class pt extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new pt,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=mt||(mt=document.querySelector("base"),mt)?mt.getAttribute("href"):null;return null==e?null:(n=e,yt||(yt=document.createElement("a")),yt.setAttribute("href",n),"/"===yt.pathname.charAt(0)?yt.pathname:"/"+yt.pathname);var n}resetBaseElement(){mt=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return et(document.cookie,t)}}let yt,mt=null;const gt=new r.q("TRANSITION_ID"),vt=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[gt,a,r.r],multi:!0}];class bt{static init(){Object(r.W)(new bt)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const _t=new r.q("EventManagerPlugins");let wt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.bc(_t),r.bc(r.z))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();class Et{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Ct=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),St=(()=>{class t extends Ct{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.bc(a))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();const Tt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ot=/%COMP%/g;function It(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?It(t,i,n):(i=i.replace(Ot,t),n.push(i))}return n}function xt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let At=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new jt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.P.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Nt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.P.Native:case r.P.ShadowDom:return new kt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=It(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.bc(wt),r.bc(St),r.bc(r.c))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();class jt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Tt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Tt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Tt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.F.DashCase?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,xt(n)):this.eventManager.addEventListener(t,e,xt(n))}}class Nt extends jt{constructor(t,e,n,r){super(t),this.component=n;const i=It(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Ot,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Ot,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class kt extends jt{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.P.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=It(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Dt=(()=>{class t extends Et{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.bc(a))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();const Pt=["alt","control","meta","shift"],Rt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Lt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ft=(()=>{class t extends Et{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Pt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Mt.hasOwnProperty(e)&&(e=Mt[e]))}return Rt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Pt.forEach(r=>{r!=n&&(0,Lt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.bc(a))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),Vt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Kb)({factory:function(){return Object(r.bc)(Ut)},token:t,providedIn:"root"}),t})(),Ut=(()=>{class t extends Vt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.H.NONE:return e;case r.H.HTML:return Object(r.db)(e,"HTML")?Object(r.wb)(e):Object(r.ab)(this._doc,String(e));case r.H.STYLE:return Object(r.db)(e,"Style")?Object(r.wb)(e):Object(r.bb)(e);case r.H.SCRIPT:if(Object(r.db)(e,"Script"))return Object(r.wb)(e);throw new Error("unsafe value used in a script context");case r.H.URL:return Object(r.nb)(e),Object(r.db)(e,"URL")?Object(r.wb)(e):Object(r.cb)(String(e));case r.H.RESOURCE_URL:if(Object(r.db)(e,"ResourceURL"))return Object(r.wb)(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(r.eb)(t)}bypassSecurityTrustStyle(t){return Object(r.hb)(t)}bypassSecurityTrustScript(t){return Object(r.gb)(t)}bypassSecurityTrustUrl(t){return Object(r.ib)(t)}bypassSecurityTrustResourceUrl(t){return Object(r.fb)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.bc(a))},t.\u0275prov=Object(r.Kb)({factory:function(){return t=Object(r.bc)(r.o),new Ut(t.get(a));var t},token:t,providedIn:"root"}),t})();const qt=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){pt.makeCurrent(),bt.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],Ht=Object(r.R)(r.V,"browser",qt),zt=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:_t,useClass:Dt,multi:!0,deps:[a,r.z,r.B]},{provide:_t,useClass:Ft,multi:!0,deps:[a]},[],{provide:At,useClass:At,deps:[wt,St,r.c]},{provide:r.E,useExisting:At},{provide:Ct,useExisting:St},{provide:St,useClass:St,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:wt,useClass:wt,deps:[_t,r.z]},[]];let Bt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:gt,useExisting:r.c},vt]}}}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)(r.bc(t,12))},providers:zt,imports:[ht,r.f]}),t})();"undefined"!=typeof window&&window;class Gt{}function Wt(t,e){return{type:7,name:t,definitions:e,options:{}}}function Kt(t,e=null){return{type:4,styles:e,timings:t}}function $t(t,e=null){return{type:2,steps:t,options:e}}function Qt(t){return{type:6,styles:t,offset:null}}function Yt(t,e,n){return{type:0,name:t,styles:e,options:n}}function Zt(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Jt(t){Promise.resolve(null).then(t)}class Xt{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Jt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class te{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Jt(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function ee(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ne(t){switch(t.length){case 0:return new Xt;case 1:return t[0];default:return new te(t)}}function re(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function ie(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&oe(n,"start",t)));break;case"done":t.onDone(()=>r(n&&oe(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&oe(n,"destroy",t)))}}function oe(t,e,n){const r=n.totalTime,i=se(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function se(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function ae(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function ue(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let ce=(t,e)=>!1,le=(t,e)=>!1,he=(t,e,n)=>[];const fe=ee();(fe||"undefined"!=typeof Element)&&(ce=(t,e)=>t.contains(e),le=(()=>{if(fe||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):le}})(),he=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let de=null,pe=!1;function ye(t){de||(de=("undefined"!=typeof document?document.body:null)||{},pe=!!de.style&&"WebkitAppearance"in de.style);let e=!0;return de.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in de.style,!e&&pe)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in de.style),e}const me=le,ge=ce,ve=he;function be(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let _e=(()=>{class t{validateStyleProperty(t){return ye(t)}matchesElement(t,e){return me(t,e)}containsElement(t,e){return ge(t,e)}query(t,e,n){return ve(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new Xt(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),we=(()=>{class t{}return t.NOOP=new _e,t})();function Ee(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ce(parseFloat(e[1]),e[2])}function Ce(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Se(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Ce(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Ce(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function Te(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Oe(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Te(t,n);return n}function Ie(t,e,n){return n?e+":"+n+";":""}function xe(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Ie(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Ie(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Ae(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Le(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),ee()&&xe(t))}function je(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Le(e);t.style[n]=""}),ee()&&xe(t))}function Ne(t){return Array.isArray(t)?1==t.length?t[0]:$t(t):t}const ke=new RegExp("{{\\s*(.+?)\\s*}}","g");function De(t){let e=[];if("string"==typeof t){let n;for(;n=ke.exec(t);)e.push(n[1]);ke.lastIndex=0}return e}function Pe(t,e,n){const r=t.toString(),i=r.replace(ke,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function Re(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Me=/-+([a-z0-9])/g;function Le(t){return t.replace(Me,(...t)=>t[1].toUpperCase())}function Fe(t,e){return 0===t||0===e}function Ve(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach((function(e){n[e]=qe(t,e)}))}}return e}function Ue(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function qe(t,e){return window.getComputedStyle(t)[e]}function He(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(Ge(i,s)),"<"!=o[0]||"*"==i&&"*"==s||e.push(Ge(s,i))}(t,n,e)):n.push(t),n}const ze=new Set(["true","1"]),Be=new Set(["false","0"]);function Ge(t,e){const n=ze.has(t)||Be.has(t),r=ze.has(e)||Be.has(e);return(i,o)=>{let s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?ze.has(t):Be.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?ze.has(e):Be.has(e)),s&&a}}const We=new RegExp("s*:selfs*,?","g");function Ke(t,e,n){return new $e(t).build(e,n)}class $e{constructor(t){this._driver=t}build(t,e){const n=new Qe(e);return this._resetContextStyleTimingState(n),Ue(this,Ne(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(Ye(t)){const e=t;Object.keys(e).forEach(t=>{De(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Re(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Ue(this,Ne(t.animation),e);return{type:1,matchers:He(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Ze(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Ue(this,t,e)),options:Ze(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Ue(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:Ze(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Je(Se(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Je(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Se(r,e),Je(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Qt({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=Qt(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(Ye(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=De(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Ye(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Ye(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=f+d.delay+s,d.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Ue(this,Ne(t.animation),e),options:Ze(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ze(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ze(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(We,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,ae(e.collectedStyles,e.currentQuerySelector,{});const s=Ue(this,Ne(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:Ze(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Se(t.timings,e.errors,!0);return{type:12,animation:Ue(this,Ne(t.animation),e),timings:n,options:null}}}class Qe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ye(t){return!Array.isArray(t)&&"object"==typeof t}function Ze(t){var e;return t?(t=Te(t)).params&&(t.params=(e=t.params)?Te(e):null):t={},t}function Je(t,e,n){return{duration:t,delay:e,easing:n}}function Xe(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class tn{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const en=new RegExp(":enter","g"),nn=new RegExp(":leave","g");function rn(t,e,n,r,i,o={},s={},a,u,c=[]){return(new on).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class on{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new tn;const l=new an(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),Ue(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Xe(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Ee(n.duration):null,o=null!=n.delay?Ee(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Ue(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=sn);const t=Ee(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Ue(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Ee(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),Ue(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Se(e.params?Pe(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Ee(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=sn);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),Ue(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;Ue(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const sn={};class an{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new un(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Ee(n.duration)),null!=n.delay&&(r.delay=Ee(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Pe(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new an(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=sn,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new cn(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(en,"."+this._enterClassName)).replace(nn,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class un{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new un(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):Oe(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=Pe(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=Oe(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?Re(t.values()):[],o=e.size?Re(e.values()):[];if(n){const t=r[0],e=Te(t);t.offset=0,e.offset=1,r=[t,e]}return Xe(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class cn extends un{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=Oe(t[0],!1);a.offset=0,i.push(a);const u=Oe(t[0],!1);u.offset=ln(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=Oe(t[r],!1);s.offset=ln((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return Xe(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function ln(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class hn{}class fn extends hn{normalizePropertyName(t,e){return Le(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(dn[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const dn=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function pn(t,e,n,r,i,o,s,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const yn={};class mn{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||yn,f=this.buildStyles(n,s&&s.params||yn,l),d=a&&a.params||yn,p=this.buildStyles(r,d,l),y=new Set,m=new Map,g=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),d)},_=c?[]:rn(t,e,this.ast.animation,i,o,f,p,b,u,l);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return pn(e,this._triggerName,n,r,v,f,p,[],[],m,g,w,l);_.forEach(t=>{const n=t.element,r=ae(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=ae(g,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&y.add(n)});const E=Re(y.values());return pn(e,this._triggerName,n,r,v,f,p,_,E,m,g,w)}}class gn{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Te(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=Pe(o,r,e)),n[t]=o})}}),n}}class vn{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new gn(t.style,t.options&&t.options.params||{})}),bn(this.states,"true","1"),bn(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new mn(t,e,this.states))}),this.fallbackTransition=new mn(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function bn(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const _n=new tn;class wn{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=Ke(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=re(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=rn(this._driver,e,i,"ng-enter","ng-leave",{},{},n,_n,r),o.forEach(t=>{const e=ae(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=ne(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=se(e,"","","");return ie(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const En=[],Cn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Sn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Tn{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Te(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const On=new Tn("void");class In{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Pn(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=ae(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=ae(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Pn(t,"ng-trigger"),Pn(t,"ng-trigger-"+e),a[e]=On),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new An(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Pn(t,"ng-trigger"),Pn(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new Tn(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=On),"void"!==u.value&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{je(t,n),Ae(t,r)})}return}const c=ae(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(Pn(t,"ng-animate-queued"),o.onStart(()=>{Rn(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&ne(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||On,s=new Tn("void"),a=new An(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Cn||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Pn(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=se(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,ie(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class xn{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new In(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(jn(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!jn(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Pn(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Rn(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(jn(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return jn(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ne(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Cn,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Pn(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?ne(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new tn,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=Dn(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n="ng-enter"+p++;d.set(e,n),t.forEach(t=>Pn(t,n))});const y=[],m=new Set,g=new Set;for(let j=0;j<this.collectedLeaveElements.length;j++){const t=this.collectedLeaveElements[j],e=t.__ng_removed;e&&e.setForRemoval&&(y.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):g.add(t))}const v=new Map,b=Dn(h,Array.from(m));b.forEach((t,e)=>{const n="ng-leave"+p++;v.set(e,n),t.forEach(t=>Pn(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>Rn(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Rn(t,n))}),y.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let j=this._namespaceList.length-1;j>=0;j--)this._namespaceList[j].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>je(i,p.fromStyles)),e.onDestroy(()=>Ae(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>je(i,p.fromStyles)),e.onDestroy(()=>Ae(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>ae(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{ae(E,e,[]).push(t),t.destroy()})});const S=y.filter(t=>Ln(t,a,u)),T=new Map;kn(T,this.driver,g,u,"*").forEach(t=>{Ln(t,a,u)&&S.push(t)});const O=new Map;f.forEach((t,e)=>{kn(O,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=T.get(t),n=O.get(t);T.set(t,Object.assign(Object.assign({},e),n))});const I=[],x=[],A={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>Ae(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=A;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,E,i,O,T);if(o.setRealPlayer(n),t===A)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=ne(e)),r.push(o)}}else je(e,s.fromStyles),o.onDestroy(()=>Ae(e,s.toStyles)),x.push(o),c.has(e)&&r.push(o)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=ne(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let j=0;j<y.length;j++){const t=y[j],e=t.__ng_removed;if(Rn(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Mn(this,t,r):this.processLeaveNode(t)}return y.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=ae(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}je(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new Xt(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof te?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||En).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),y=i.get(h),m=o.get(h),g=re(0,this._normalizer,0,e.keyframes,y,m),v=this._buildPlayer(e,g,p);if(e.subTimeline&&r&&l.add(h),d){const e=new An(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{ae(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Pn(t,"ng-animating"));const f=ne(h);return f.onDestroy(()=>{c.forEach(t=>Rn(t,"ng-animating")),Ae(a,e.toStyles)}),l.forEach(t=>{ae(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Xt(t.duration,t.delay)}}class An{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Xt,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>ie(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ae(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function jn(t){return t&&1===t.nodeType}function Nn(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function kn(t,e,n,r,i){const o=[];n.forEach(t=>o.push(Nn(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Sn,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>Nn(t,o[a++])),s}function Dn(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=i.get(e);if(o)return o;const s=e.parentNode;return o=n.has(s)?s:r.has(s)?1:t(s),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}function Pn(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Rn(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Mn(t,e,n){ne(n).onDone(()=>t.processLeaveNode(e))}function Ln(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Fn{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new xn(t,e,n),this._timelineEngine=new wn(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=Ke(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new vn(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=ue(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=ue(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Vn(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=qn(e[0]),e.length>1&&(r=qn(e[e.length-1]))):e&&(n=qn(e)),n||r?new Un(t,n,r):null}let Un=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Ae(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ae(this._element,this._initialStyles),this._endStyles&&(Ae(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(je(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(je(this._element,this._endStyles),this._endStyles=null),Ae(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function qn(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];Hn(i)&&(e=e||{},e[i]=t[i])}return e}function Hn(t){return"display"===t||"position"===t}class zn{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Qn(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),$n(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Kn(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Bn(this._element,this._name,"paused")}resume(){Bn(this._element,this._name,"running")}setPosition(t){const e=Gn(this._element,this._name);this._position=t*this._duration,$n(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Kn(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Qn(t,"").split(","),r=Wn(n,e);r>=0&&(n.splice(r,1),$n(t,"",n.join(",")))}(this._element,this._name))}}function Bn(t,e,n){$n(t,"PlayState",n,Gn(t,e))}function Gn(t,e){const n=Qn(t,"");return n.indexOf(",")>0?Wn(n.split(","),e):Wn([n],e)}function Wn(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Kn(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function $n(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function Qn(t,e){return t.style["animation"+e]}class Yn{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new zn(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:qe(this.element,n))})}this.currentSnapshot=t}}class Zn extends Xt{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=be(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Jn{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return ye(t)}matchesElement(t,e){return me(t,e)}containsElement(t,e){return ge(t,e)}query(t,e,n){return ve(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>be(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const o=document.createElement("style");return o.innerHTML=r,o}animate(t,e,n,r,i,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(t=>t instanceof Yn),u={};Fe(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Ve(t,e,u));if(0==n)return new Zn(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);document.querySelector("head").appendChild(h);const f=Vn(t,e),d=new Yn(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class Xn{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:qe(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class tr{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(er().toString()),this._cssKeyframesDriver=new Jn}validateStyleProperty(t){return ye(t)}matchesElement(t,e){return me(t,e)}containsElement(t,e){return ge(t,e)}query(t,e,n){return ve(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof Xn);Fe(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=Vn(t,e=Ve(t,e=e.map(t=>Oe(t,!1)),u));return new Xn(t,e,a,l)}}function er(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let nr=(()=>{class t extends Gt{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.P.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?$t(t):t;return or(this._renderer,null,e,"register",[n]),new rr(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.bc(r.E),r.bc(a))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();class rr extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ir(this._id,t,e||{},this._renderer)}}class ir{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return or(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function or(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let sr=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new ar("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new ur(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.bc(r.E),r.bc(Fn),r.bc(r.z))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();class ar{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class ur extends ar{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let cr=(()=>{class t extends Fn{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.bc(a),r.bc(we),r.bc(hn))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();const lr=[{provide:we,useFactory:function(){return"function"==typeof er()?new tr:new Jn}},{provide:new r.q("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:Gt,useClass:nr},{provide:hn,useFactory:function(){return new fn}},{provide:Fn,useClass:cr},{provide:r.E,useFactory:function(t,e,n){return new sr(t,e,n)},deps:[At,Fn,r.z]}];let hr=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:lr,imports:[Bt]}),t})();var fr=n("XNiG");const dr=["toast-component",""];function pr(t,e){if(1&t){const t=r.Ub();r.Tb(0,"button",5),r.fc("click",(function(){return r.vc(t),r.hc().remove()})),r.Tb(1,"span",6),r.Ec(2,"\xd7"),r.Sb(),r.Sb()}}function yr(t,e){if(1&t&&(r.Rb(0),r.Ec(1),r.Qb()),2&t){const t=r.hc(2);r.Ab(1),r.Gc("[",t.duplicatesCount+1,"]")}}function mr(t,e){if(1&t&&(r.Tb(0,"div"),r.Ec(1),r.Cc(2,yr,2,1,"ng-container",4),r.Sb()),2&t){const t=r.hc();r.Cb(t.options.titleClass),r.Bb("aria-label",t.title),r.Ab(1),r.Gc(" ",t.title," "),r.Ab(1),r.nc("ngIf",t.duplicatesCount)}}function gr(t,e){if(1&t&&r.Pb(0,"div",7),2&t){const t=r.hc();r.Cb(t.options.messageClass),r.nc("innerHTML",t.message,r.wc)}}function vr(t,e){if(1&t&&(r.Tb(0,"div",8),r.Ec(1),r.Sb()),2&t){const t=r.hc();r.Cb(t.options.messageClass),r.Bb("aria-label",t.message),r.Ab(1),r.Gc(" ",t.message," ")}}function br(t,e){if(1&t&&(r.Tb(0,"div"),r.Pb(1,"div",9),r.Sb()),2&t){const t=r.hc();r.Ab(1),r.Bc("width",t.width+"%")}}class _r{constructor(t,e,n,r,i,o){this.toastId=t,this.config=e,this.message=n,this.title=r,this.toastType=i,this.toastRef=o,this._onTap=new fr.a,this._onAction=new fr.a,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const wr={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Er=new r.q("ToastConfig");class Cr{constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Sr extends class{attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}{constructor(t,e,n){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=n}attachComponentPortal(t,e){const n=this._componentFactoryResolver.resolveComponentFactory(t.component);let r;return r=n.create(t.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Tr=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return t.\u0275fac=function(e){return new(e||t)(r.bc(a))},t.\u0275prov=Object(r.Kb)({factory:function(){return new t(Object(r.bc)(a))},token:t,providedIn:"root"}),t})();class Or{constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let Ir=(()=>{class t{constructor(t,e,n,r){this._overlayContainer=t,this._componentFactoryResolver=e,this._appRef=n,this._document=r,this._paneElements=new Map}create(t,e){return this._createOverlayRef(this.getPaneElement(t,e))}getPaneElement(t="",e){return this._paneElements.get(e)||this._paneElements.set(e,{}),this._paneElements.get(e)[t]||(this._paneElements.get(e)[t]=this._createPaneElement(t,e)),this._paneElements.get(e)[t]}_createPaneElement(t,e){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(t),n.classList.add("toast-container"),e?e.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(t){return new Sr(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new Or(this._createPortalHost(t))}}return t.\u0275fac=function(e){return new(e||t)(r.bc(Tr),r.bc(r.j),r.bc(r.g),r.bc(a))},t.\u0275prov=Object(r.Kb)({factory:function(){return new t(Object(r.bc)(Tr),Object(r.bc)(r.j),Object(r.bc)(r.g),Object(r.bc)(a))},token:t,providedIn:"root"}),t})();class xr{constructor(t){this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new fr.a,this._activate=new fr.a,this._manualClose=new fr.a,this._resetTimeout=new fr.a,this._countDuplicate=new fr.a}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class Ar{constructor(t,e){this._toastPackage=t,this._parentInjector=e}get(t,e,n){return t===_r?this._toastPackage:this._parentInjector.get(t,e,n)}}let jr=(()=>{class t{constructor(t,e,n,r,i){this.overlay=e,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,e,n={},r=""){return this._preBuildNotification(r,t,e,this.applyConfig(n))}success(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,e,this.applyConfig(n))}error(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,e,this.applyConfig(n))}info(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,e,this.applyConfig(n))}warning(t,e,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,e,this.applyConfig(n))}clear(t){for(const e of this.toasts)if(void 0!==t){if(e.toastId===t)return void e.toastRef.manualClose()}else e.toastRef.manualClose()}remove(t){const e=this._findToast(t);if(!e)return!1;if(e.activeToast.toastRef.close(),this.toasts.splice(e.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const t=this.toasts[this.currentlyActive].toastRef;t.isInactive()||(this.currentlyActive=this.currentlyActive+1,t.activate())}return!0}findDuplicate(t="",e="",n,r){const{includeTitleDuplicates:i}=this.toastrConfig;for(const o of this.toasts){const s=i&&o.title===t;if((!i||s)&&o.message===e)return o.toastRef.onDuplicate(n,r),o}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let e=0;e<this.toasts.length;e++)if(this.toasts[e].toastId===t)return{index:e,activeToast:this.toasts[e]};return null}_preBuildNotification(t,e,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,e,n,r)):this._buildNotification(t,e,n,r)}_buildNotification(t,e,n,i){if(!i.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(n,e,this.toastrConfig.resetTimeoutOnDuplicate&&i.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||e)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=e;let s=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(s=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const a=this.overlay.create(i.positionClass,this.overlayContainer);this.index=this.index+1;let u=e;e&&i.enableHtml&&(u=this.sanitizer.sanitize(r.H.HTML,e));const c=new xr(a),l=new _r(this.index,i,u,n,t,c),h=new Ar(l,this._injector),f=new Cr(i.toastComponent,h),d=a.attach(f,this.toastrConfig.newestOnTop);c.componentInstance=d.instance;const p={toastId:this.index,title:n||"",message:e||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:l.onTap(),onAction:l.onAction(),portal:d};return s||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{p.toastRef.activate()})),this.toasts.push(p),p}}return t.\u0275fac=function(e){return new(e||t)(r.bc(Er),r.bc(Ir),r.bc(r.r),r.bc(Vt),r.bc(r.z))},t.\u0275prov=Object(r.Kb)({factory:function(){return new t(Object(r.bc)(Er),Object(r.bc)(Ir),Object(r.bc)(r.o),Object(r.bc)(Vt),Object(r.bc)(r.z))},token:t,providedIn:"root"}),t})(),Nr=(()=>{class t{constructor(t,e,n){this.toastrService=t,this.toastPackage=e,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=e.message,this.title=e.title,this.options=e.config,this.originalTimeout=e.config.timeOut,this.toastClasses=`${e.toastType} ${e.config.toastClass}`,this.sub=e.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=e.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=e.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=e.toastRef.countDuplicate().subscribe(t=>{this.duplicatesCount=t})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state.value&&(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),e)):this.timeout=setTimeout(()=>t(),e)}outsideInterval(t,e){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),e)):this.intervalId=setInterval(()=>t(),e)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(jr),r.Ob(_r),r.Ob(r.z))},t.\u0275cmp=r.Ib({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,e){1&t&&r.fc("click",(function(){return e.tapToast()}))("mouseenter",(function(){return e.stickAround()}))("mouseleave",(function(){return e.delayedHideToast()})),2&t&&(r.Ic("@flyInOut",e.state),r.Cb(e.toastClasses),r.Bc("display",e.displayStyle))},attrs:dr,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,e){1&t&&(r.Cc(0,pr,3,0,"button",0),r.Cc(1,mr,3,5,"div",1),r.Cc(2,gr,1,3,"div",2),r.Cc(3,vr,2,4,"div",3),r.Cc(4,br,2,2,"div",4)),2&t&&(r.nc("ngIf",e.options.closeButton),r.Ab(1),r.nc("ngIf",e.title),r.Ab(1),r.nc("ngIf",e.message&&e.options.enableHtml),r.Ab(1),r.nc("ngIf",e.message&&!e.options.enableHtml),r.Ab(1),r.nc("ngIf",e.options.progressBar))},directives:[ot],encapsulation:2,data:{animation:[Wt("flyInOut",[Yt("inactive",Qt({opacity:0})),Yt("active",Qt({opacity:1})),Yt("removed",Qt({opacity:0})),Zt("inactive => active",Kt("{{ easeTime }}ms {{ easing }}")),Zt("active => removed",Kt("{{ easeTime }}ms {{ easing }}"))])]}}),t})();const kr=Object.assign(Object.assign({},wr),{toastComponent:Nr});let Dr=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:Er,useValue:{default:kr,config:e}}]}}}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})();var Pr=n("spgP"),Rr=n("D0XW"),Mr=n("HDdC"),Lr=n("LRne"),Fr=n("VRyK"),Vr=n("lJxs"),Ur=n("w1tV"),qr=n("l7GE"),Hr=n("51Dv"),zr=n("ZUHj"),Br=n("Cfvw");function Gr(t,e){return"function"==typeof e?n=>n.pipe(Gr((n,r)=>Object(Br.a)(t(n,r)).pipe(Object(Vr.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Wr(t))}class Wr{constructor(t){this.project=t}call(t,e){return e.subscribe(new Kr(t,this.project))}}class Kr extends qr.a{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new Hr.a(this,e,n),o=this.destination;o.add(i),this.innerSubscription=Object(zr.a)(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}var $r=n("7o/Q");function Qr(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Yr(t,e,n))}}class Yr{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Zr(t,this.accumulator,this.seed,this.hasSeed))}}class Zr extends $r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Jr(t,e){return n=>n.lift(new Xr(t,e))}class Xr{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new ti(t,this.compare,this.keySelector))}}class ti extends $r.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function ei(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new ni(t,n))}}class ni{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new ri(t,this.observables,this.project))}}class ri extends qr.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(Object(zr.a)(this,t,t,i))}}notifyNext(t,e,n,r,i){this.values[n]=e;const o=this.toRespond;if(o.length>0){const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class ii{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new oi(t,this.predicate))}}class oi extends $r.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n("6Uf2");var si=n("pxpQ"),ai=(n("qgXg"),n("quSY")),ui=n("9ppp");n("Ylt2");const ci=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function li(t,e){return function(n){return n.lift(new hi(t,e))}}class hi{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new fi(t,this.predicate,this.thisArg))}}class fi extends $r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const di=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var pi=n("EY2u");function yi(t){return e=>0===t?Object(pi.b)():e.lift(new mi(t))}class mi{constructor(t){if(this.total=t,this.total<0)throw new di}call(t,e){return e.subscribe(new gi(t,this.total))}}class gi extends $r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function vi(t=null){return e=>e.lift(new bi(t))}class bi{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new _i(t,this.defaultValue))}}class _i extends $r.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function wi(t=Si){return e=>e.lift(new Ei(t))}class Ei{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Ci(t,this.errorFactory))}}class Ci extends $r.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(db){t=db}this.destination.error(t)}}}function Si(){return new ci}var Ti=n("SpAZ");function Oi(t,e){const n=arguments.length>=2;return r=>r.pipe(t?li((e,n)=>t(e,n,r)):Ti.a,yi(1),n?vi(e):wi(()=>new ci))}n("tf+s");const Ii=new r.q("angularfire2.auth.use-emulator");var xi=n("Jgta");function Ai(t){return null==t}function ji(t){return"function"==typeof t.set}function Ni(t,e){return ji(e)?e:t.ref(e)}function ki(t,e){if("string"==typeof t)return e.stringCase();if(ji(t))return e.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Di(t,e,n="on",r=Rr.a){return new Mr.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Vr.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Ur.a)())}function Pi(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Ri(t,e){const{payload:n,prevKey:r,key:i}=e,o=Pi(t,i),s=function(t,e){if(Ai(e))return 0;{const n=Pi(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Mi(t){return(Ai(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Li(t,e,n){return function(t,e,n){return Di(t,"value","once",n).pipe(Gr(r=>{const i=[Object(Lr.a)(r)];return e.forEach(e=>i.push(Di(t,e,"on",n))),Object(Fr.a)(...i).pipe(Qr(Ri,[]))}),Jr())}(t,e=Mi(e),n)}function Fi(t,e,n){const r=(e=Mi(e)).map(e=>Di(t,e,"on",n));return Object(Fr.a)(...r)}function Vi(t,e){return function(n,r){return ki(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Ui(t,e){return function(){return Di(t,"value","on",e)}}const qi=new r.q("angularfire2.realtimeDatabaseURL"),Hi=new r.q("angularfire2.database.use-emulator");let zi=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Pr.d(i),this.keepUnstableUntilFirst=Object(Pr.h)(this.schedulers);const a=o,u=Object(Pr.g)(t,i,e);!xi.a.auth&&s&&Object(Pr.j)(),this.database=Object(Pr.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Ni(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Vi(r,"update"),set:Vi(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?ki(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Li(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Fi(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Di(t,"value","on",e).pipe(Object(Vr.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(ei(e),Object(Vr.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new ii(r))),Object(Vr.a)(t=>t.actions));var r}(t,Fi(t,e).pipe(Qr((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Li(t,r,n).pipe(Object(Vr.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Ni(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Ui(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Ui(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Vr.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.bc(Pr.c),r.bc(Pr.b,8),r.bc(qi,8),r.bc(r.B),r.bc(r.z),r.bc(Hi,8),r.bc(Ii,8))},t.\u0275prov=Object(r.Kb)({factory:function(){return new t(Object(r.bc)(Pr.c),Object(r.bc)(Pr.b,8),Object(r.bc)(qi,8),Object(r.bc)(r.B),Object(r.bc)(r.z),Object(r.bc)(Hi,8),Object(r.bc)(Ii,8))},token:t,providedIn:"any"}),t})(),Bi=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[zi]}),t})();var Gi=n("bHdf");function Wi(){return Object(Gi.a)(1)}function Ki(...t){return Wi()(Object(Lr.a)(...t))}var $i=n("z+Ro");function Qi(...t){const e=t[t.length-1];return Object($i.a)(e)?(t.pop(),n=>Ki(t,n,e)):e=>Ki(t,e)}function Yi(){return t=>t.lift(new Zi)}class Zi{call(t,e){return e.subscribe(new Ji(t))}}class Ji extends $r.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Xi=n("zIRd"),to=n("q/0M"),eo=n("qOnz"),no=function(t,e){return(no=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ro(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var io,oo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},so=so||{},ao=oo||self;function uo(){}function co(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function lo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ho="closure_uid_"+(1e9*Math.random()>>>0),fo=0;function po(t,e,n){return t.call.apply(t.bind,arguments)}function yo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function mo(t,e,n){return(mo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?po:yo).apply(null,arguments)}function go(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function vo(){return Date.now()}function bo(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function _o(){this.j=this.j,this.i=this.i}_o.prototype.j=!1,_o.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,ho)&&t[ho]||(t[ho]=++fo)}(this)},_o.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var wo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Eo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Co(t){return Array.prototype.concat.apply([],arguments)}function So(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function To(t){return/^[\s\xa0]*$/.test(t)}var Oo,Io=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function xo(t,e){return-1!=t.indexOf(e)}function Ao(t,e){return t<e?-1:t>e?1:0}t:{var jo=ao.navigator;if(jo){var No=jo.userAgent;if(No){Oo=No;break t}}Oo=""}function ko(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Do(t){var e={};for(var n in t)e[n]=t[n];return e}var Po="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ro(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Po.length;o++)n=Po[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Mo(t){return Mo[" "](t),t}Mo[" "]=uo;var Lo,Fo,Vo=xo(Oo,"Opera"),Uo=xo(Oo,"Trident")||xo(Oo,"MSIE"),qo=xo(Oo,"Edge"),Ho=qo||Uo,zo=xo(Oo,"Gecko")&&!(xo(Oo.toLowerCase(),"webkit")&&!xo(Oo,"Edge"))&&!(xo(Oo,"Trident")||xo(Oo,"MSIE"))&&!xo(Oo,"Edge"),Bo=xo(Oo.toLowerCase(),"webkit")&&!xo(Oo,"Edge");function Go(){var t=ao.document;return t?t.documentMode:void 0}t:{var Wo="",Ko=(Fo=Oo,zo?/rv:([^\);]+)(\)|;)/.exec(Fo):qo?/Edge\/([\d\.]+)/.exec(Fo):Uo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Fo):Bo?/WebKit\/(\S+)/.exec(Fo):Vo?/(?:Version)[ \/]?(\S+)/.exec(Fo):void 0);if(Ko&&(Wo=Ko?Ko[1]:""),Uo){var $o=Go();if(null!=$o&&$o>parseFloat(Wo)){Lo=String($o);break t}}Lo=Wo}var Qo={};function Yo(t){return function(t,e){var n=Qo;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Io(String(Lo)).split("."),r=Io(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Ao(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Ao(0==s[2].length,0==a[2].length)||Ao(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var Zo=ao.document&&Uo&&(Go()||parseInt(Lo,10))||void 0,Jo=!Uo||9<=Number(Zo),Xo=Uo&&!Yo("9"),ts=function(){if(!ao.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ao.addEventListener("test",uo,e),ao.removeEventListener("test",uo,e)}catch(n){}return t}();function es(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ns(t,e){if(es.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(zo){t:{try{Mo(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:rs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}es.prototype.b=function(){this.defaultPrevented=!0},bo(ns,es);var rs={2:"touch",3:"pen",4:"mouse"};ns.prototype.b=function(){ns.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xo)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var is="closure_listenable_"+(1e6*Math.random()|0),os=0;function ss(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++os,this.Y=this.Z=!1}function as(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function us(t){this.src=t,this.a={},this.b=0}function cs(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=wo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(as(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ls(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}us.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ls(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ss(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var hs="closure_lm_"+(1e6*Math.random()|0),fs={};function ds(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=ws(r),e&&e[is]?e.wa(n,r,lo(i)?!!i.capture:!!i,o):ps(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ds(t,e[o],n,r,i);return null}return n=ws(n),t&&t[is]?t.va(e,n,lo(r)?!!r.capture:!!r,i):ps(t,e,n,!1,r,i)}function ps(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=lo(i)?!!i.capture:!!i;if(s&&!Jo)return null;var a=bs(t);if(a||(t[hs]=a=new us(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=vs,e=Jo?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ts||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ms(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ys(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[is])cs(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ms(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bs(e))?(cs(n,t),0==n.b&&(n.src=null,e[hs]=null)):as(t)}}}function ms(t){return t in fs?fs[t]:fs[t]="on"+t}function gs(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ys(t),n.call(r,e)}function vs(t,e){if(t.Y)return!0;if(!Jo){if(!e)t:{e=["window","event"];for(var n=ao,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return gs(t,e=new ns(e,this))}return gs(t,new ns(e,this))}function bs(t){return(t=t[hs])instanceof us?t:null}var _s="__closure_events_fn_"+(1e9*Math.random()>>>0);function ws(t){return"function"==typeof t?t:(t[_s]||(t[_s]=function(e){return t.handleEvent(e)}),t[_s])}function Es(){_o.call(this),this.c=new us(this),this.J=this,this.C=null}function Cs(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new es(e,t);else if(e instanceof es)e.target=e.target||t;else{var i=e;Ro(e=new es(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ss(s,r,!0,e)&&i}if(i=Ss(s=e.a=t,r,!0,e)&&i,i=Ss(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ss(s=e.a=n[o],r,!1,e)&&i}function Ss(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&cs(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}bo(Es,_o),Es.prototype[is]=!0,(io=Es.prototype).addEventListener=function(t,e,n,r){ds(this,t,e,n,r)},io.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=lo(i)?!!i.capture:!!i,r=ws(r),e&&e[is]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=ls(s=e.a[n],r,i,o))&&(as(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=bs(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ls(n,r,i,o)),(r=-1<e?n[e]:null)&&ys(r))}(this,t,e,n,r)},io.G=function(){if(Es.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)as(n[r]);delete e.a[t],e.b--}}this.C=null},io.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},io.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ts=ao.JSON.stringify;function Os(){this.b=this.a=null}var Is,xs=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new js}),(function(t){t.reset()}));function As(){var t=Ps,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function js(){this.next=this.b=this.a=null}function Ns(t){ao.setTimeout((function(){throw t}),0)}function ks(t,e){Is||function(){var t=ao.Promise.resolve(void 0);Is=function(){t.then(Rs)}}(),Ds||(Is(),Ds=!0),Ps.add(t,e)}Os.prototype.add=function(t,e){var n=xs.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},js.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},js.prototype.reset=function(){this.next=this.b=this.a=null};var Ds=!1,Ps=new Os;function Rs(){for(var t;t=As();){try{t.a.call(t.b)}catch(n){Ns(n)}var e=xs;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ds=!1}function Ms(t,e){Es.call(this),this.b=t||1,this.a=e||ao,this.f=mo(this.Za,this),this.g=vo()}function Ls(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Fs(t,e,n){if("function"==typeof t)n&&(t=mo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=mo(t.handleEvent,t)}return 2147483647<Number(e)?-1:ao.setTimeout(t,e||0)}function Vs(t){t.a=Fs((function(){t.a=null,t.c&&(t.c=!1,Vs(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}bo(Ms,Es),(io=Ms.prototype).aa=!1,io.M=null,io.Za=function(){if(this.aa){var t=vo()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Cs(this,"tick"),this.aa&&(Ls(this),this.start()))}},io.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=vo())},io.G=function(){Ms.X.G.call(this),Ls(this),delete this.a};var Us=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}no(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Vs(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ao.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(_o);function qs(t){_o.call(this),this.b=t,this.a={}}bo(qs,_o);var Hs=[];function zs(t,e,n,r){Array.isArray(n)||(n&&(Hs[0]=n.toString()),n=Hs);for(var i=0;i<n.length;i++){var o=ds(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Bs(t){ko(t.a,(function(t,e){this.a.hasOwnProperty(e)&&ys(t)}),t),t.a={}}function Gs(){this.a=!0}function Ws(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ts(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}qs.prototype.G=function(){qs.X.G.call(this),Bs(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gs.prototype.info=function(){};var Ks={},$s=null;function Qs(){return $s=$s||new Es}function Ys(t){es.call(this,Ks.Fa,t)}function Zs(t){var e=Qs();Cs(e,new Ys(e,t))}function Js(t,e){es.call(this,Ks.STAT_EVENT,t),this.stat=e}function Xs(t){var e=Qs();Cs(e,new Js(e,t))}function ta(t){es.call(this,Ks.Ga,t)}function ea(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ao.setTimeout((function(){t()}),e)}Ks.Fa="serverreachability",bo(Ys,es),Ks.STAT_EVENT="statevent",bo(Js,es),Ks.Ga="timingevent",bo(ta,es);var na={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ra={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function ia(){}function oa(){}ia.prototype.a=null;var sa,aa={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ua(){es.call(this,"d")}function ca(){es.call(this,"c")}function la(){}function ha(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new qs(this),this.P=fa,this.R=new Ms(t=Ho?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}bo(ua,es),bo(ca,es),bo(la,ia),sa=new la;var fa=45e3,da={},pa={};function ya(t,e,n){t.H=1,t.i=La(Na(e)),t.j=n,t.I=!0,ma(t,null)}function ma(t,e){t.u=vo(),ba(t),t.l=Na(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ya(n.b,"t",r),t.D=0,t.a=Bu(t.g,t.g.C?e:null),0<t.O&&(t.F=new Us(mo(t.Ca,t,t.a),t.O)),zs(t.J,t.a,"readystatechange",t.Xa),e=t.B?Do(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Zs(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function ga(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=va(t,n);if(i==pa){4==e&&(t.h=4,Xs(14),r=!1),Ws(t.c,t.f,null,"[Incomplete Response]");break}if(i==da){t.h=4,Xs(15),Ws(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ws(t.c,t.f,i,null),Sa(t,i)}4==e&&0==n.length&&(t.h=1,Xs(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mu(e),e.F=!0,Xs(11))):(Ws(t.c,t.f,n,"[Invalid Chunked Response]"),Ca(t),Ea(t))}function va(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?pa:(n=Number(e.substring(n,r)),isNaN(n)?da:(r+=1)+n>e.length?pa:(e=e.substr(r,n),t.D=r+n,e))}function ba(t){t.T=vo()+t.P,_a(t,t.P)}function _a(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ea(mo(t.Va,t),e)}function wa(t){t.o&&(ao.clearTimeout(t.o),t.o=null)}function Ea(t){0==t.g.v||t.A||Vu(t.g,t)}function Ca(t){wa(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ls(t.R),Bs(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Sa(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ru(n.b,t)))if(n.I=t.N,!t.C&&ru(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Ov){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Fu(n),Iu(n)}Ru(n),Xs(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ea(mo(n.Sa,n),6e3));if(1>=nu(n.b)&&n.ea){try{n.ea()}catch(Ov){}n.ea=void 0}}else qu(n,11)}else if((t.C||n.a==t)&&Fu(n),!To(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(xo(l,"spdy")||xo(l,"quic")||xo(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(iu(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ma(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=vo()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=zu(u,u.C?u.ga:null,u.fa),d.C){ou(u.b,d);var p=d,y=u.D;y&&p.setTimeout(y),p.o&&(wa(p),ba(p)),u.a=d}else Pu(u);0<n.g.length&&ju(n)}else"stop"!=i[0]&&"close"!=i[0]||qu(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?qu(n,7):Ou(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Zs(4)}catch(Ov){}}function Ta(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(co(t)||"string"==typeof t)Eo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(co(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(co(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oa(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oa)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ia(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xa(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xa(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(io=ha.prototype).setTimeout=function(t){this.P=t},io.Xa=function(t){t=t.target;var e=this.F;e&&3==Eu(t)?e.f():this.Ca(t)},io.Ca=function(t){try{if(t==this.a)t:{var e=Eu(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Ho&&!this.a.$())){this.A||4!=e||7==n||Zs(8==n||0>=r?3:2),wa(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!To(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Xs(12),Ca(this),Ea(this);break t}Ws(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Sa(this,u)}this.I?(ga(this,e,o),Ho&&this.b&&3==e&&(zs(this.J,this.R,"tick",this.Wa),this.R.start())):(Ws(this.c,this.f,o,null),Sa(this,o)),4==e&&Ca(this),this.b&&!this.A&&(4==e?Vu(this.g,this):(this.b=!1,ba(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Xs(12)):(this.h=0,Xs(13)),Ca(this),Ea(this)}}}catch(c){}},io.Wa=function(){if(this.a){var t=Eu(this.a),e=this.a.$();this.D<e.length&&(wa(this),ga(this,t,e),this.b&&4!=t&&ba(this))}},io.cancel=function(){this.A=!0,Ca(this)},io.Va=function(){this.o=null;var t=vo();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Zs(3),Xs(17)),Ca(this),this.h=2,Ea(this)):_a(this,this.T-t)},(io=Oa.prototype).K=function(){Ia(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},io.L=function(){return Ia(this),this.a.concat()},io.get=function(t,e){return xa(this.b,t)?this.b[t]:e},io.set=function(t,e){xa(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},io.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Aa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ja(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ja){this.a=void 0!==e?e:t.a,ka(this,t.f),this.j=t.j,Da(this,t.c),Pa(this,t.h),this.g=t.g,e=t.b;var n=new Wa;n.c=e.c,e.a&&(n.a=new Oa(e.a),n.b=e.b),Ra(this,n),this.i=t.i}else t&&(n=String(t).match(Aa))?(this.a=!!e,ka(this,n[1]||"",!0),this.j=Fa(n[2]||""),Da(this,n[3]||"",!0),Pa(this,n[4]),this.g=Fa(n[5]||"",!0),Ra(this,n[6]||"",!0),this.i=Fa(n[7]||"")):(this.a=!!e,this.b=new Wa(null,this.a))}function Na(t){return new ja(t)}function ka(t,e,n){t.f=n?Fa(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Da(t,e,n){t.c=n?Fa(e,!0):e}function Pa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ra(t,e,n){e instanceof Wa?(t.b=e,function(t,e){e&&!t.f&&(Ka(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($a(this,e),Ya(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Va(e,Ba)),t.b=new Wa(e,t.a))}function Ma(t,e,n){t.b.set(e,n)}function La(t){return Ma(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^vo()).toString(36)),t}function Fa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Va(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ua),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ua(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ja.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Va(e,qa,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Va(e,qa,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Va(n,"/"==n.charAt(0)?za:Ha,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Va(n,Ga)),t.join("")};var qa=/[#\/\?@]/g,Ha=/[#\?:]/g,za=/[#\?]/g,Ba=/[#\?@]/g,Ga=/#/g;function Wa(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ka(t){t.a||(t.a=new Oa,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $a(t,e){Ka(t),e=Za(t,e),xa(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xa((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ia(t)))}function Qa(t,e){return Ka(t),e=Za(t,e),xa(t.a.b,e)}function Ya(t,e,n){$a(t,e),0<n.length&&(t.c=null,t.a.set(Za(t,e),So(n)),t.b+=n.length)}function Za(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(io=Wa.prototype).add=function(t,e){Ka(this),this.c=null,t=Za(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},io.forEach=function(t,e){Ka(this),this.a.forEach((function(n,r){Eo(n,(function(n){t.call(e,n,r,this)}),this)}),this)},io.L=function(){Ka(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},io.K=function(t){Ka(this);var e=[];if("string"==typeof t)Qa(this,t)&&(e=Co(e,this.a.get(Za(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Co(e,t[n])}return e},io.set=function(t,e){return Ka(this),this.c=null,Qa(this,t=Za(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},io.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},io.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ja=function(){return function(t,e){this.b=t,this.a=e}}();function Xa(t){this.g=t||tu,t=ao.PerformanceNavigationTiming?0<(t=ao.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ao.ia&&ao.ia.ya&&ao.ia.ya()&&ao.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var tu=10;function eu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function nu(t){return t.b?1:t.a?t.a.size:0}function ru(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function iu(t,e){t.a?t.a.add(e):t.b=e}function ou(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function su(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ro(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return So(t.c)}function au(){}function uu(){this.a=new au}function cu(t,e,n){var r=n||"";try{Ta(t,(function(t,n){var i=t;lo(t)&&(i=Ts(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(db){throw e.push(r+"type="+encodeURIComponent("_badmap")),db}}function lu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Xa.prototype.cancel=function(){var t,e;if(this.c=su(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ro(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},au.prototype.stringify=function(t){return ao.JSON.stringify(t,void 0)},au.prototype.parse=function(t){return ao.JSON.parse(t,void 0)};var hu=ao.JSON.parse;function fu(t){Es.call(this),this.headers=new Oa,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=du,this.D=this.F=!1}bo(fu,Es);var du="",pu=/^https?$/i,yu=["POST","PUT"];function mu(t){return"content-type"==t.toLowerCase()}function gu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,vu(t),_u(t)}function vu(t){t.u||(t.u=!0,Cs(t,"complete"),Cs(t,"error"))}function bu(t){if(t.b&&void 0!==so&&(!t.s[1]||4!=Eu(t)||2!=t.W()))if(t.l&&4==Eu(t))Fs(t.za,0,t);else if(Cs(t,"readystatechange"),4==Eu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Aa)[1]||null;if(!o&&ao.self&&ao.self.location){var s=ao.self.location.protocol;o=s.substr(0,s.length-1)}i=!pu.test(o?o.toLowerCase():"")}e=i}if(e)Cs(t,"complete"),Cs(t,"success");else{t.h=6;try{var a=2<Eu(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",vu(t)}}finally{_u(t)}}}function _u(t,e){if(t.a){wu(t);var n=t.a,r=t.s[0]?uo:null;t.a=null,t.s=null,e||Cs(t,"ready");try{n.onreadystatechange=r}catch(db){}}}function wu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ao.clearTimeout(t.m),t.m=null)}function Eu(t){return t.a?t.a.readyState:0}function Cu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ko(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ma(t,e,n))}function Su(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Tu(t){this.pa=0,this.g=[],this.c=new Gs,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Su("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Su("baseRetryDelayMs",5e3,t),this.Ra=Su("retryDelaySeedMs",1e4,t),this.Ma=Su("forwardChannelMaxRetries",2,t),this.ma=Su("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Xa(t&&t.concurrentRequestLimit),this.ka=new uu,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ou(t){if(xu(t),3==t.v){var e=t.R++,n=Na(t.B);Ma(n,"SID",t.J),Ma(n,"RID",e),Ma(n,"TYPE","terminate"),ku(t,n),(e=new ha(t,t.c,e,void 0)).H=2,e.i=La(Na(n)),n=!1,ao.navigator&&ao.navigator.sendBeacon&&(n=ao.navigator.sendBeacon(e.i.toString(),"")),!n&&ao.Image&&((new Image).src=e.i,n=!0),n||(e.a=Bu(e.g,null),e.a.ba(e.i)),e.u=vo(),ba(e)}Hu(t)}function Iu(t){t.a&&(Mu(t),t.a.cancel(),t.a=null)}function xu(t){Iu(t),t.j&&(ao.clearTimeout(t.j),t.j=null),Fu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ao.clearTimeout(t.h),t.h=null)}function Au(t,e){t.g.push(new Ja(t.Oa++,e)),3==t.v&&ju(t)}function ju(t){eu(t.b)||t.h||(t.h=!0,ks(t.Ba,t),t.u=0)}function Nu(t,e){var n;n=e?e.f:t.R++;var r=Na(t.B);Ma(r,"SID",t.J),Ma(r,"RID",n),Ma(r,"AID",t.P),ku(t,r),t.i&&t.l&&Cu(r,t.i,t.l),n=new ha(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Du(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),iu(t.b,n),ya(n,r,e)}function ku(t,e){t.f&&Ta({},(function(t,n){Ma(e,n,t)}))}function Du(t,e,n){n=Math.min(t.g.length,n);var r=t.f?mo(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{cu(l,s,"req"+c+"_")}catch(Oc){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Pu(t){t.a||t.j||(t.T=1,ks(t.Aa,t),t.o=0)}function Ru(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=ea(mo(t.Aa,t),Uu(t,t.o)),t.o++,0))}function Mu(t){null!=t.s&&(ao.clearTimeout(t.s),t.s=null)}function Lu(t){t.a=new ha(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Na(t.la);Ma(e,"RID","rpc"),Ma(e,"SID",t.J),Ma(e,"CI",t.H?"0":"1"),Ma(e,"AID",t.P),ku(t,e),Ma(e,"TYPE","xmlhttp"),t.i&&t.l&&Cu(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=La(Na(e)),n.j=null,n.I=!0,ma(n,t)}function Fu(t){null!=t.m&&(ao.clearTimeout(t.m),t.m=null)}function Vu(t,e){var n=null;if(t.a==e){Fu(t),Mu(t),t.a=null;var r=2}else{if(!ru(t.b,e))return;n=e.s,ou(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=vo()-e.u;var i=t.u;Cs(r=Qs(),new ta(r,n,e,i)),ju(t)}else Pu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(nu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ea(mo(t.Ba,t,e),Uu(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ru(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:qu(t,5);break;case 4:qu(t,10);break;case 3:qu(t,6);break;default:qu(t,2)}}function Uu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function qu(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=mo(t.Ya,t);n||(n=new ja("//www.google.com/images/cleardot.gif"),ao.location&&"http"==ao.location.protocol||ka(n,"https"),La(n)),function(t,e){var n=new Gs;if(ao.Image){var r=new Image;r.onload=go(lu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=go(lu,n,r,"TestLoadImage: error",!1,e),r.onabort=go(lu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=go(lu,n,r,"TestLoadImage: timeout",!1,e),ao.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Xs(2);t.v=0,t.f&&t.f.ra(e),Hu(t),xu(t)}function Hu(t){t.v=0,t.I=-1,t.f&&(0==su(t.b).length&&0==t.g.length||(t.b.c.length=0,So(t.g),t.g.length=0),t.f.qa())}function zu(t,e,n){var r=function(t){return t instanceof ja?Na(t):new ja(t,void 0)}(n);if(""!=r.c)e&&Da(r,e+"."+r.c),Pa(r,r.h);else{var i=ao.location;r=function(t,e,n,r){var i=new ja(null,void 0);return t&&ka(i,t),e&&Da(i,e),n&&Pa(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ko(t.V,(function(t,e){Ma(r,e,t)})),n=t.na,(e=t.A)&&n&&Ma(r,e,n),Ma(r,"VER",t.ha),ku(t,r),r}function Bu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fu(t.Na)).F=t.C,e}function Gu(){}function Wu(){if(Uo&&!(10<=Number(Zo)))throw Error("Environmental error: no available transport.")}function Ku(t,e){Es.call(this),this.a=new Tu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!To(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!To(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Yu(this)}function $u(t){ua.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Qu(){ca.call(this),this.status=1}function Yu(t){this.a=t}(io=fu.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:sa),this.a.onreadystatechange=mo(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void gu(this,o)}t=n||"";var i=new Oa(this.headers);r&&Ta(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=mu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ao.FormData&&t instanceof ao.FormData,!(0<=wo(yu,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{wu(this),0<this.o&&((this.D=function(t){return Uo&&Yo(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=mo(this.xa,this)):this.m=Fs(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){gu(this,o)}},io.xa=function(){void 0!==so&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Cs(this,"timeout"),this.abort(8))},io.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Cs(this,"complete"),Cs(this,"abort"),_u(this))},io.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_u(this,!0)),fu.X.G.call(this)},io.za=function(){this.j||(this.A||this.l||this.g?bu(this):this.Ua())},io.Ua=function(){bu(this)},io.W=function(){try{return 2<Eu(this)?this.a.status:-1}catch(Fo){return-1}},io.$=function(){try{return this.a?this.a.responseText:""}catch(Fo){return""}},io.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),hu(e)}},io.ua=function(){return this.h},io.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(io=Tu.prototype).ha=8,io.v=1,io.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ha(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ro(r=Do(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Du(this,n,e),Ma(i=Na(this.B),"RID",t),Ma(i,"CVER",22),this.A&&Ma(i,"X-HTTP-Session-Id",this.A),ku(this,i),this.i&&r&&Cu(i,this.i,r),iu(this.b,n),this.Ia&&Ma(i,"TYPE","init"),this.da?(Ma(i,"$req",e),Ma(i,"SID","null"),n.U=!0,ya(n,i,null)):ya(n,i,e),this.v=2}}else 3==this.v&&(t?Nu(this,t):0==this.g.length||eu(this.b)||Nu(this))},io.Aa=function(){if(this.j=null,Lu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ea(mo(this.Ta,this),t)}},io.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Xs(10),Iu(this),Lu(this))},io.Sa=function(){null!=this.m&&(this.m=null,Iu(this),Ru(this),Xs(19))},io.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Xs(2)):(this.c.info("Failed to ping google.com"),Xs(1))},(io=Gu.prototype).ta=function(){},io.sa=function(){},io.ra=function(){},io.qa=function(){},io.Ja=function(){},Wu.prototype.a=function(t,e){return new Ku(t,e)},bo(Ku,Es),Ku.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Xs(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=zu(t,null,t.fa),ju(t)},Ku.prototype.close=function(){Ou(this.a)},Ku.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Au(this.a,e)}else this.l?((e={}).__data__=Ts(t),Au(this.a,e)):Au(this.a,t)},Ku.prototype.G=function(){this.a.f=null,delete this.f,Ou(this.a),delete this.a,Ku.X.G.call(this)},bo($u,ua),bo(Qu,ca),bo(Yu,Gu),Yu.prototype.ta=function(){Cs(this.a,"a")},Yu.prototype.sa=function(t){Cs(this.a,new $u(t))},Yu.prototype.ra=function(t){Cs(this.a,new Qu(t))},Yu.prototype.qa=function(){Cs(this.a,"b")},Wu.prototype.createWebChannel=Wu.prototype.a,Ku.prototype.send=Ku.prototype.h,Ku.prototype.open=Ku.prototype.g,Ku.prototype.close=Ku.prototype.close,na.NO_ERROR=0,na.TIMEOUT=8,na.HTTP_ERROR=6,ra.COMPLETE="complete",oa.EventType=aa,aa.OPEN="a",aa.CLOSE="b",aa.ERROR="c",aa.MESSAGE="d",Es.prototype.listen=Es.prototype.va,fu.prototype.listenOnce=fu.prototype.wa,fu.prototype.getLastError=fu.prototype.Qa,fu.prototype.getLastErrorCode=fu.prototype.ua,fu.prototype.getStatus=fu.prototype.W,fu.prototype.getResponseJson=fu.prototype.Pa,fu.prototype.getResponseText=fu.prototype.$,fu.prototype.send=fu.prototype.ba;var Zu=na,Ju=ra,Xu=Ks,tc=oa,ec=fu,nc=n("mrSG"),rc=new to.b("@firebase/firestore");function ic(){return rc.logLevel}function oc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(rc.logLevel<=to.a.DEBUG){var r=e.map(uc);rc.debug.apply(rc,Object(nc.g)(["Firestore (8.2.1): "+t],r))}}function sc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(rc.logLevel<=to.a.ERROR){var r=e.map(uc);rc.error.apply(rc,Object(nc.g)(["Firestore (8.2.1): "+t],r))}}function ac(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(rc.logLevel<=to.a.WARN){var r=e.map(uc);rc.warn.apply(rc,Object(nc.g)(["Firestore (8.2.1): "+t],r))}}function uc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(db){return t}}function cc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.1) INTERNAL ASSERTION FAILED: "+t;throw sc(e),new Error(e)}function lc(t,e){t||cc()}function hc(t,e){return t}function fc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var dc=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=fc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function pc(t,e){return t<e?-1:t>e?1:0}function yc(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function mc(t){return t+"\0"}var gc=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return pc(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();gc.h=new gc("");var vc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},bc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(nc.c)(e,t),e}(Error),_c=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(gc.fromBase64String(e))}catch(e){throw new bc(vc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(gc.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),wc=function(t){this._=t};function Ec(){if("undefined"==typeof Uint8Array)throw new bc(vc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Cc(){if("undefined"==typeof atob)throw new bc(vc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Sc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.fromBase64String=function(t){return Cc(),new e(_c.fromBase64String(t))},e.fromUint8Array=function(t){return Ec(),new e(_c.fromUint8Array(t))},e.prototype.toBase64=function(){return Cc(),this._.toBase64()},e.prototype.toUint8Array=function(){return Ec(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(wc),Tc=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},Oc=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ic=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Ic.UNAUTHENTICATED=new Ic(null),Ic.P=new Ic("google-credentials-uid"),Ic.g=new Ic("first-party-uid");var xc=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},Ac=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(Ic.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),jc=function(){function t(t){var e=this;this.C=null,this.currentUser=Ic.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.F!==e?(oc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(lc("string"==typeof n.accessToken),new xc(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return lc(null===t||"string"==typeof t),new Ic(t)},t}(),Nc=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=Ic.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),kc=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new Nc(this.k,this.M))},t.prototype.S=function(t){t(Ic.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),Dc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();Dc.U=-1;var Pc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new bc(vc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new bc(vc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new bc(vc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bc(vc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?pc(this.nanoseconds,t.nanoseconds):pc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Rc=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new Pc(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),Mc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&cc(),void 0===n?n=t.length-e:n>t.length-e&&cc(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return this.Y(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Lc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new bc(vc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(Mc),Fc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return Fc.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new bc(vc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new bc(vc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new bc(vc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new bc(vc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(Mc),Uc=function(){function t(t){this.path=t}return t.ft=function(e){return new t(Lc.ct(e))},t.dt=function(e){return new t(Lc.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Lc.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return Lc.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new Lc(e.slice()))},t}();function qc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Bc=function(){function t(t){this.fields=t,t.sort(Vc.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return yc(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Gc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wc(t){if(lc(!!t),"string"==typeof t){var e=0,n=Gc.exec(t);if(lc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Kc(t.seconds),nanos:Kc(t.nanos)}}function Kc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function $c(t){return"string"==typeof t?gc.fromBase64String(t):gc.fromUint8Array(t)}function Qc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yc(t){var e=Wc(t.mapValue.fields.__local_write_time__.timestampValue);return new Pc(e.seconds,e.nanos)}function Zc(t){return null==t}function Jc(t){return 0===t&&1/t==-1/0}function Xc(t){return"number"==typeof t&&Number.isInteger(t)&&!Jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function tl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qc(t)?4:10:cc()}function el(t,e){var n=tl(t);if(n!==tl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yc(t).isEqual(Yc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Wc(t.timestampValue),r=Wc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return $c(t.bytesValue).isEqual($c(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Kc(t.geoPointValue.latitude)===Kc(e.geoPointValue.latitude)&&Kc(t.geoPointValue.longitude)===Kc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Kc(t.integerValue)===Kc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Kc(t.doubleValue),r=Kc(e.doubleValue);return n===r?Jc(n)===Jc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return yc(t.arrayValue.values||[],e.arrayValue.values||[],el);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(qc(n)!==qc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!el(n[i],r[i])))return!1;return!0}(t,e);default:return cc()}}function nl(t,e){return void 0!==(t.values||[]).find((function(t){return el(t,e)}))}function rl(t,e){var n=tl(t),r=tl(e);if(n!==r)return pc(n,r);switch(n){case 0:return 0;case 1:return pc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Kc(t.integerValue||t.doubleValue),r=Kc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return il(t.timestampValue,e.timestampValue);case 4:return il(Yc(t),Yc(e));case 5:return pc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=$c(t),r=$c(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=pc(n[i],r[i]);if(0!==o)return o}return pc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=pc(Kc(t.latitude),Kc(e.latitude));return 0!==n?n:pc(Kc(t.longitude),Kc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=rl(n[i],r[i]);if(o)return o}return pc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=pc(r[s],o[s]);if(0!==a)return a;var u=rl(n[r[s]],i[o[s]]);if(0!==u)return u}return pc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw cc()}}function il(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return pc(t,e);var n=Wc(t),r=Wc(e),i=pc(n.seconds,r.seconds);return 0!==i?i:pc(n.nanos,r.nanos)}function ol(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Wc(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?$c(e.bytesValue).toBase64():"referenceValue"in e?Uc.dt(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):cc();var n}(t)}function sl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function al(t){return!!t&&"integerValue"in t}function ul(t){return!!t&&"arrayValue"in t}function cl(t){return!!t&&"nullValue"in t}function ll(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hl(t){return!!t&&"mapValue"in t}var fl=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!hl(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return el(this.proto,t.proto)},t}(),dl=function(){function t(t){void 0===t&&(t=fl.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===tl(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(Vc.at(),this.Rt);return null!=t?new fl(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=hl(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function pl(t){var e=[];return Hc(t.fields||{},(function(t,n){var r=new Vc([t]);if(hl(n)){var i=pl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new Bc(e)}var yl=function(t,e){this.key=t,this.version=e},ml=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(nc.c)(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(yl),gl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(nc.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(yl),vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(yl),bl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function _l(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new bl(t,e,n,r,i,o,s)}function wl(t){var e=hc(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+ol(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),Zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Pl(e.startAt)),e.endAt&&(n+="|ub:",n+=Pl(e.endAt)),e.St=n}return e.St}function El(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ml(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!el(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fl(t.startAt,e.startAt)&&Fl(t.endAt,e.endAt)}function Cl(t){return Uc.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Sl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(nc.c)(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new Tl(t,n,r):"array-contains"===n?new Al(t,r):"in"===n?new jl(t,r):"not-in"===n?new Nl(t,r):"array-contains-any"===n?new kl(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new Ol(t,n):new Il(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(rl(e,this.value)):null!==e&&tl(this.value)===tl(e)&&this.Ct(rl(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return cc()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Tl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Uc.dt(r.referenceValue),i}return Object(nc.c)(e,t),e.prototype.matches=function(t){var e=Uc.J(t.key,this.key);return this.Ct(e)},e}(Sl),Ol=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=xl(0,n),r}return Object(nc.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Sl),Il=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=xl(0,n),r}return Object(nc.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Sl);function xl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Uc.dt(t.referenceValue)}))}var Al=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(nc.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ul(e)&&nl(e.arrayValue,this.value)},e}(Sl),jl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(nc.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&nl(this.value.arrayValue,e)},e}(Sl),Nl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(nc.c)(e,t),e.prototype.matches=function(t){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!nl(this.value.arrayValue,e)},e}(Sl),kl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(nc.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ul(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return nl(e.value.arrayValue,t)}))},e}(Sl),Dl=function(t,e){this.position=t,this.before=e};function Pl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ol(t)})).join(",")}var Rl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ml(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ll(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?Uc.J(Uc.dt(s.referenceValue),n.key):rl(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Fl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!el(t.position[n],e.position[n]))return!1;return!0}var Vl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ft=null,this.Ot=null};function Ul(t,e,n,r,i,o,s,a){return new Vl(t,e,n,r,i,o,s,a)}function ql(t){return new Vl(t)}function Hl(t){return!Zc(t.limit)&&"F"===t.limitType}function zl(t){return!Zc(t.limit)&&"L"===t.limitType}function Bl(t){return t.Nt.length>0?t.Nt[0].field:null}function Gl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function Wl(t){return null!==t.collectionGroup}function Kl(t){var e=hc(t);if(null===e.Ft){e.Ft=[];var n=Gl(e),r=Bl(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new Rl(n)),e.Ft.push(new Rl(Vc.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var a=s[o];e.Ft.push(a),a.field.ht()&&(i=!0)}if(!i){var u=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new Rl(Vc.lt(),u))}}}return e.Ft}function $l(t){var e=hc(t);if(!e.Ot)if("F"===e.limitType)e.Ot=_l(e.path,e.collectionGroup,Kl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Kl(e);r<i.length;r++){var o=i[r];n.push(new Rl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Dl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Dl(e.startAt.position,!e.startAt.before):null;e.Ot=_l(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.Ot}function Ql(t,e,n){return new Vl(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yl(t,e){return El($l(t),$l(e))&&t.limitType===e.limitType}function Zl(t){return wl($l(t))+"|lt:"+t.limitType}function Jl(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+ol(e.value);var e})).join(", ")+"]"),Zc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Pl(t.startAt)),t.endAt&&(e+=", endAt: "+Pl(t.endAt)),"Target("+e+")"}($l(t))+"; limitType="+t.limitType+")"}function Xl(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):Uc.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ll(t.startAt,Kl(t),e)||t.endAt&&Ll(t.endAt,Kl(t),e))}(t,e)}function th(t){return function(e,n){for(var r=!1,i=0,o=Kl(t);i<o.length;i++){var s=o[i],a=eh(s,e,n);if(0!==a)return a;r=r||s.field.ht()}return 0}}function eh(t,e,n){var r=t.field.ht()?Uc.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?rl(r,i):cc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return cc()}}var nh=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Rc.min()),void 0===o&&(o=Rc.min()),void 0===s&&(s=gc.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function rh(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function ih(t){return{integerValue:""+t}}function oh(t,e){return Xc(e)?ih(e):rh(t,e)}var sh=function(){this.Ut=void 0};function ah(t,e,n){return t instanceof lh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof hh?fh(t,e):t instanceof dh?ph(t,e):function(t,e){var n=ch(t,e),r=mh(n)+mh(t.Qt);return al(n)&&al(t.Qt)?ih(r):rh(t.Kt,r)}(t,e)}function uh(t,e,n){return t instanceof hh?fh(t,e):t instanceof dh?ph(t,e):n}function ch(t,e){return t instanceof yh?al(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var lh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e}(sh),hh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(nc.c)(e,t),e}(sh);function fh(t,e){for(var n=gh(e),r=function(t){n.some((function(e){return el(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var dh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(nc.c)(e,t),e}(sh);function ph(t,e){for(var n=gh(e),r=function(t){n=n.filter((function(e){return!el(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var yh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return Object(nc.c)(e,t),e}(sh);function mh(t){return Kc(t.integerValue||t.doubleValue)}function gh(t){return ul(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var vh=function(t,e){this.field=t,this.transform=e},bh=function(t,e){this.version=t,this.transformResults=e},_h=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function wh(t,e){return void 0!==t.updateTime?e instanceof ml&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ml}var Eh=function(){};function Ch(t,e,n){return t instanceof xh?function(t,e,n){var r=t.value;if(n.transformResults){var i=Nh(t.fieldTransforms,e,n.transformResults);r=Dh(t.fieldTransforms,r,i)}return new ml(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ah?function(t,e,n){if(!wh(t.Gt,e))return new vl(t.key,n.version);var r=jh(t,e,n.transformResults?Nh(t.fieldTransforms,e,n.transformResults):[]);return new ml(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new gl(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Sh(t,e,n,r){return t instanceof xh?function(t,e,n,r){if(!wh(t.Gt,e))return e;var i=t.value;if(t.fieldTransforms){var o=kh(t.fieldTransforms,n,e,r);i=Dh(t.fieldTransforms,i,o)}var s=Ih(e);return new ml(t.key,s,i,{bt:!0})}(t,e,r,n):t instanceof Ah?function(t,e,n,r){if(!wh(t.Gt,e))return e;var i=Ih(e),o=jh(t,e,kh(t.fieldTransforms,n,e,r));return new ml(t.key,i,o,{bt:!0})}(t,e,r,n):function(t,e){return wh(t.Gt,e)?new gl(t.key,Rc.min()):e}(t,e)}function Th(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof ml?e.field(o.field):void 0,a=ch(o.transform,s||null);null!=a&&(n=null==n?(new dl).set(o.field,a):n.set(o.field,a))}return n?n.yt():null}(t.fieldTransforms,e):null}function Oh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&yc(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof hh&&e instanceof hh||t instanceof dh&&e instanceof dh?yc(t.elements,e.elements,el):t instanceof yh&&e instanceof yh?el(t.Qt,e.Qt):t instanceof lh&&e instanceof lh}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function Ih(t){return t instanceof ml?t.version:Rc.min()}var xh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return Object(nc.c)(e,t),e}(Eh),Ah=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return Object(nc.c)(e,t),e}(Eh);function jh(t,e,n){var r;return r=function(t,e){var n=new dl(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof ml?e.data():fl.empty()),Dh(t.fieldTransforms,r,n)}function Nh(t,e,n){var r=[];lc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof ml&&(a=e.field(o.field)),r.push(uh(s,a,n[i]))}return r}function kh(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof ml&&(c=n.field(a.field)),null===c&&r instanceof ml&&(c=r.field(a.field)),i.push(ah(u,c,e))}return i}function Dh(t,e,n){for(var r=new dl(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.yt()}var Ph,Rh,Mh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return Object(nc.c)(e,t),e}(Eh),Lh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return Object(nc.c)(e,t),e}(Eh),Fh=function(t){this.count=t};function Vh(t){switch(t){case vc.OK:return cc();case vc.CANCELLED:case vc.UNKNOWN:case vc.DEADLINE_EXCEEDED:case vc.RESOURCE_EXHAUSTED:case vc.INTERNAL:case vc.UNAVAILABLE:case vc.UNAUTHENTICATED:return!1;case vc.INVALID_ARGUMENT:case vc.NOT_FOUND:case vc.ALREADY_EXISTS:case vc.PERMISSION_DENIED:case vc.FAILED_PRECONDITION:case vc.ABORTED:case vc.OUT_OF_RANGE:case vc.UNIMPLEMENTED:case vc.DATA_LOSS:return!0;default:return cc()}}function Uh(t){if(void 0===t)return sc("GRPC error has no .code"),vc.UNKNOWN;switch(t){case Ph.OK:return vc.OK;case Ph.CANCELLED:return vc.CANCELLED;case Ph.UNKNOWN:return vc.UNKNOWN;case Ph.DEADLINE_EXCEEDED:return vc.DEADLINE_EXCEEDED;case Ph.RESOURCE_EXHAUSTED:return vc.RESOURCE_EXHAUSTED;case Ph.INTERNAL:return vc.INTERNAL;case Ph.UNAVAILABLE:return vc.UNAVAILABLE;case Ph.UNAUTHENTICATED:return vc.UNAUTHENTICATED;case Ph.INVALID_ARGUMENT:return vc.INVALID_ARGUMENT;case Ph.NOT_FOUND:return vc.NOT_FOUND;case Ph.ALREADY_EXISTS:return vc.ALREADY_EXISTS;case Ph.PERMISSION_DENIED:return vc.PERMISSION_DENIED;case Ph.FAILED_PRECONDITION:return vc.FAILED_PRECONDITION;case Ph.ABORTED:return vc.ABORTED;case Ph.OUT_OF_RANGE:return vc.OUT_OF_RANGE;case Ph.UNIMPLEMENTED:return vc.UNIMPLEMENTED;case Ph.DATA_LOSS:return vc.DATA_LOSS;default:return cc()}}(Rh=Ph||(Ph={}))[Rh.OK=0]="OK",Rh[Rh.CANCELLED=1]="CANCELLED",Rh[Rh.UNKNOWN=2]="UNKNOWN",Rh[Rh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rh[Rh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rh[Rh.NOT_FOUND=5]="NOT_FOUND",Rh[Rh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rh[Rh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rh[Rh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rh[Rh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rh[Rh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rh[Rh.ABORTED=10]="ABORTED",Rh[Rh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rh[Rh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rh[Rh.INTERNAL=13]="INTERNAL",Rh[Rh.UNAVAILABLE=14]="UNAVAILABLE",Rh[Rh.DATA_LOSS=15]="DATA_LOSS";var qh=function(){function t(t,e){this.J=t,this.root=e||zh.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,zh.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,zh.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new Hh(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new Hh(this.root,t,this.J,!1)},t.prototype.se=function(){return new Hh(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new Hh(this.root,t,this.J,!0)},t}(),Hh=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),zh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw cc();if(this.right._e())throw cc();var t=this.left.me();if(t!==this.right.me())throw cc();return t+(this._e()?0:1)},t}();zh.EMPTY=null,zh.RED=!0,zh.Jt=!1,zh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw cc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw cc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw cc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw cc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw cc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new zh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var Bh=function(){function t(t){this.J=t,this.data=new qh(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new Gh(this.data.ee())},t.prototype.ne=function(t){return new Gh(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),Gh=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),Wh=new qh(Uc.J);function Kh(){return Wh}function $h(){return Kh()}var Qh=new qh(Uc.J);function Yh(){return Qh}var Zh=new qh(Uc.J);function Jh(){return Zh}var Xh=new Bh(Uc.J);function tf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Xh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ef=new Bh(pc);function nf(){return ef}var rf=function(){function t(t){this.J=t?function(e,n){return t(e,n)||Uc.J(e.key,n.key)}:function(t,e){return Uc.J(t.key,e.key)},this.Ve=Yh(),this.pe=new qh(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),of=function(){function t(){this.ve=new qh(Uc.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):cc():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),sf=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=a}return t.Fe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,rf.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&Yl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),af=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,uf.Be(e,n)),new t(Rc.min(),r,nf(),Kh(),tf())},t}(),uf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(gc.h,n,tf(),tf(),tf())},t}(),cf=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},lf=function(t,e){this.targetId=t,this.Ge=e},hf=function(t,e,n,r){void 0===n&&(n=gc.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ff=function(){function t(){this.ze=0,this.He=yf(),this.Je=gc.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=tf(),e=tf(),n=tf();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:cc()}})),new uf(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=yf()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),df=function(){function t(t){this.hn=t,this.ln=new Map,this._n=Kh(),this.fn=pf(),this.dn=new Bh(pc)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof ml?this.En(r,t.je):t.je instanceof gl&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Tn(r=o[i],t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:cc()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Cl(i))if(0===n){var o=new Uc(i.path);this.Tn(e,o,new gl(o,Rc.min()))}else lc(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&Cl(o.target)){var s=new Uc(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new gl(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=tf();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new af(t,n,this.dn,this._n,r);return this._n=Kh(),this.fn=pf(),this.dn=new Bh(pc),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new ff,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new Bh(pc),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||oc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new ff),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function pf(){return new qh(Uc.J)}function yf(){return new qh(Uc.J)}var mf={asc:"ASCENDING",desc:"DESCENDING"},gf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vf=function(t,e){this.T=t,this.qt=e};function bf(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function _f(t,e){return t.qt?e.toBase64():e.toUint8Array()}function wf(t,e){return bf(t,e.G())}function Ef(t){return lc(!!t),Rc.W(function(t){var e=Wc(t);return new Pc(e.seconds,e.nanos)}(t))}function Cf(t,e){return function(t){return new Lc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function Sf(t){var e=Lc.ct(t);return lc(Kf(e)),e}function Tf(t,e){return Cf(t.T,e.path)}function Of(t,e){var n=Sf(e);if(n.get(1)!==t.T.projectId)throw new bc(vc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new bc(vc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new Uc(jf(n))}function If(t,e){return Cf(t.T,e)}function xf(t){var e=Sf(t);return 4===e.length?Lc.at():jf(e)}function Af(t){return new Lc(["projects",t.T.projectId,"databases",t.T.database]).ot()}function jf(t){return lc(t.length>4&&"documents"===t.get(4)),t.X(5)}function Nf(t,e,n){return{name:Tf(t,e),fields:n.proto.mapValue.fields}}function kf(t,e,n){var r=Of(t,e.name),i=Ef(e.updateTime),o=new fl({mapValue:{fields:e.fields}});return new ml(r,i,o,{hasCommittedMutations:!!n})}function Df(t,e){var n;if(e instanceof xh)n={update:Nf(t,e.key,e.value)};else if(e instanceof Mh)n={delete:Tf(t,e.key)};else if(e instanceof Ah)n={update:Nf(t,e.key,e.data),updateMask:Wf(e.zt)};else{if(!(e instanceof Lh))return cc();n={verify:Tf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof lh)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof hh)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof dh)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof yh)return{fieldPath:e.field.ot(),increment:n.Qt};throw cc()}(0,t)}))),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:wf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:cc()}(t,e.Gt)),n}function Pf(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?_h.updateTime(Ef(t.updateTime)):void 0!==t.exists?_h.exists(t.exists):_h.Wt()}(e.currentDocument):_h.Wt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(lc("REQUEST_TIME"===e.setToServerValue),n=new lh):"appendMissingElements"in e?n=new hh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new dh(e.removeAllFromArray.values||[]):"increment"in e?n=new yh(t,e.increment):cc();var r=Vc._t(e.fieldPath);return new vh(r,n)}(t,e)})):[];if(e.update){var i=Of(t,e.update.name),o=new fl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Bc((t.fieldPaths||[]).map((function(t){return Vc._t(t)})))}(e.updateMask);return new Ah(i,o,s,n,r)}return new xh(i,o,n,r)}if(e.delete){var a=Of(t,e.delete);return new Mh(a,n)}if(e.verify){var u=Of(t,e.verify);return new Lh(u,n)}return cc()}function Rf(t,e){return{documents:[If(t,e.path)]}}function Mf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=If(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=If(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(ll(t.value))return{unaryFilter:{field:Hf(t.field),op:"IS_NAN"}};if(cl(t.value))return{unaryFilter:{field:Hf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ll(t.value))return{unaryFilter:{field:Hf(t.field),op:"IS_NOT_NAN"}};if(cl(t.value))return{unaryFilter:{field:Hf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hf(t.field),op:qf(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Hf(t.field),direction:Uf(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||Zc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ff(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ff(e.endAt)),n}function Lf(t){var e=xf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){lc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Gf(e)]:void 0!==e.fieldFilter?[Bf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):cc():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Rl(zf(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Zc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Vf(n.startAt));var l=null;return n.endAt&&(l=Vf(n.endAt)),Ul(e,i,a,s,u,"F",c,l)}function Ff(t){return{before:t.before,values:t.position}}function Vf(t){return new Dl(t.values||[],!!t.before)}function Uf(t){return mf[t]}function qf(t){return gf[t]}function Hf(t){return{fieldPath:t.ot()}}function zf(t){return Vc._t(t.fieldPath)}function Bf(t){return Sl.create(zf(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return cc()}}(t.fieldFilter.op),t.fieldFilter.value)}function Gf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=zf(t.unaryFilter.field);return Sl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=zf(t.unaryFilter.field);return Sl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=zf(t.unaryFilter.field);return Sl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=zf(t.unaryFilter.field);return Sl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return cc()}}function Wf(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function Kf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var $f=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Qf=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&cc(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),Yf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new $f,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new Xf(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=id(e.target.error);n.qn.reject(new Xf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Xf(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(oc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ed(e)},t}(),Zf=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(Object(eo.m)())&&sc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return oc("SimpleDb","Removing database:",t),nd(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=Object(eo.m)(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return Object(nc.b)(this,void 0,void 0,(function(){var e,n=this;return Object(nc.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(oc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Xf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new bc(vc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Xf(t,n))},i.onupgradeneeded=function(t){oc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Qn.Yn(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){oc("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(nc.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(nc.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(nc.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Jn(t)];case 2:return a.db=h.sent(),e=Yf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Qf.reject(t)})).Mn(),u={},s.catch((function(){})),[4,e.Un];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return oc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Jf=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return nd(this.ts.delete())},t}(),Xf=function(t){function e(e,n){var r=this;return(r=t.call(this,vc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(nc.c)(e,t),e}(bc);function td(t){return"IndexedDbTransactionError"===t.name}var ed=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(oc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(oc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),nd(n)},t.prototype.add=function(t){return oc("SimpleDb","ADD",this.store.name,t,t),nd(this.store.add(t))},t.prototype.get=function(t){var e=this;return nd(this.store.get(t)).next((function(n){return void 0===n&&(n=null),oc("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return oc("SimpleDb","DELETE",this.store.name,t),nd(this.store.delete(t))},t.prototype.count=function(){return oc("SimpleDb","COUNT",this.store.name),nd(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){oc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new Qf((function(n,r){e.onerror=function(t){var e=id(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new Qf((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Jf(i),s=e(i.primaryKey,i.value,o);if(s instanceof Qf){var a=s.catch((function(t){return o.done(),Qf.reject(t)}));n.push(a)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return Qf.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function nd(t){return new Qf((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=id(t.target.error);n(e)}}))}var rd=!1;function id(t){var e=Zf.Kn(Object(eo.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new bc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return rd||(rd=!0,setTimeout((function(){throw r}),0)),r}}return t}var od=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new $f,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new bc(vc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function sd(t,e){if(sc("AsyncQueue",e+": "+t),td(t))return new bc(vc.UNAVAILABLE,e+": "+t);throw t}var ad=function(t,e){this.progress=t,this.gs=e},ud="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cd=function(){function t(){this.Vs=[]}return t.prototype.ps=function(t){this.Vs.push(t)},t.prototype.bs=function(){this.Vs.forEach((function(t){return t()}))},t}();function ld(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=fd(e)),e=hd(t.get(n),e);return fd(e)}function hd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function fd(t){return t+"\x01\x01"}function dd(t){var e=t.length;if(lc(e>=2),2===e)return lc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Lc.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&cc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:cc()}o=s+2}return new Lc(r)}var pd=function(t,e){this.seconds=t,this.nanoseconds=e},yd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};yd.store="owner",yd.key="owner";var md=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};md.store="mutationQueues",md.keyPath="userId";var gd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};gd.store="mutations",gd.keyPath="batchId",gd.userMutationsIndex="userMutationsIndex",gd.userMutationsKeyPath=["userId","batchId"];var vd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ld(e)]},t.key=function(t,e,n){return[t,ld(e),n]},t}();vd.store="documentMutations",vd.PLACEHOLDER=new vd;var bd=function(t,e){this.path=t,this.readTime=e},_d=function(t,e){this.path=t,this.version=e},wd=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};wd.store="remoteDocuments",wd.readTimeIndex="readTimeIndex",wd.readTimeIndexPath="readTime",wd.collectionReadTimeIndex="collectionReadTimeIndex",wd.collectionReadTimeIndexPath=["parentPath","readTime"];var Ed=function(t){this.byteSize=t};Ed.store="remoteDocumentGlobal",Ed.key="remoteDocumentGlobalKey";var Cd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Cd.store="targets",Cd.keyPath="targetId",Cd.queryTargetsIndexName="queryTargetsIndex",Cd.queryTargetsKeyPath=["canonicalId","targetId"];var Sd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Sd.store="targetDocuments",Sd.keyPath=["targetId","path"],Sd.documentTargetsIndex="documentTargetsIndex",Sd.documentTargetsKeyPath=["path","targetId"];var Td=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Td.key="targetGlobalKey",Td.store="targetGlobal";var Od=function(t,e){this.collectionId=t,this.parent=e};Od.store="collectionParents",Od.keyPath=["collectionId","parent"];var Id=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Id.store="clientMetadata",Id.keyPath="clientId";var xd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};xd.store="bundles",xd.keyPath="bundleId";var Ad=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ad.store="namedQueries",Ad.keyPath="name";var jd=Object(nc.g)(Object(nc.g)(Object(nc.g)(Object(nc.g)([md.store,gd.store,vd.store,wd.store,Cd.store,yd.store,Td.store,Sd.store],[Id.store]),[Ed.store]),[Od.store]),[xd.store,Ad.store]),Nd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).vs=e,r.Ss=n,r}return Object(nc.c)(e,t),e}(cd);function kd(t,e){var n=hc(t);return Zf.Hn(n.vs,e)}var Dd=function(){function t(t,e,n,r){this.batchId=t,this.Ds=e,this.baseMutations=n,this.mutations=r}return t.prototype.Cs=function(t,e,n){for(var r=n.xs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ch(o,e,r[i]))}return e},t.prototype.Ns=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Sh(i,e,e,this.Ds))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Sh(u,e,o,this.Ds))}return e},t.prototype.Fs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Ns(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),tf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&yc(this.mutations,t.mutations,(function(t,e){return Oh(t,e)}))&&yc(this.baseMutations,t.baseMutations,(function(t,e){return Oh(t,e)}))},t}(),Pd=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.xs=n,this.ks=r}return t.from=function(e,n,r){lc(e.mutations.length===r.length);for(var i=Jh(),o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Rd=function(t){this.Ms=t};function Md(t,e){if(e.document)return kf(t.Ms,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Uc.Tt(e.noDocument.path),r=qd(e.noDocument.readTime);return new gl(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Uc.Tt(e.unknownDocument.path);return r=qd(e.unknownDocument.version),new vl(i,r)}return cc()}function Ld(t,e,n){var r=Fd(n),i=e.key.path.Z().rt();if(e instanceof ml){var o=function(t,e){return{name:Tf(t,e.key),fields:e.vt().mapValue.fields,updateTime:bf(t,e.version.G())}}(t.Ms,e),s=e.hasCommittedMutations;return new wd(null,null,o,s,r,i)}if(e instanceof gl){var a=e.key.path.rt(),u=Ud(e.version);return s=e.hasCommittedMutations,new wd(null,new bd(a,u),null,s,r,i)}if(e instanceof vl){var c=e.key.path.rt(),l=Ud(e.version);return new wd(new _d(c,l),null,null,!0,r,i)}return cc()}function Fd(t){var e=t.G();return[e.seconds,e.nanoseconds]}function Vd(t){var e=new Pc(t[0],t[1]);return Rc.W(e)}function Ud(t){var e=t.G();return new pd(e.seconds,e.nanoseconds)}function qd(t){var e=new Pc(t.seconds,t.nanoseconds);return Rc.W(e)}function Hd(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Pf(t.Ms,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return Pf(t.Ms,e)})),s=Pc.fromMillis(e.localWriteTimeMs);return new Dd(e.batchId,s,n,o)}function zd(t){var e,n,r=qd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?qd(t.lastLimboFreeSnapshotVersion):Rc.min();return void 0!==t.query.documents?(lc(1===(n=t.query).documents.length),e=$l(ql(xf(n.documents[0])))):e=function(t){return $l(Lf(t))}(t.query),new nh(e,t.targetId,0,t.lastListenSequenceNumber,r,i,gc.fromBase64String(t.resumeToken))}function Bd(t,e){var n,r=Ud(e.Mt),i=Ud(e.lastLimboFreeSnapshotVersion);n=Cl(e.target)?Rf(t.Ms,e.target):Mf(t.Ms,e.target);var o=e.resumeToken.toBase64();return new Cd(e.targetId,wl(e.target),r,o,e.sequenceNumber,i,n)}function Gd(t){var e=Lf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ql(e,e.limit,"L"):e}var Wd=function(){function t(){}return t.prototype.Ls=function(t,e){return Kd(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:qd(e.createTime),version:e.version};var e}))},t.prototype.$s=function(t,e){return Kd(t).put({bundleId:(n=e).id,createTime:Ud(Ef(n.createTime)),version:n.version});var n},t.prototype.Bs=function(t,e){return $d(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Gd(e.bundledQuery),readTime:qd(e.readTime)};var e}))},t.prototype.qs=function(t,e){return $d(t).put(function(t){return{name:t.name,readTime:Ud(Ef(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Kd(t){return kd(t,xd.store)}function $d(t){return kd(t,Ad.store)}var Qd=function(){function t(){this.Us=new Yd}return t.prototype.Qs=function(t,e){return this.Us.add(e),Qf.resolve()},t.prototype.Ks=function(t,e){return Qf.resolve(this.Us.getEntries(e))},t}(),Yd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new Bh(Lc.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Bh(Lc.J)).rt()},t}(),Zd=function(){function t(){this.Ws=new Yd}return t.prototype.Qs=function(t,e){var n=this;if(!this.Ws.has(e)){var r=e.et(),i=e.Z();t.ps((function(){n.Ws.add(e)}));var o={collectionId:r,parent:ld(i)};return Jd(t).put(o)}return Qf.resolve()},t.prototype.Ks=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[mc(e),""],!1,!0);return Jd(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(dd(o.parent))}return n}))},t}();function Jd(t){return kd(t,Od.store)}var Xd={js:!1,Gs:0,zs:0,Hs:0},tp=function(){function t(t,e,n){this.Js=t,this.Ys=e,this.Xs=n}return t.Zs=function(e){return new t(e,t.ti,t.ei)},t}();function ep(t){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){if(t.code!==vc.FAILED_PRECONDITION||t.message!==ud)throw t;return oc("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}tp.ti=10,tp.ei=1e3,tp.ni=new tp(41943040,tp.ti,tp.ei),tp.si=new tp(-1,0,0);var np=function(){function t(t,e){this.ii=t,this.ri=e,this.oi={}}return t.prototype.get=function(t){var e=this.ii(t),n=this.oi[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.ri(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ii(t),r=this.oi[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ri(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.oi[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ii(t),n=this.oi[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ri(n[r][0],t))return 1===n.length?delete this.oi[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Hc(this.oi,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.nt=function(){return zc(this.oi)},t}(),rp=function(){function t(){this.ci=new np((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ai=!1}return t.prototype.ui=function(t){var e=this.ci.get(t);return e?e.readTime:Rc.min()},t.prototype.hi=function(t,e){this.li(),this.ci.set(t.key,{_i:t,readTime:e})},t.prototype.fi=function(t,e){void 0===e&&(e=null),this.li(),this.ci.set(t,{_i:null,readTime:e})},t.prototype.di=function(t,e){this.li();var n=this.ci.get(e);return void 0!==n?Qf.resolve(n._i):this.wi(t,e)},t.prototype.getEntries=function(t,e){return this.Ei(t,e)},t.prototype.apply=function(t){return this.li(),this.ai=!0,this.Ti(t)},t.prototype.li=function(){},t}();function ip(t,e,n){var r=t.store(gd.store),i=t.store(vd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ls({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){lc(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=vd.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Qf.$n(o).next((function(){return c}))}function op(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw cc();e=t.noDocument}return JSON.stringify(e).length}var sp=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ii=n,this.mi=r,this.Ai={}}return t.Ri=function(e,n,r,i){return lc(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Pi=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return up(t).ls({index:gd.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.yi=function(t,e,n,r){var i=this,o=cp(t),s=up(t);return s.add({}).next((function(a){lc("number"==typeof a);for(var u=new Dd(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Df(t.Ms,e)})),i=n.mutations.map((function(e){return Df(t.Ms,e)}));return new gd(e,n.batchId,n.Ds.toMillis(),r,i)}(i.Kt,i.userId,u),l=[],h=new Bh((function(t,e){return pc(t.ot(),e.ot())})),f=0,d=r;f<d.length;f++){var p=d[f],y=vd.key(i.userId,p.key.path,a);h=h.add(p.key.path.Z()),l.push(s.put(c)),l.push(o.put(y,vd.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ii.Qs(t,e))})),t.ps((function(){i.Ai[a]=u.keys()})),Qf.$n(l).next((function(){return u}))}))},t.prototype.gi=function(t,e){var n=this;return up(t).get(e).next((function(t){return t?(lc(t.userId===n.userId),Hd(n.Kt,t)):null}))},t.prototype.Vi=function(t,e){var n=this;return this.Ai[e]?Qf.resolve(this.Ai[e]):this.gi(t,e).next((function(t){if(t){var r=t.keys();return n.Ai[e]=r,r}return null}))},t.prototype.pi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return up(t).ls({index:gd.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(lc(e.batchId>=r),o=Hd(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.bi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return up(t).ls({index:gd.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return up(t).os(gd.userMutationsIndex,n).next((function(t){return t.map((function(t){return Hd(e.Kt,t)}))}))},t.prototype.Si=function(t,e){var n=this,r=vd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return cp(t).ls({range:i},(function(r,i,s){var a=r[0],u=r[2],c=dd(r[1]);if(a===n.userId&&e.path.isEqual(c))return up(t).get(u).next((function(t){if(!t)throw cc();lc(t.userId===n.userId),o.push(Hd(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Di=function(t,e){var n=this,r=new Bh(pc),i=[];return e.forEach((function(e){var o=vd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=cp(t).ls({range:s},(function(t,i,o){var s=t[0],a=t[2],u=dd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Qf.$n(i).next((function(){return n.Ci(t,r)}))},t.prototype.xi=function(t,e){var n=this,r=e.path,i=r.length+1,o=vd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Bh(pc);return cp(t).ls({range:s},(function(t,e,o){var s=t[0],u=t[2],c=dd(t[1]);s===n.userId&&r.st(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Ci(t,a)}))},t.prototype.Ci=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(up(t).get(e).next((function(t){if(null===t)throw cc();lc(t.userId===n.userId),r.push(Hd(n.Kt,t))})))})),Qf.$n(i).next((function(){return r}))},t.prototype.Ni=function(t,e){var n=this;return ip(t.vs,this.userId,e).next((function(r){return t.ps((function(){n.Fi(e.batchId)})),Qf.forEach(r,(function(e){return n.mi.Oi(t,e)}))}))},t.prototype.Fi=function(t){delete this.Ai[t]},t.prototype.ki=function(t){var e=this;return this.Pi(t).next((function(n){if(!n)return Qf.resolve();var r=IDBKeyRange.lowerBound(vd.prefixForUser(e.userId)),i=[];return cp(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=dd(t[1]);i.push(o)}else r.done()})).next((function(){lc(0===i.length)}))}))},t.prototype.Mi=function(t,e){return ap(t,this.userId,e)},t.prototype.Li=function(t){var e=this;return lp(t).get(this.userId).next((function(t){return t||new md(e.userId,-1,"")}))},t}();function ap(t,e,n){var r=vd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return cp(t).ls({range:o,hs:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function up(t){return kd(t,gd.store)}function cp(t){return kd(t,vd.store)}function lp(t){return kd(t,md.store)}var hp=function(){function t(t){this.$i=t}return t.prototype.next=function(){return this.$i+=2,this.$i},t.Bi=function(){return new t(0)},t.qi=function(){return new t(-1)},t}(),fp=function(){function t(t,e){this.mi=t,this.Kt=e}return t.prototype.Ui=function(t){var e=this;return this.Qi(t).next((function(n){var r=new hp(n.highestTargetId);return n.highestTargetId=r.next(),e.Ki(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wi=function(t){return this.Qi(t).next((function(t){return Rc.W(new Pc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ji=function(t){return this.Qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Gi=function(t,e,n){var r=this;return this.Qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ki(t,i)}))},t.prototype.zi=function(t,e){var n=this;return this.Hi(t,e).next((function(){return n.Qi(t).next((function(r){return r.targetCount+=1,n.Ji(e,r),n.Ki(t,r)}))}))},t.prototype.Yi=function(t,e){return this.Hi(t,e)},t.prototype.Xi=function(t,e){var n=this;return this.Zi(t,e.targetId).next((function(){return dp(t).delete(e.targetId)})).next((function(){return n.Qi(t)})).next((function(e){return lc(e.targetCount>0),e.targetCount-=1,n.Ki(t,e)}))},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return dp(t).ls((function(s,a){var u=zd(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Xi(t,u)))})).next((function(){return Qf.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return dp(t).ls((function(t,n){var r=zd(n);e(r)}))},t.prototype.Qi=function(t){return pp(t).get(Td.key).next((function(t){return lc(null!==t),t}))},t.prototype.Ki=function(t,e){return pp(t).put(Td.key,e)},t.prototype.Hi=function(t,e){return dp(t).put(Bd(this.Kt,e))},t.prototype.Ji=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.er=function(t){return this.Qi(t).next((function(t){return t.targetCount}))},t.prototype.nr=function(t,e){var n=wl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return dp(t).ls({range:r,index:Cd.queryTargetsIndexName},(function(t,n,r){var o=zd(n);El(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.sr=function(t,e,n){var r=this,i=[],o=yp(t);return e.forEach((function(e){var s=ld(e.path);i.push(o.put(new Sd(n,s))),i.push(r.mi.ir(t,n,e))})),Qf.$n(i)},t.prototype.rr=function(t,e,n){var r=this,i=yp(t);return Qf.forEach(e,(function(e){var o=ld(e.path);return Qf.$n([i.delete([n,o]),r.mi.cr(t,n,e)])}))},t.prototype.Zi=function(t,e){var n=yp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ar=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=yp(t),i=tf();return r.ls({range:n,hs:!0},(function(t,e,n){var r=dd(t[1]),o=new Uc(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=ld(e.path),r=IDBKeyRange.bound([n],[mc(n)],!1,!0),i=0;return yp(t).ls({index:Sd.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return dp(t).get(e).next((function(t){return t?zd(t):null}))},t}();function dp(t){return kd(t,Cd.store)}function pp(t){return kd(t,Td.store)}function yp(t){return kd(t,Sd.store)}function mp(t,e){var n=t[1],r=e[1],i=pc(t[0],e[0]);return 0===i?pc(n,r):i}var gp=function(){function t(t){this.ur=t,this.buffer=new Bh(mp),this.hr=0}return t.prototype.lr=function(){return++this.hr},t.prototype._r=function(t){var e=[t,this.lr()];if(this.buffer.size<this.ur)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();mp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),vp=function(){function t(t,e){this.dr=t,this.fs=e,this.wr=!1,this.Er=null}return t.prototype.start=function(t){-1!==this.dr.params.Js&&this.Tr(t)},t.prototype.stop=function(){this.Er&&(this.Er.cancel(),this.Er=null)},Object.defineProperty(t.prototype,"Ir",{get:function(){return null!==this.Er},enumerable:!1,configurable:!0}),t.prototype.Tr=function(t){var e=this,n=this.wr?3e5:6e4;oc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Er=this.fs.mr("lru_garbage_collection",n,(function(){return Object(nc.b)(e,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:this.Er=null,this.wr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ar(this.dr)];case 2:return n.sent(),[3,7];case 3:return td(e=n.sent())?(oc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ep(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Tr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),bp=function(){function t(t,e){this.Rr=t,this.params=e}return t.prototype.Pr=function(t,e){return this.Rr.yr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.gr=function(t,e){var n=this;if(0===e)return Qf.resolve(Dc.U);var r=new gp(e);return this.Rr.mn(t,(function(t){return r._r(t.sequenceNumber)})).next((function(){return n.Rr.Vr(t,(function(t){return r._r(t)}))})).next((function(){return r.maxValue}))},t.prototype.tr=function(t,e,n){return this.Rr.tr(t,e,n)},t.prototype.pr=function(t,e){return this.Rr.pr(t,e)},t.prototype.br=function(t,e){var n=this;return-1===this.params.Js?(oc("LruGarbageCollector","Garbage collection skipped; disabled"),Qf.resolve(Xd)):this.vr(t).next((function(r){return r<n.params.Js?(oc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Js),Xd):n.Sr(t,e)}))},t.prototype.vr=function(t){return this.Rr.vr(t)},t.prototype.Sr=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Pr(t,this.params.Ys).next((function(e){return e>c.params.Xs?(oc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Xs+" from "+e),r=c.params.Xs):r=e,o=Date.now(),c.gr(t,r)})).next((function(r){return n=r,s=Date.now(),c.tr(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.pr(t,n)})).next((function(t){return u=Date.now(),ic()<=to.a.DEBUG&&oc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Qf.resolve({js:!0,Gs:r,zs:i,Hs:t})}))},t}(),_p=function(){function t(t,e){this.db=t,this.dr=function(t,e){return new bp(t,e)}(this,e)}return t.prototype.yr=function(t){var e=this.Dr(t);return this.db.Cr().er(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Dr=function(t){var e=0;return this.Vr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Cr().mn(t,e)},t.prototype.Vr=function(t,e){return this.Nr(t,(function(t,n){return e(n)}))},t.prototype.ir=function(t,e,n){return wp(t,n)},t.prototype.cr=function(t,e,n){return wp(t,n)},t.prototype.tr=function(t,e,n){return this.db.Cr().tr(t,e,n)},t.prototype.Oi=function(t,e){return wp(t,e)},t.prototype.Fr=function(t,e){return function(t,e){var n=!1;return lp(t)._s((function(r){return ap(t,r,e).next((function(t){return t&&(n=!0),Qf.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.pr=function(t,e){var n=this,r=this.db.kr().Or(),i=[],o=0;return this.Nr(t,(function(s,a){if(a<=e){var u=n.Fr(t,s).next((function(e){if(!e)return o++,r.di(t,s).next((function(){return r.fi(s),yp(t).delete([0,ld(s.path)])}))}));i.push(u)}})).next((function(){return Qf.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.Ss);return this.db.Cr().Yi(t,n)},t.prototype.Mr=function(t,e){return wp(t,e)},t.prototype.Nr=function(t,e){var n,r=yp(t),i=Dc.U;return r.ls({index:Sd.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Dc.U&&e(new Uc(dd(n)),i),i=s,n=o):i=Dc.U})).next((function(){i!==Dc.U&&e(new Uc(dd(n)),i)}))},t.prototype.vr=function(t){return this.db.kr().Lr(t)},t}();function wp(t,e){return yp(t).put(function(t,e){return new Sd(0,ld(t.path),e)}(e,t.Ss))}var Ep=function(){function t(t,e){this.Kt=t,this.Ii=e}return t.prototype.hi=function(t,e,n){return Tp(t).put(Op(e),n)},t.prototype.fi=function(t,e){var n=Tp(t),r=Op(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.$r(t,r)}))},t.prototype.di=function(t,e){var n=this;return Tp(t).get(Op(e)).next((function(t){return n.Br(t)}))},t.prototype.qr=function(t,e){var n=this;return Tp(t).get(Op(e)).next((function(t){var e=n.Br(t);return e?{_i:e,size:op(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=$h();return this.Ur(t,e,(function(t,e){var i=n.Br(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Qr=function(t,e){var n=this,r=$h(),i=new qh(Uc.J);return this.Ur(t,e,(function(t,e){var o=n.Br(e);o?(r=r.Ht(t,o),i=i.Ht(t,op(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Kr:r,Wr:i}}))},t.prototype.Ur=function(t,e,n){if(e.nt())return Qf.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return Tp(t).ls({range:r},(function(t,e,r){for(var s=Uc.Tt(t);o&&Uc.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.jr=function(t,e,n){var r=this,i=Yh(),o=e.path.length+1,s={};if(n.isEqual(Rc.min())){var a=e.path.rt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.rt(),c=Fd(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=wd.collectionReadTimeIndex}return Tp(t).ls(s,(function(t,n,s){if(t.length===o){var a=Md(r.Kt,n);e.path.st(a.key.path)?a instanceof ml&&Xl(e,a)&&(i=i.Ht(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Or=function(t){return new Cp(this,!!t&&t.Gr)},t.prototype.Lr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Sp(t).get(Ed.key).next((function(t){return lc(!!t),t}))},t.prototype.$r=function(t,e){return Sp(t).put(Ed.key,e)},t.prototype.Br=function(t){if(t){var e=Md(this.Kt,t);return e instanceof gl&&e.version.isEqual(Rc.min())?null:e}return null},t}(),Cp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zr=e,r.Gr=n,r.Hr=new np((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(nc.c)(e,t),e.prototype.Ti=function(t){var e=this,n=[],r=0,i=new Bh((function(t,e){return pc(t.ot(),e.ot())}));return this.ci.forEach((function(o,s){var a=e.Hr.get(o);if(s._i){var u=Ld(e.zr.Kt,s._i,e.ui(o));i=i.add(o.path.Z());var c=op(u);r+=c-a,n.push(e.zr.hi(t,o,u))}else if(r-=a,e.Gr){var l=Ld(e.zr.Kt,new gl(o,Rc.min()),e.ui(o));n.push(e.zr.hi(t,o,l))}else n.push(e.zr.fi(t,o))})),i.forEach((function(r){n.push(e.zr.Ii.Qs(t,r))})),n.push(this.zr.updateMetadata(t,r)),Qf.$n(n)},e.prototype.wi=function(t,e){var n=this;return this.zr.qr(t,e).next((function(t){return null===t?(n.Hr.set(e,0),null):(n.Hr.set(e,t.size),t._i)}))},e.prototype.Ei=function(t,e){var n=this;return this.zr.Qr(t,e).next((function(t){var e=t.Kr;return t.Wr.forEach((function(t,e){n.Hr.set(t,e)})),e}))},e}(rp);function Sp(t){return kd(t,Ed.store)}function Tp(t){return kd(t,wd.store)}function Op(t){return t.path.rt()}var Ip=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;lc(n<r&&n>=0&&r<=11);var o=new Yf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(yd.store)}(t),function(t){t.createObjectStore(md.store,{keyPath:md.keyPath}),t.createObjectStore(gd.store,{keyPath:gd.keyPath,autoIncrement:!0}).createIndex(gd.userMutationsIndex,gd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(vd.store)}(t),xp(t),function(t){t.createObjectStore(wd.store)}(t));var s=Qf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Sd.store),t.deleteObjectStore(Cd.store),t.deleteObjectStore(Td.store)}(t),xp(t)),s=s.next((function(){return function(t){var e=t.store(Td.store),n=new Td(0,0,Rc.min().G(),0);return e.put(Td.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(gd.store).os().next((function(n){t.deleteObjectStore(gd.store),t.createObjectStore(gd.store,{keyPath:gd.keyPath,autoIncrement:!0}).createIndex(gd.userMutationsIndex,gd.userMutationsKeyPath,{unique:!0});var r=e.store(gd.store),i=n.map((function(t){return r.put(t)}));return Qf.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Id.store,{keyPath:Id.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Jr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Ed.store)}(t),i.Yr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Xr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Zr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(wd.store);e.createIndex(wd.readTimeIndex,wd.readTimeIndexPath,{unique:!1}),e.createIndex(wd.collectionReadTimeIndex,wd.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.eo(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(xd.store,{keyPath:xd.keyPath})}(t),function(t){t.createObjectStore(Ad.store,{keyPath:Ad.keyPath})}(t)}))),s},t.prototype.Yr=function(t){var e=0;return t.store(wd.store).ls((function(t,n){e+=op(n)})).next((function(){var n=new Ed(e);return t.store(Ed.store).put(Ed.key,n)}))},t.prototype.Jr=function(t){var e=this,n=t.store(md.store),r=t.store(gd.store);return n.os().next((function(n){return Qf.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(gd.userMutationsIndex,i).next((function(r){return Qf.forEach(r,(function(r){lc(r.userId===n.userId);var i=Hd(e.Kt,r);return ip(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Xr=function(t){var e=t.store(Sd.store),n=t.store(wd.store);return t.store(Td.store).get(Td.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new Lc(n),s=function(t){return[0,ld(t)]}(o);r.push(e.get(s).next((function(n){return n?Qf.resolve():function(n){return e.put(new Sd(0,ld(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Qf.$n(r)}))}))},t.prototype.Zr=function(t,e){t.createObjectStore(Od.store,{keyPath:Od.keyPath});var n=e.store(Od.store),r=new Yd,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:ld(i)})}};return e.store(wd.store).ls({hs:!0},(function(t,e){var n=new Lc(t);return i(n.Z())})).next((function(){return e.store(vd.store).ls({hs:!0},(function(t,e){var n=dd(t[1]);return i(n.Z())}))}))},t.prototype.eo=function(t){var e=this,n=t.store(Cd.store);return n.ls((function(t,r){var i=zd(r),o=Bd(e.Kt,i);return n.put(o)}))},t}();function xp(t){t.createObjectStore(Sd.store,{keyPath:Sd.keyPath}).createIndex(Sd.documentTargetsIndex,Sd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Cd.store,{keyPath:Cd.keyPath}).createIndex(Cd.queryTargetsIndexName,Cd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Td.store)}var Ap="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.no=o,this.window=s,this.document=a,this.so=c,this.io=l,this.ro=null,this.oo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.co=null,this.inForeground=!1,this.ao=null,this.uo=null,this.ho=Number.NEGATIVE_INFINITY,this.lo=function(t){return Promise.resolve()},!t.Wn())throw new bc(vc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.mi=new _p(this,i),this._o=n+"main",this.Kt=new Rd(u),this.fo=new Zf(this._o,11,new Ip(this.Kt)),this.wo=new fp(this.mi,this.Kt),this.Ii=new Zd,this.Eo=function(t,e){return new Ep(t,e)}(this.Kt,this.Ii),this.To=new Wd,this.window&&this.window.localStorage?this.Io=this.window.localStorage:(this.Io=null,!1===l&&sc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.mo().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new bc(vc.FAILED_PRECONDITION,Ap);return t.Ao(),t.Ro(),t.Po(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.wo.ji(e)}))})).then((function(e){t.ro=new Dc(e,t.so)})).then((function(){t.oo=!0})).catch((function(e){return t.fo&&t.fo.close(),Promise.reject(e)}))},t.prototype.yo=function(t){var e=this;return this.lo=function(n){return Object(nc.b)(e,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){return this.Ir?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Vo=function(t){var e=this;this.fo.Zn((function(n){return Object(nc.b)(e,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.po=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.no.ys((function(){return Object(nc.b)(e,void 0,void 0,(function(){return Object(nc.d)(this,(function(t){switch(t.label){case 0:return this.Ir?[4,this.mo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.mo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return kp(e).put(new Id(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.bo(e).next((function(e){e||(t.isPrimary=!1,t.no.vo((function(){return t.lo(!1)})))}))})).next((function(){return t.So(e)})).next((function(n){return t.isPrimary&&!n?t.Do(e).next((function(){return!1})):!!n&&t.Co(e).next((function(){return!0}))}))})).catch((function(e){if(td(e))return oc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return oc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.no.vo((function(){return t.lo(e)})),t.isPrimary=e}))},t.prototype.bo=function(t){var e=this;return Np(t).get(yd.key).next((function(t){return Qf.resolve(e.xo(t))}))},t.prototype.No=function(t){return kp(t).delete(this.clientId)},t.prototype.Fo=function(){return Object(nc.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.Oo(this.ho,18e5)?[3,2]:(this.ho=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=kd(t,Id.store);return e.os().next((function(t){var n=r.ko(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Qf.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Io)for(e=0,n=t;e<n.length;e++)this.Io.removeItem(this.Mo(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Po=function(){var t=this;this.uo=this.no.mr("client_metadata_refresh",4e3,(function(){return t.mo().then((function(){return t.Fo()})).then((function(){return t.Po()}))}))},t.prototype.xo=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.So=function(t){var e=this;return this.io?Qf.resolve(!0):Np(t).get(yd.key).next((function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Lo(n.ownerId)){if(e.xo(n)&&e.networkEnabled)return!0;if(!e.xo(n)){if(!n.allowTabSynchronization)throw new bc(vc.FAILED_PRECONDITION,Ap);return!1}}return!(!e.networkEnabled||!e.inForeground)||kp(t).os().next((function(t){return void 0===e.ko(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&oc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$o=function(){return Object(nc.b)(this,void 0,void 0,(function(){var t=this;return Object(nc.d)(this,(function(e){switch(e.label){case 0:return this.oo=!1,this.Bo(),this.uo&&(this.uo.cancel(),this.uo=null),this.qo(),this.Uo(),[4,this.fo.runTransaction("shutdown","readwrite",[yd.store,Id.store],(function(e){var n=new Nd(e,Dc.U);return t.Do(n).next((function(){return t.No(n)}))}))];case 1:return e.sent(),this.fo.close(),this.Qo(),[2]}}))}))},t.prototype.ko=function(t,e){var n=this;return t.filter((function(t){return n.Oo(t.updateTimeMs,e)&&!n.Lo(t.clientId)}))},t.prototype.Ko=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return kp(e).os().next((function(e){return t.ko(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Wo=function(t){return sp.Ri(t,this.Kt,this.Ii,this.mi)},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.jo=function(){return this.Ii},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r,i=this;return oc("IndexedDbPersistence","Starting transaction:",t),this.fo.runTransaction(t,"readonly"===e?"readonly":"readwrite",jd,(function(o){return r=new Nd(o,i.ro?i.ro.next():Dc.U),"readwrite-primary"===e?i.bo(r).next((function(t){return!!t||i.So(r)})).next((function(e){if(!e)throw sc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.no.vo((function(){return i.lo(!1)})),new bc(vc.FAILED_PRECONDITION,ud);return n(r)})).next((function(t){return i.Co(r).next((function(){return t}))})):i.zo(r).next((function(){return n(r)}))})).then((function(t){return r.bs(),t}))},t.prototype.zo=function(t){var e=this;return Np(t).get(yd.key).next((function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Lo(t.ownerId)&&!e.xo(t)&&!(e.io||e.allowTabSynchronization&&t.allowTabSynchronization))throw new bc(vc.FAILED_PRECONDITION,Ap)}))},t.prototype.Co=function(t){var e=new yd(this.clientId,this.allowTabSynchronization,Date.now());return Np(t).put(yd.key,e)},t.Wn=function(){return Zf.Wn()},t.prototype.Do=function(t){var e=this,n=Np(t);return n.get(yd.key).next((function(t){return e.xo(t)?(oc("IndexedDbPersistence","Releasing primary lease."),n.delete(yd.key)):Qf.resolve()}))},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(sc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ao=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ao=function(){t.no.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.mo()}))},this.document.addEventListener("visibilitychange",this.ao),this.inForeground="visible"===this.document.visibilityState)},t.prototype.qo=function(){this.ao&&(this.document.removeEventListener("visibilitychange",this.ao),this.ao=null)},t.prototype.Ro=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.co=function(){e.Bo(),e.no.ys((function(){return e.$o()}))},this.window.addEventListener("unload",this.co))},t.prototype.Uo=function(){this.co&&(this.window.removeEventListener("unload",this.co),this.co=null)},t.prototype.Lo=function(t){var e;try{var n=null!==(null===(e=this.Io)||void 0===e?void 0:e.getItem(this.Mo(t)));return oc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return sc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Bo=function(){if(this.Io)try{this.Io.setItem(this.Mo(this.clientId),String(Date.now()))}catch(t){sc("Failed to set zombie client id.",t)}},t.prototype.Qo=function(){if(this.Io)try{this.Io.removeItem(this.Mo(this.clientId))}catch(t){}},t.prototype.Mo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Np(t){return kd(t,yd.store)}function kp(t){return kd(t,Id.store)}function Dp(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Pp=function(){function t(t,e,n){this.Eo=t,this.Ho=e,this.Ii=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.Eo.di(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Ns(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=$h();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Ns(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.Eo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Di(t,e).next((function(r){var i=n.Xo(t,e,r),o=Kh();return i.forEach((function(t,e){e||(e=new gl(t,Rc.min())),o=o.Ht(t,e)})),o}))},t.prototype.jr=function(t,e,n){return function(t){return Uc.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):Wl(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new Uc(e)).next((function(t){var e=Yh();return t instanceof ml&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=Yh();return this.Ii.Ks(t,i).next((function(s){return Qf.forEach(s,(function(s){var a=function(t,e){return new Vl(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.Eo.jr(t,e,n).next((function(n){return r=n,o.Ho.xi(t,e)})).next((function(e){return o.ic(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=Sh(u,l,l,o.Ds);r=h instanceof ml?r.Ht(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Xl(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=tf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ah&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Eo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ml&&(c=c.Ht(t,e))})),c}))},t}(),Rp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=tf(),i=tf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Mp=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(Rc.min())?this.hc(t,e):this.uc.Zo(t,r).next((function(o){var s=i.lc(e,o);return(Hl(e)||zl(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(ic()<=to.a.DEBUG&&oc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Jl(e)),i.uc.jr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new Bh(th(t));return e.forEach((function(e,r){r instanceof ml&&Xl(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return ic()<=to.a.DEBUG&&oc("QueryEngine","Using full collection scan to execute query:",Jl(e)),this.uc.jr(t,e,Rc.min())},t}(),Lp=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new qh(pc),this.wc=new np((function(t){return wl(t)}),El),this.Ec=Rc.min(),this.Ho=t.Wo(n),this.Tc=t.kr(),this.wo=t.Cr(),this.Ic=new Pp(this.Tc,this.Ho,this.persistence.jo()),this.To=t.Go(),this.fc.ac(this.Ic)}return t.prototype.Ar=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.br(n,e.dc)}))},t}();function Fp(t,e,n,r){return new Lp(t,e,n,r)}function Vp(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(nc.d)(this,(function(s){switch(s.label){case 0:return n=hc(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.vi(t).next((function(s){return o=s,r=n.persistence.Wo(e),i=new Pp(n.Tc,r,n.persistence.jo()),r.vi(t)})).next((function(e){for(var n=[],r=[],s=tf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var y=0,m=p.mutations;y<m.length;y++)s=s.add(m[y].key)}return i.Zo(t,s).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}}))}))}function Up(t,e){var n=hc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Or({Gr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Qf.resolve();return o.forEach((function(t){s=s.next((function(){return r.di(e,t)})).next((function(e){var o=e,s=n.ks.get(t);lc(null!==s),(!o||o.version.u(s)<0)&&(o=i.Cs(t,o,n))&&r.hi(o,n.Os)}))})),s.next((function(){return t.Ho.Ni(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function qp(t){var e=hc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.wo.Wi(t)}))}function Hp(t,e){var n=hc(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Or({Gr:!0});i=n.dc;var s=[];e.Oe.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.wo.rr(t,e.Ke,o).next((function(){return n.wo.sr(t,e.Ue,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.$t(u,r).Lt(t.Ss);i=i.Ht(o,c),function(t,e,n){return lc(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(a,c,e)&&s.push(n.wo.Yi(t,c))}}}));var a=Kh();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.mi.Mr(t,r))})),s.push(zp(t,o,e.Me,r,void 0).next((function(t){a=t}))),!r.isEqual(Rc.min())){var u=n.wo.Wi(t).next((function(e){return n.wo.Gi(t,t.Ss,r)}));s.push(u)}return Qf.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,a)}))})).then((function(t){return n.dc=i,t}))}function zp(t,e,n,r,i){var o=tf();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Kh();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof gl&&s.version.isEqual(Rc.min())?(e.fi(n,u),o=o.Ht(n,s)):null==a||s.version.u(a.version)>0||0===s.version.u(a.version)&&a.hasPendingWrites?(e.hi(s,u),o=o.Ht(n,s)):oc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Bp(t,e){var n=hc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.pi(t,e)}))}function Gp(t,e){var n=hc(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.wo.nr(t,e).next((function(i){return i?Qf.resolve(r=i):n.wo.Ui(t).next((function(i){return r=new nh(e,i,0,t.Ss),n.wo.zi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function Wp(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(nc.d)(this,(function(a){switch(a.label){case 0:r=hc(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.mi.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!td(s=a.sent()))throw s;return oc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function Kp(t,e,n){var r=hc(t),i=Rc.min(),o=tf();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=hc(t),i=r.wc.get(n);return void 0!==i?Qf.resolve(r.dc.get(i)):r.wo.nr(e,n)}(r,t,$l(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.wo.ar(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.jr(t,e,n?i:Rc.min(),n?o:tf())})).next((function(t){return{documents:t,Pc:o}}))}))}function $p(t,e){var n=hc(t),r=hc(n.wo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function Qp(t){var e=hc(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=hc(t),i=Kh(),o=Fd(n),s=Tp(e),a=IDBKeyRange.lowerBound(o,!0);return s.ls({index:wd.readTimeIndex,range:a},(function(t,e){var n=Md(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{gs:i,readTime:Vd(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.gs;return e.Ec=t.readTime,n}))}function Yp(t){return Object(nc.b)(this,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){return[2,(e=hc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Tp(t),n=Rc.min();return e.ls({index:wd.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Vd(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}function Zp(t,e,n,r){return Object(nc.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f,d;return Object(nc.d)(this,(function(p){switch(p.label){case 0:for(i=hc(t),o=tf(),s=Kh(),a=Jh(),u=0,c=n;u<c.length;u++)h=e.yc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.Ht(h,e.gc(l)),a=a.Ht(h,e.Vc(l.metadata.readTime));return f=i.Tc.Or({Gr:!0}),[4,Gp(i,function(t){return $l(ql(Lc.ct("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return zp(t,f,s,Rc.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i.wo.Zi(t,d.targetId).next((function(){return i.wo.sr(t,o,d.targetId)})).next((function(){return i.Ic.tc(t,e)}))}))}))]}}))}))}function Jp(t,e,n){return void 0===n&&(n=tf()),Object(nc.b)(this,void 0,void 0,(function(){var r,i;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return[4,Gp(t,$l(Gd(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=hc(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Ef(e.readTime);if(r.Mt.u(o)>=0)return i.To.qs(t,e);var s=r.$t(gc.h,o);return i.dc=i.dc.Ht(s.targetId,s),i.wo.Yi(t,s).next((function(){return i.wo.Zi(t,r.targetId)})).next((function(){return i.wo.sr(t,n,r.targetId)})).next((function(){return i.To.qs(t,e)}))}))]}}))}))}var Xp=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ls=function(t,e){return Qf.resolve(this.bc.get(e))},t.prototype.$s=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:Ef(n.createTime)}),Qf.resolve()},t.prototype.Bs=function(t,e){return Qf.resolve(this.vc.get(e))},t.prototype.qs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:Gd(t.bundledQuery),readTime:Ef(t.readTime)}}(e)),Qf.resolve()},t}(),ty=function(){function t(){this.Sc=new Bh(ey.Dc),this.Cc=new Bh(ey.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.ir=function(t,e){var n=new ey(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.cr=function(t,e){this.Fc(new ey(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.cr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new Uc(new Lc([])),r=new ey(n,t),i=new ey(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Fc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Fc(e)}))},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new Uc(new Lc([])),n=new ey(e,t),r=new ey(e,t+1),i=tf();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new ey(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),ey=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return Uc.J(t.key,e.key)||pc(t.$c,e.$c)},t.xc=function(t,e){return pc(t.$c,e.$c)||Uc.J(t.key,e.key)},t}(),ny=function(){function t(t,e){this.Ii=t,this.mi=e,this.Ho=[],this.Bc=1,this.qc=new Bh(ey.Dc)}return t.prototype.Pi=function(t){return Qf.resolve(0===this.Ho.length)},t.prototype.yi=function(t,e,n,r){var i=this.Bc;this.Bc++;var o=new Dd(i,e,n,r);this.Ho.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.qc=this.qc.add(new ey(u.key,i)),this.Ii.Qs(t,u.key.path.Z())}return Qf.resolve(o)},t.prototype.gi=function(t,e){return Qf.resolve(this.Uc(e))},t.prototype.pi=function(t,e){var n=this.Qc(e+1),r=n<0?0:n;return Qf.resolve(this.Ho.length>r?this.Ho[r]:null)},t.prototype.bi=function(){return Qf.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.vi=function(t){return Qf.resolve(this.Ho.slice())},t.prototype.Si=function(t,e){var n=this,r=new ey(e,0),i=new ey(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),Qf.resolve(o)},t.prototype.Di=function(t,e){var n=this,r=new Bh(pc);return e.forEach((function(t){var e=new ey(t,0),i=new ey(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),Qf.resolve(this.Kc(r))},t.prototype.xi=function(t,e){var n=e.path,r=n.length+1,i=n;Uc.Et(i)||(i=i.child(""));var o=new ey(new Uc(i),0),s=new Bh(pc);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),Qf.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.Ni=function(t,e){var n=this;lc(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return Qf.forEach(e.mutations,(function(i){var o=new ey(i.key,e.batchId);return r=r.delete(o),n.mi.Oi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Fi=function(t){},t.prototype.Mi=function(t,e){var n=new ey(e,0),r=this.qc.Pe(n);return Qf.resolve(e.isEqual(r&&r.key))},t.prototype.ki=function(t){return Qf.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),ry=function(){function t(t,e){this.Ii=t,this.jc=e,this.docs=new qh(Uc.J),this.size=0}return t.prototype.hi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{_i:e,size:s,readTime:n}),this.size+=s-o,this.Ii.Qs(t,r.path.Z())},t.prototype.fi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.di=function(t,e){var n=this.docs.get(e);return Qf.resolve(n?n._i:null)},t.prototype.getEntries=function(t,e){var n=this,r=$h();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e._i:null)})),Qf.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=Yh(),i=new Uc(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),a=s.value,u=a._i,c=a.readTime;if(!e.path.st(s.key.path))break;c.u(n)<=0||u instanceof ml&&Xl(e,u)&&(r=r.Ht(u.key,u))}return Qf.resolve(r)},t.prototype.Gc=function(t,e){return Qf.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Or=function(t){return new iy(this)},t.prototype.Lr=function(t){return Qf.resolve(this.size)},t}(),iy=function(t){function e(e){var n=this;return(n=t.call(this)||this).zr=e,n}return Object(nc.c)(e,t),e.prototype.Ti=function(t){var e=this,n=[];return this.ci.forEach((function(r,i){i&&i._i?n.push(e.zr.hi(t,i._i,e.ui(r))):e.zr.fi(r)})),Qf.$n(n)},e.prototype.wi=function(t,e){return this.zr.di(t,e)},e.prototype.Ei=function(t,e){return this.zr.getEntries(t,e)},e}(rp),oy=function(){function t(t){this.persistence=t,this.zc=new np((function(t){return wl(t)}),El),this.lastRemoteSnapshotVersion=Rc.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new ty,this.targetCount=0,this.Yc=hp.Bi()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),Qf.resolve()},t.prototype.Wi=function(t){return Qf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return Qf.resolve(this.Hc)},t.prototype.Ui=function(t){return this.highestTargetId=this.Yc.next(),Qf.resolve(this.highestTargetId)},t.prototype.Gi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),Qf.resolve()},t.prototype.Hi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new hp(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.zi=function(t,e){return this.Hi(e),this.targetCount+=1,Qf.resolve()},t.prototype.Yi=function(t,e){return this.Hi(e),Qf.resolve()},t.prototype.Xi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,Qf.resolve()},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.zc.delete(s),o.push(r.Zi(t,a.targetId)),i++)})),Qf.$n(o).next((function(){return i}))},t.prototype.er=function(t){return Qf.resolve(this.targetCount)},t.prototype.nr=function(t,e){var n=this.zc.get(e)||null;return Qf.resolve(n)},t.prototype.sr=function(t,e,n){return this.Jc.Nc(e,n),Qf.resolve()},t.prototype.rr=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.mi,i=[];return r&&e.forEach((function(e){i.push(r.Oi(t,e))})),Qf.$n(i)},t.prototype.Zi=function(t,e){return this.Jc.kc(e),Qf.resolve()},t.prototype.ar=function(t,e){var n=this.Jc.Lc(e);return Qf.resolve(n)},t.prototype.Mi=function(t,e){return Qf.resolve(this.Jc.Mi(e))},t}(),sy=function(){function t(t,e){var n=this;this.Xc={},this.ro=new Dc(0),this.oo=!1,this.oo=!0,this.mi=t(this),this.wo=new oy(this),this.Ii=new Qd,this.Eo=function(t,e){return new ry(t,(function(t){return n.mi.Zc(t)}))}(this.Ii),this.Kt=new Rd(e),this.To=new Xp(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$o=function(){return this.oo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Vo=function(){},t.prototype.po=function(){},t.prototype.jo=function(){return this.Ii},t.prototype.Wo=function(t){var e=this.Xc[t.R()];return e||(e=new ny(this.Ii,this.mi),this.Xc[t.R()]=e),e},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;oc("MemoryPersistence","Starting transaction:",t);var i=new ay(this.ro.next());return this.mi.ta(),n(i).next((function(t){return r.mi.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.bs(),t}))},t.prototype.na=function(t,e){return Qf.Bn(Object.values(this.Xc).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),ay=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ss=e,n}return Object(nc.c)(e,t),e}(cd),uy=function(){function t(t){this.persistence=t,this.sa=new ty,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw cc()},enumerable:!1,configurable:!0}),t.prototype.ir=function(t,e,n){return this.sa.ir(n,e),this.oa.delete(n.toString()),Qf.resolve()},t.prototype.cr=function(t,e,n){return this.sa.cr(n,e),this.oa.add(n.toString()),Qf.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),Qf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Cr();return r.ar(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Xi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.kr().Or();return Qf.forEach(this.oa,(function(r){var i=Uc.ft(r);return e.ca(t,i).next((function(t){t||n.fi(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.Mr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return Qf.Bn([function(){return Qf.resolve(n.sa.Mi(e))},function(){return n.persistence.Cr().Mi(t,e)},function(){return n.persistence.na(t,e)}])},t}();function cy(t,e){return"firestore_clients_"+t+"_"+e}function ly(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function hy(t,e){return"firestore_targets_"+t+"_"+e}var fy=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new bc(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(sc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),dy=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new bc(r.error.code,r.error.message)),i?new t(e,r.state,o):(sc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),py=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=nf(),s=0;i&&s<r.activeTargetIds.length;++s)i=Xc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(sc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),yy=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(sc("SharedClientState","Failed to parse online state: "+e),null)},t}(),my=function(){function t(){this.activeTargetIds=nf()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),gy=function(){function t(t,e,n,r,i){this.window=t,this.no=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new qh(pc),this.Ir=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=cy(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new my),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(nc.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(nc.d)(this,(function(h){switch(h.label){case 0:return[4,this.fa.Ko()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(cy(this.persistenceKey,r)))&&(o=py.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(s=this.storage.getItem(this.ga))&&(a=this.ba(s))&&this.va(a),u=0,c=this.Ia;u<c.length;u++)this.Ea(c[u]);return this.Ia=[],this.window.addEventListener("unload",(function(){return l.$o()})),this.Ir=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(hy(this.persistenceKey,t));if(n){var r=dy.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(hy(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Oa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.$o=function(){this.Ir&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Ir=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return oc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){oc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){oc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(oc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void sc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.no.vo((function(){return Object(nc.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(nc.d)(this,(function(a){if(this.Ir){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(s=function(t){var e=Dc.U;if(null!=t)try{var n=JSON.parse(t);lc("number"==typeof n),e=n}catch(t){sc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Dc.U&&this.L(s);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new fy(this.currentUser,t,e,n),i=ly(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=ly(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){this.storage.setItem(this.ga,JSON.stringify({clientId:this._a,onlineState:t}))},t.prototype.Ua=function(t,e,n){var r=hy(this.persistenceKey,t),i=new dy(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return py.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return fy.aa(new Ic(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return dy.aa(r,e)},t.prototype.ba=function(t){return yy.aa(t)},t.prototype.Xa=function(t){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(oc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fa.iu(s,a).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=nf();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),vy=function(){function t(){this.ru=new my,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new my,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.$o=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),by=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.$o=function(){},t}(),_y=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.$o=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){oc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){oc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),wy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ey=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),Cy=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return Object(nc.c)(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var s=new ec;s.listenOnce(Ju.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Zu.NO_ERROR:var e=s.getResponseJson();oc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Zu.TIMEOUT:oc("Connection",'RPC "'+t+'" timed out'),o(new bc(vc.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:var n=s.getStatus();if(oc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(vc).indexOf(e)>=0?e:vc.UNKNOWN}(r.status);o(new bc(a,r.message))}else o(new bc(vc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new bc(vc.UNAVAILABLE,"Connection failed."));break;default:cc()}}finally{oc("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Wu,i=Qs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(o.initMessageHeaders,e),Object(eo.t)()||Object(eo.w)()||Object(eo.q)()||Object(eo.s)()||Object(eo.x)()||Object(eo.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");oc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Ey({du:function(t){c?oc("Connection","Not sending because WebChannel is closed:",t):(u||(oc("Connection","Opening WebChannel transport."),a.open(),u=!0),oc("Connection","WebChannel sending:",t),a.send(t))},wu:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,tc.EventType.OPEN,(function(){c||oc("Connection","WebChannel transport opened.")})),h(a,tc.EventType.CLOSE,(function(){c||(c=!0,oc("Connection","WebChannel transport closed"),l.Pu())})),h(a,tc.EventType.ERROR,(function(t){c||(c=!0,ac("Connection","WebChannel transport errored:",t),l.Pu(new bc(vc.UNAVAILABLE,"The operation could not be completed")))})),h(a,tc.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];lc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){oc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Ph[t];if(void 0!==e)return Uh(e)}(i),s=r.message;void 0===o&&(o=vc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Pu(new bc(o,s)),a.close()}else oc("Connection","WebChannel received:",n),l.yu(n)}})),h(i,Xu.STAT_EVENT,(function(t){10===t.stat?oc("Connection","Detected buffering proxy"):11===t.stat&&oc("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Ru()}),0),l},e}(function(){function t(t){this.gu=t,this.T=t.T,this.Vu=(t.ssl?"https":"http")+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);oc("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return oc("RestConnection","Received: ",t),t}),(function(e){throw ac("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.1",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){return this.Vu+"/v1/"+e+":"+wy[t]},t}());function Sy(){return"undefined"!=typeof window?window:null}function Ty(){return"undefined"!=typeof document?document:null}function Oy(t){return new vf(t,!0)}var Iy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.no=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&oc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.no.mr(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),xy=function(){function t(t,e,n,r,i,o){this.no=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new Iy(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.no.mr(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===vc.RESOURCE_EXHAUSTED?(sc(e.toString()),sc("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===vc.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then((function(e){t.ju===n&&t.rh(e)}),(function(n){e((function(){var e=new bc(vc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return Object(nc.b)(t,void 0,void 0,(function(){return Object(nc.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return oc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.no.ys((function(){return e.ju===t?n():(oc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ay=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return Object(nc.c)(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:cc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(lc(void 0===e||"string"==typeof e),gc.fromBase64String(e||"")):(lc(void 0===e||e instanceof Uint8Array),gc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?vc.UNKNOWN:Uh(t.code);return new bc(e,t.message||"")}(a);n=new hf(r,i,o,s||null)}else if("documentChange"in e){i=Of(t,(r=e.documentChange).document.name),o=Ef(r.document.updateTime);var a=new fl({mapValue:{fields:r.document.fields}}),u=(s=new ml(i,o,a,{}),r.targetIds||[]);n=new cf(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Of(t,(r=e.documentDelete).document),o=r.readTime?Ef(r.readTime):Rc.min(),a=new gl(i,o),n=new cf([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Of(t,(r=e.documentRemove).document),n=new cf([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return cc();var c=e.filter;i=new Fh(r=c.count||0),n=new lf(o=c.targetId,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return Rc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Rc.min():e.readTime?Ef(e.readTime):Rc.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=Af(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Cl(r)?{documents:Rf(t,r)}:{query:Mf(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=_f(t,e.resumeToken):e.Mt.u(Rc.min())>0&&(n.readTime=bf(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return cc()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=Af(this.Kt),e.removeTarget=t,this.eh(e)},e}(xy),jy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return Object(nc.c)(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(lc(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(lc(void 0!==e),t.map((function(t){return function(t,e){var n=Ef(t.updateTime?t.updateTime:e);n.isEqual(Rc.min())&&(n=Ef(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new bh(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ef(t.commitTime);return this.listener.wh(n,e)}return lc(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=Af(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Df(e.Kt,t)}))};this.eh(n)},e}(xy),Ny=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return Object(nc.c)(e,t),e.prototype.mh=function(){if(this.Ih)throw new bc(vc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===vc.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===vc.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),ky=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.mr("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(sc(e),this.Ph=!1):oc("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),Dy=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=i,this.kh.cu((function(t){n.ys((function(){return Object(nc.b)(o,void 0,void 0,(function(){return Object(nc.d)(this,(function(t){switch(t.label){case 0:return Hy(this)?(oc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(nc.b)(this,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:return(e=hc(t)).Fh.add(4),[4,Ry(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,Py(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new ky(n,r)};function Py(t){return Object(nc.b)(this,void 0,void 0,(function(){var e,n;return Object(nc.d)(this,(function(r){switch(r.label){case 0:if(!Hy(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Ry(t){return Object(nc.b)(this,void 0,void 0,(function(){var e,n;return Object(nc.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function My(t,e){var n=hc(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),qy(n)?Uy(n):rm(n).Ju()&&Fy(n,e))}function Ly(t,e){var n=hc(t),r=rm(n);n.Nh.delete(e),r.Ju()&&Vy(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():Hy(n)&&n.Mh.set("Unknown"))}function Fy(t,e){t.Lh.cn(e.targetId),rm(t).hh(e)}function Vy(t,e){t.Lh.cn(e),rm(t).lh(e)}function Uy(t){t.Lh=new df({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),rm(t).start(),t.Mh.yh()}function qy(t){return Hy(t)&&!rm(t).Hu()&&t.Nh.size>0}function Hy(t){return 0===hc(t).Fh.size}function zy(t){t.Lh=void 0}function By(t){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){return t.Nh.forEach((function(e,n){Fy(t,e)})),[2]}))}))}function Gy(t,e){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(n){return zy(t),qy(t)?(t.Mh.ph(e),Uy(t)):t.Mh.set("Unknown"),[2]}))}))}function Wy(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r,i,o;return Object(nc.d)(this,(function(s){switch(s.label){case 0:if(t.Mh.set("Online"),!(e instanceof hf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(nc.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Nh.has(o=i[r])?[4,t.Ch.$h(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),oc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ky(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof cf?t.Lh.wn(e):e instanceof lf?t.Lh.yn(e):t.Lh.In(e),n.isEqual(Rc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,qp(t.Sh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(gc.h,n.Mt)),Vy(t,e);var r=new nh(n.target,e,1,n.sequenceNumber);Fy(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return oc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Ky(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Ky(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r=this;return Object(nc.d)(this,(function(i){switch(i.label){case 0:if(!td(e))throw e;return t.Fh.add(1),[4,Ry(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return qp(t.Sh)}),t.fs.vo((function(){return Object(nc.b)(r,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){switch(e.label){case 0:return oc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,Py(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function $y(t,e){return e().catch((function(n){return Ky(t,n,e)}))}function Qy(t){return Object(nc.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(nc.d)(this,(function(s){switch(s.label){case 0:e=hc(t),n=im(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Hy(t)&&t.xh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Bp(e.Sh,r)];case 3:return null===(i=s.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=im(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Ky(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Yy(e)&&Zy(e),[2]}}))}))}function Yy(t){return Hy(t)&&!im(t).Hu()&&t.xh.length>0}function Zy(t){im(t).start()}function Jy(t){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){return im(t).Th(),[2]}))}))}function Xy(t){return Object(nc.b)(this,void 0,void 0,(function(){var e,n,r;return Object(nc.d)(this,(function(i){for(e=im(t),n=0,r=t.xh;n<r.length;n++)e.dh(r[n].mutations);return[2]}))}))}function tm(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r,i;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=Pd.from(r,e,n),[4,$y(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,Qy(t)];case 2:return o.sent(),[2]}}))}))}function em(t,e){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(n){switch(n.label){case 0:return e&&im(t).fh?[4,function(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return Vh(r=e.code)&&r!==vc.ABORTED?(n=t.xh.shift(),im(t).Xu(),[4,$y(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Qy(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Yy(t)&&Zy(t),[2]}}))}))}function nm(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n;return Object(nc.d)(this,(function(r){switch(r.label){case 0:return n=hc(t),e?(n.Fh.delete(2),[4,Py(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,Ry(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function rm(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=hc(t);return r.mh(),new Ay(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:By.bind(null,t),Iu:Gy.bind(null,t),uh:Wy.bind(null,t)}),t.Oh.push((function(n){return Object(nc.b)(e,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),qy(t)?Uy(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),zy(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function im(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=hc(t);return r.mh(),new jy(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:Jy.bind(null,t),Iu:em.bind(null,t),Eh:Xy.bind(null,t),wh:tm.bind(null,t)}),t.Oh.push((function(n){return Object(nc.b)(e,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,Qy(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(oc("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh}var om=function(){this.Wh=void 0,this.listeners=[]},sm=function(){this.queries=new np((function(t){return Zl(t)}),Yl),this.onlineState="Unknown",this.jh=new Set};function am(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(nc.d)(this,(function(c){switch(c.label){case 0:if(n=hc(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new om),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Gh(r)];case 2:return s.Wh=c.sent(),[3,4];case 3:return a=c.sent(),u=sd(a,"Initialization of query '"+Jl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.Wh&&e.Hh(o.Wh)&&hm(n),[2]}}))}))}function um(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(nc.d)(this,(function(a){return n=hc(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function cm(t,e){for(var n=hc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hh(s)&&(r=!0);a.Wh=s}}r&&hm(n)}function lm(t,e,n){var r=hc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function hm(t){t.jh.forEach((function(t){t.next()}))}var fm=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new sf(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){return!t.fromCache||!(this.options.sl&&"Offline"!==e||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){return t.docChanges.length>0||!!(t.xe||this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=sf.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),dm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),pm=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return Of(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?kf(this.Kt,t.document,!1):new gl(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return Ef(t)},t}();!function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new pm(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.yc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||tf()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(nc.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return[4,Zp(this.Sh,new pm(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Jp(this.Sh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ad(Object.assign({},this.progress),t))]}}))}))}}();var ym=function(t){this.key=t},mm=function(t){this.key=t},gm=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=tf(),this.Ce=tf(),this.ll=th(t),this._l=new rf(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new of,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,a=!1,u=Hl(this.query)&&i.size===this.query.limit?i.last():null,c=zl(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var l=i.get(t),h=e instanceof ml?e:null;h&&(h=Xl(n.query,h)?h:null);var f=!!l&&n.Ce.has(l.key),d=!!h&&(h.bt||n.Ce.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.El(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.ll(h,u)>0||c&&n.ll(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Hl(this.query)||zl(this.query))for(;s.size>this.query.limit;){var l=Hl(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{_l:s,wl:r,_c:a,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ti=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cc()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],a=0===this.hl.size&&this.qe?1:0,u=a!==this.ul;return this.ul=a,0!==o.length||u?{snapshot:new sf(this.query,t._l,i,o,t.Ce,0===a,u,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ti({_l:this._l,wl:new of,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=tf(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new mm(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new ym(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=tf();var e=this.dl(t.documents);return this.Ti(e,!0)},t.prototype.Pl=function(){return sf.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),vm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},bm=function(t){this.key=t,this.yl=!1},_m=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new np((function(t){return Zl(t)}),Yl),this.Dl=new Map,this.Cl=[],this.xl=new qh(Uc.J),this.Nl=new Map,this.Fl=new ty,this.Ol={},this.kl=new Map,this.Ml=hp.qi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function wm(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(nc.d)(this,(function(a){switch(a.label){case 0:return n=Ym(t),(i=n.Sl.get(e))?(n.pl.ka(i.targetId),r=i.view.Pl(),[3,4]):[3,1];case 1:return[4,Gp(n.Sh,$l(e))];case 2:return o=a.sent(),s=n.pl.ka(o.targetId),[4,Em(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.$l&&My(n.gl,o),a.label=4;case 4:return[2,r]}}))}))}function Em(t,e,n,r){return Object(nc.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(nc.d)(this,(function(l){switch(l.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return Object(nc.b)(this,void 0,void 0,(function(){var i,o,s;return Object(nc.d)(this,(function(a){switch(a.label){case 0:return(i=e.view.dl(n))._c?[4,Kp(t.Sh,e.query,!1).then((function(t){return e.view.dl(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.Oe.get(e.targetId),s=e.view.Ti(i,t.$l,o),[2,(Rm(t,e.targetId,s.ml),s.snapshot)]}}))}))}(t,e,n,r)},[4,Kp(t.Sh,e,!0)];case 1:return i=l.sent(),o=new gm(e,i.Pc),s=o.dl(i.documents),a=uf.Be(n,r&&"Offline"!==t.onlineState),u=o.Ti(s,t.$l,a),Rm(t,n,u.ml),c=new vm(e,n,o),[2,(t.Sl.set(e,c),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),u.snapshot)]}}))}))}function Cm(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return n=hc(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!Yl(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,Wp(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),Ly(n.gl,r.targetId),Dm(n,r.targetId)})).catch(ep)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Dm(n,r.targetId),[4,Wp(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Sm(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(nc.d)(this,(function(a){switch(a.label){case 0:r=Zm(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=hc(t),i=Pc.now(),o=e.reduce((function(t,e){return t.add(e.key)}),tf());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Th(c,n.get(c.key));null!=l&&s.push(new Ah(c.key,l,pl(l.proto.mapValue),_h.exists(!0)))}return r.Ho.yi(t,i,s,e)}))})).then((function(t){var e=t.Fs(n);return{batchId:t.batchId,ci:e}}))}(r.Sh,e)];case 2:return i=a.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new qh(pc)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,Fm(r,i.ci)];case 3:return a.sent(),[4,Qy(r.gl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=sd(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Tm(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r;return Object(nc.d)(this,(function(i){switch(i.label){case 0:n=hc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Hp(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach((function(t,e){var r=n.Nl.get(e);r&&(lc(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?lc(r.yl):t.Ke.size>0&&(lc(r.yl),r.yl=!1))})),[4,Fm(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ep(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Om(t,e,n){var r=hc(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=hc(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&hm(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function Im(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(nc.d)(this,(function(c){switch(c.label){case 0:return(r=hc(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(s=(s=new qh(Uc.J)).Ht(o,new gl(o,Rc.min())),a=tf().add(o),u=new af(Rc.min(),new Map,new Bh(pc),s,a),[4,Tm(r,u)]):[3,2];case 1:return c.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),Lm(r),[3,4];case 2:return[4,Wp(r.Sh,e,!1).then((function(){return Dm(r,e,n)})).catch(ep)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function xm(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(nc.d)(this,(function(o){switch(o.label){case 0:n=hc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Up(n.Sh,e)];case 2:return i=o.sent(),km(n,r,null),Nm(n,r),n.pl.Fa(r,"acknowledged"),[4,Fm(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ep(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Am(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r,i;return Object(nc.d)(this,(function(o){switch(o.label){case 0:r=hc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=hc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.gi(t,e).next((function(e){return lc(null!==e),r=e.keys(),n.Ho.Ni(t,e)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),km(r,e,n),Nm(r,e),r.pl.Fa(e,"rejected",n),[4,Fm(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ep(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function jm(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(nc.d)(this,(function(a){switch(a.label){case 0:Hy((n=hc(t)).gl)||oc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=hc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.bi(t)}))}(n.Sh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=a.sent(),s=sd(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Nm(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function km(t,e,n){var r=hc(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function Dm(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach((function(e){t.Fl.Mi(e)||Pm(t,e)}))}function Pm(t,e){var n=t.xl.get(e);null!==n&&(Ly(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),Lm(t))}function Rm(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ym?(t.Fl.ir(o.key,e),Mm(t,o)):o instanceof mm?(oc("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.cr(o.key,e),t.Fl.Mi(o.key)||Pm(t,o.key)):cc()}}function Mm(t,e){var n=e.key;t.xl.get(n)||(oc("SyncEngine","New document in limbo: "+n),t.Cl.push(n),Lm(t))}function Lm(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new bm(e)),t.xl=t.xl.Ht(e,n),My(t.gl,new nh($l(ql(e.path)),n,2,Dc.U))}}function Fm(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(nc.d)(this,(function(a){switch(a.label){case 0:return r=hc(t),i=[],o=[],s=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,a){s.push(r.Bl(a,e,n).then((function(t){if(t){r.$l&&r.pl.qa(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Rp.cc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vl.uh(i),[4,function(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(nc.d)(this,(function(l){switch(l.label){case 0:n=hc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Qf.forEach(e,(function(e){return Qf.forEach(e.rc,(function(r){return n.persistence.mi.ir(t,e.targetId,r)})).next((function(){return Qf.forEach(e.oc,(function(r){return n.persistence.mi.cr(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!td(r=l.sent()))throw r;return oc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.dc.get(a),c=u.Bt(u.Mt),n.dc=n.dc.Ht(a,c));return[2]}}))}))}(r.Sh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Vm(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return(n=hc(t)).currentUser.isEqual(e)?[3,3]:(oc("SyncEngine","User change. New user:",e.R()),[4,Vp(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new bc(vc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,Fm(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Um(t,e){var n=hc(t),r=n.Nl.get(e);if(r&&r.yl)return tf().add(r.key);var i=tf(),o=n.Dl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Sl.get(a[s]);i=i.ye(u.view.fl)}return i}function qm(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return[4,Kp((n=hc(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&Rm(n,e.targetId,i.ml),i)]}}))}))}function Hm(t){return Object(nc.b)(this,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){return[2,Qp((e=hc(t)).Sh).then((function(t){return Fm(e,t)}))]}))}))}function zm(t,e,n,r){return Object(nc.b)(this,void 0,void 0,(function(){var i,o;return Object(nc.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=hc(t),r=hc(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vi(t,e).next((function(e){return e?n.Ic.Zo(t,e):Qf.resolve(null)}))}))}((i=hc(t)).Sh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Qy(i.gl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(km(i,e,r||null),Nm(i,e),function(t,e){hc(hc(t).Ho).Fi(e)}(i.Sh,e)):cc(),s.label=4;case 4:return[4,Fm(i,o)];case 5:return s.sent(),[3,7];case 6:oc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Bm(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(nc.d)(this,(function(c){switch(c.label){case 0:return Ym(n=hc(t)),Zm(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,Gm(n,r.rt())]);case 1:return i=c.sent(),n.Ll=!0,[4,nm(n.gl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)My(n.gl,s[o]);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(a=[],u=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?a.push(e):u=u.then((function(){return Dm(n,e),Wp(n.Sh,e,!0)})),Ly(n.gl,e)})),[4,u]);case 4:return c.sent(),[4,Gm(n,a)];case 5:return c.sent(),function(t){var e=hc(t);e.Nl.forEach((function(t,n){Ly(e.gl,n)})),e.Fl.Mc(),e.Nl=new Map,e.xl=new qh(Uc.J)}(n),n.Ll=!1,[4,nm(n.gl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function Gm(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(nc.d)(this,(function(y){switch(y.label){case 0:n=hc(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.Dl.get(a=s[o]))&&0!==c.length?[4,Gp(n.Sh,$l(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=n.Sl.get(h[l]),[4,qm(n,f)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,$p(n.Sh,a)];case 8:return p=y.sent(),[4,Gp(n.Sh,p)];case 9:return u=y.sent(),[4,Em(n,Wm(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function Wm(t){return Ul(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Km(t){var e=hc(t);return hc(hc(e.Sh).persistence).Ko()}function $m(t,e,n,r){return Object(nc.b)(this,void 0,void 0,(function(){var i,o,s;return Object(nc.d)(this,(function(a){switch(a.label){case 0:return(i=hc(t)).Ll?(oc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Qp(i.Sh)];case 3:return o=a.sent(),s=af.$e(e,"current"===n),[4,Fm(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Wp(i.Sh,e,!0)];case 6:return a.sent(),Dm(i,e,r),[3,8];case 7:cc(),a.label=8;case 8:return[2]}}))}))}function Qm(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(nc.d)(this,(function(f){switch(f.label){case 0:if(!(r=Ym(t)).Ll)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Dl.has(s=o[i])?(oc("SyncEngine","Adding an already active target "+s),[3,5]):[4,$p(r.Sh,s)]:[3,6];case 2:return a=f.sent(),[4,Gp(r.Sh,a)];case 3:return u=f.sent(),[4,Em(r,Wm(a),u.targetId,!1)];case 4:f.sent(),My(r.gl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(nc.d)(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,Wp(r.Sh,t,!1).then((function(){Ly(r.gl,t),Dm(r,t)})).catch(ep)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Ym(t){var e=hc(t);return e.gl.Ch.Bh=Tm.bind(null,e),e.gl.Ch.Sn=Um.bind(null,e),e.gl.Ch.$h=Im.bind(null,e),e.vl.uh=cm.bind(null,e.Vl),e.vl.ql=lm.bind(null,e.Vl),e}function Zm(t){var e=hc(t);return e.gl.Ch.qh=xm.bind(null,e),e.gl.Ch.Uh=Am.bind(null,e),e}var Jm=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){switch(e.label){case 0:return this.Kt=Oy(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Fp(this.persistence,new Mp,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new sy(uy.ra,this.Kt)},t.prototype.jl=function(t){return new vy},t.prototype.terminate=function(){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.$o()];case 1:return t.sent(),[4,this.persistence.$o()];case 2:return t.sent(),[2]}}))}))},t}(),Xm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(nc.c)(e,t),e.prototype.initialize=function(e){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Yp(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,Zm(this.Xl.fa)];case 4:return n.sent(),[4,Qy(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return Fp(this.persistence,new Mp,t.Yl,this.Kt)},e.prototype.Hl=function(t){return new vp(this.persistence.mi.dr,t.fs)},e.prototype.Gl=function(t){var e=Dp(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?tp.Zs(this.cacheSizeBytes):tp.ni;return new jp(this.synchronizeTabs,e,t.clientId,n,t.fs,Sy(),Ty(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.jl=function(t){return new vy},e}(Jm),tg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(nc.c)(e,t),e.prototype.initialize=function(e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r=this;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof gy?(this.pl.fa={nu:zm.bind(null,n),su:$m.bind(null,n),iu:Qm.bind(null,n),Ko:Km.bind(null,n),eu:Hm.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.yo((function(t){return Object(nc.b)(r,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){switch(e.label){case 0:return[4,Bm(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Ir?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=Sy();if(!gy.Wn(e))throw new bc(vc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Dp(t.gu.T,t.gu.persistenceKey);return new gy(e,t.fs,n,t.clientId,t.Yl)},e}(Xm),eg=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n=this;return Object(nc.d)(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return Om(n.fa,t,1)},this.gl.Ch.s_=Vm.bind(null,this.fa),[4,nm(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new sm},t.prototype.Zl=function(t){var e=Oy(t.gu.T),n=new Cy(t.gu);return function(t,e,n){return new Ny(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return Om(s.fa,t,0)},o=_y.Wn()?new _y:new by,new Dy(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new _m(t,e,n,r,i,o);return s&&(a.Ll=!0),a}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return Object(nc.b)(this,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:return e=hc(t),oc("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,Ry(e)];case 1:return n.sent(),e.kh.$o(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}(),ng=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),rg=(function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new $f,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then((function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Kl=function(){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}}))}))},t.prototype.a_=function(){return Object(nc.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new dm(JSON.parse(r),t.length+n)]}}))}))},t.prototype.__=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.u_=function(){return Object(nc.b)(this,void 0,void 0,(function(){var t,e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.l_=function(t){return Object(nc.b)(this,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return Object(nc.b)(this,void 0,void 0,(function(){var t,e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new bc(vc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new Vc(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}()),ig=function(t){this._methodName=t};function og(t,e,n){if(!n)throw new bc(vc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function sg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new bc(vc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ag(t,e,n,r){if(!0===e&&!0===r)throw new bc(vc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ug(t){if(!Uc.Et(t))throw new bc(vc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function cg(t){if(Uc.Et(t))throw new bc(vc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function lg(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":cc()}function hg(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new bc(vc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=lg(t);throw new bc(vc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function fg(t,e){if(e<=0)throw new bc(vc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var dg=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new bc(vc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new bc(vc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ag("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),pg=new Map,yg=function(){function t(t,e){this.w_="(lite)",this.E_=new dg({}),this.T_=!1,t instanceof Oc?(this.I_=t,this.m_=new Ac):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new bc(vc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(t.options.projectId)}(t),this.m_=new jc(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new bc(vc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new bc(vc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new dg(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Ac;switch(t.type){case"gapi":var e=t.client;return lc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new kc(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new bc(vc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return(t=pg.get(this))&&(oc("ComponentProvider","Removing Datastore"),pg.delete(this),t.terminate()),Promise.resolve();var t},t}(),mg=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new vg(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),gg=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),vg=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ql(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(nc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new mg(this.firestore,null,new Uc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(gg);function bg(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof wc&&(t=t._),og("collection","path",e),t instanceof yg)return cg(n=Lc.ct.apply(Lc,Object(nc.g)([e],r))),new vg(t,null,n);if(!(t instanceof mg||t instanceof vg))throw new bc(vc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cg(n=Lc.ct.apply(Lc,Object(nc.g)([t.path],r)).child(Lc.ct(e))),new vg(t.firestore,null,n)}function _g(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof wc&&(t=t._),1===arguments.length&&(e=dc.t()),og("doc","path",e),t instanceof yg)return ug(n=Lc.ct.apply(Lc,Object(nc.g)([e],r))),new mg(t,null,new Uc(n));if(!(t instanceof mg||t instanceof vg))throw new bc(vc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ug(n=t.D_.child(Lc.ct.apply(Lc,Object(nc.g)([e],r)))),new mg(t.firestore,t instanceof vg?t.v_:null,new Uc(n))}function wg(t,e){return t instanceof wc&&(t=t._),e instanceof wc&&(e=e._),(t instanceof mg||t instanceof vg)&&(e instanceof mg||e instanceof vg)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Eg(t,e){return t instanceof wc&&(t=t._),e instanceof wc&&(e=e._),t instanceof gg&&e instanceof gg&&t.firestore===e.firestore&&Yl(t.C_,e.C_)&&t.v_===e.v_}var Cg=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new bc(vc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new bc(vc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return pc(this.x_,t.x_)||pc(this.N_,t.N_)},t}(),Sg=/^__.*__$/,Tg=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new Ah(t,this.data,this.zt,e,this.fieldTransforms):new xh(t,this.data,e,this.fieldTransforms)},t}(),Og=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Ah(t,this.data,this.zt,e,this.fieldTransforms)},t}();function Ig(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cc()}}var xg=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return $g(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Ig(this.k_)&&Sg.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Ag=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||Oy(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new xg({k_:t,methodName:e,j_:n,path:Vc.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function jg(t){var e=t.p_(),n=Oy(t.I_);return new Ag(t.I_,!!e.ignoreUndefinedProperties,n)}function Ng(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Bg("Data must be an object, but it was:",s,r);var a,u,c=Hg(r,s);if(o.merge)a=new Bc(s.zt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Gg(e,f[h],n);if(!s.contains(d))throw new bc(vc.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Qg(l,d)||l.push(d)}a=new Bc(l),u=s.fieldTransforms.filter((function(t){return a.It(t.field)}))}else a=null,u=s.fieldTransforms;return new Tg(new fl(c),a,u)}var kg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ig);function Dg(t,e,n){return new xg({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var Pg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.prototype.z_=function(t){return new vh(t.path,new lh)},e.prototype.isEqual=function(t){return t instanceof e},e}(ig),Rg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(nc.c)(e,t),e.prototype.z_=function(t){var e=Dg(this,t,!0),n=this.H_.map((function(t){return qg(t,e)})),r=new hh(n);return new vh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ig),Mg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(nc.c)(e,t),e.prototype.z_=function(t){var e=Dg(this,t,!0),n=this.H_.map((function(t){return qg(t,e)})),r=new dh(n);return new vh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ig),Lg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(nc.c)(e,t),e.prototype.z_=function(t){var e=new yh(t.Kt,oh(t.Kt,this.J_));return new vh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ig);function Fg(t,e,n,r){var i=t.G_(1,e,n);Bg("Data must be an object, but it was:",i,r);var o=[],s=new dl;Hc(r,(function(t,r){var a=Kg(e,t,n);r instanceof wc&&(r=r._);var u=i.U_(a);if(r instanceof kg)o.push(a);else{var c=qg(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Bc(o);return new Og(s.yt(),a,i.fieldTransforms)}function Vg(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Gg(e,r,n)],u=[i];if(o.length%2!=0)throw new bc(vc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Gg(e,o[c])),u.push(o[c+1]);for(var l=[],h=new dl,f=a.length-1;f>=0;--f)if(!Qg(l,a[f])){var d=a[f],p=u[f];p instanceof wc&&(p=p._);var y=s.U_(d);if(p instanceof kg)l.push(d);else{var m=qg(p,y);null!=m&&(l.push(d),h.set(d,m))}}var g=new Bc(l);return new Og(h.yt(),g,s.fieldTransforms)}function Ug(t,e,n,r){return void 0===r&&(r=!1),qg(n,t.G_(r?4:3,e))}function qg(t,e){if(t instanceof wc&&(t=t._),zg(t))return Bg("Unsupported field value:",e,t),Hg(t,e);if(t instanceof ig)return function(t,e){if(!Ig(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=qg(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof wc&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return oh(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Pc.fromDate(t);return{timestampValue:bf(e.Kt,n)}}if(t instanceof Pc)return n=new Pc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:bf(e.Kt,n)};if(t instanceof Cg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _c)return{bytesValue:_f(e.Kt,t.l)};if(t instanceof mg){var r=t.firestore.I_;if(!r.isEqual(n=e.T))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Cf(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+lg(t))}(t,e)}function Hg(t,e){var n={};return zc(t)?e.path&&e.path.length>0&&e.zt.push(e.path):Hc(t,(function(t,r){var i=qg(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function zg(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Pc||t instanceof Cg||t instanceof _c||t instanceof mg||t instanceof ig)}function Bg(t,e,n){if(!zg(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=lg(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function Gg(t,e,n){if(e instanceof wc&&(e=e._),e instanceof rg)return e.d_;if("string"==typeof e)return Kg(t,e);throw $g("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Wg=new RegExp("[~\\*/\\[\\]]");function Kg(t,e,n){if(e.search(Wg)>=0)throw $g("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(rg.bind.apply(rg,Object(nc.g)([void 0],e.split("."))))).d_}catch(r){throw $g("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function $g(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new bc(vc.INVALID_ARGUMENT,(a+=". ")+t+u)}function Qg(t,e){return t.some((function(t){return t.isEqual(e)}))}var Yg=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(nc.b)(this,void 0,void 0,(function(){var e,n=this;return Object(nc.d)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new bc(vc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(nc.d)(this,(function(u){switch(u.label){case 0:return n=hc(t),r=Af(n.Kt)+"/documents",i={documents:e.map((function(t){return Tf(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){lc(!!e.found);var n=Of(t,e.found.name),r=Ef(e.found.updateTime),i=new fl({mapValue:{fields:e.found.fields}});return new ml(n,r,i,{})}(t,e):"missing"in e?function(t,e){lc(!!e.missing),lc(!!e.readTime);var n=Of(t,e.missing),r=Ef(e.readTime);return new gl(n,r)}(t,e):cc()}(n.Kt,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());lc(!!e),a.push(e)})),a)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof gl||t instanceof ml?n.sf(t):cc()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Mh(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(nc.b)(this,void 0,void 0,(function(){var t,e=this;return Object(nc.d)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Uc.ft(n);e.mutations.push(new Lh(r,e.Gt(r)))})),[4,function(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return n=hc(t),r=Af(n.Kt)+"/documents",i={writes:e.map((function(t){return Df(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof ml)e=t.version;else{if(!(t instanceof gl))throw cc();e=Rc.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new bc(vc.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?_h.updateTime(e):_h.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Rc.min()))throw new bc(vc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _h.updateTime(e)}return _h.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Zg=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new Iy(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return Object(nc.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(nc.d)(this,(function(r){return t=new Yg(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Zc(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Vh(e)}return!1},t}(),Jg=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=Ic.UNAUTHENTICATED,this.clientId=dc.t(),this._f=function(){},this.N=new $f,this.credentials.S((function(t){oc("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new bc(vc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new $f;return this.fs.Tf((function(){return Object(nc.b)(t,void 0,void 0,(function(){var t,n;return Object(nc.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=sd(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Xg(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return t.fs.Af(),oc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.vo((function(){return Object(nc.b)(i,void 0,void 0,(function(){return Object(nc.d)(this,(function(t){switch(t.label){case 0:return[4,Vp(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Vo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function tv(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return t.fs.Af(),[4,ev(t)];case 1:return n=i.sent(),oc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.fs.vo((function(){return function(t,e){return Object(nc.b)(this,void 0,void 0,(function(){var n,r;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return(n=hc(t)).fs.Af(),oc("RemoteStore","RemoteStore received new credentials"),r=Hy(n),n.Fh.add(3),[4,Ry(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,Py(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function ev(t){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(oc("FirestoreClient","Using default OfflineComponentProvider"),[4,Xg(t,new Jm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function nv(t){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(oc("FirestoreClient","Using default OnlineComponentProvider"),[4,tv(t,new eg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function rv(t){return ev(t).then((function(t){return t.persistence}))}function iv(t){return ev(t).then((function(t){return t.Sh}))}function ov(t){return nv(t).then((function(t){return t.gl}))}function sv(t){return nv(t).then((function(t){return t.fa}))}function av(t){return Object(nc.b)(this,void 0,void 0,(function(){var e,n;return Object(nc.d)(this,(function(r){switch(r.label){case 0:return[4,nv(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=wm.bind(null,e.fa),n.Jh=Cm.bind(null,e.fa),n)]}}))}))}function uv(t,e,n){var r=this;void 0===n&&(n={});var i=new $f;return t.fs.ys((function(){return Object(nc.b)(r,void 0,void 0,(function(){var r;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ng({next:function(o){e.ys((function(){return um(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new bc(vc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new bc(vc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new fm(ql(n.path),o,{includeMetadataChanges:!0,sl:!0});return am(t,s)},[4,av(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}function cv(t,e,n){var r=this;void 0===n&&(n={});var i=new $f;return t.fs.ys((function(){return Object(nc.b)(r,void 0,void 0,(function(){var r;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ng({next:function(n){e.ys((function(){return um(t,s)})),n.fromCache&&"server"===r.source?i.reject(new bc(vc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new fm(n,o,{includeMetadataChanges:!0,sl:!0});return am(t,s)},[4,av(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}var lv=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new Iy(this,"async_queue_retry"),this.vf=function(){var e=Ty();e&&oc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=Ty();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Ty();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.vo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Object(nc.b)(this,void 0,void 0,(function(){var t,e=this;return Object(nc.d)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!td(t=n.sent()))throw t;return oc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,sc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.mr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=od.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&cc()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(nc.b)(this,void 0,void 0,(function(){var t;return Object(nc.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),hv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new lv,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(nc.c)(e,t),e.prototype.b_=function(){return this.Lf||dv(this),this.Lf.terminate()},e}(yg);function fv(t){return t.Lf||dv(t),t.Lf.df(),t.Lf}function dv(t){var e=t.p_(),n=function(t,e,n){return new Tc(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new Jg(t.m_,t.Mf,n)}function pv(t,e,n){var r=this,i=new $f;return t.fs.enqueue((function(){return Object(nc.b)(r,void 0,void 0,(function(){var r;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Xg(t,n)];case 1:return o.sent(),[4,tv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===vc.FAILED_PRECONDITION||t.code===vc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function yv(t){if(t.R_||t.P_)throw new bc(vc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mv=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),tl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Kc(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf($c(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw cc()}},t.prototype.jf=function(t,e){var n=this,r={};return Hc(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Cg(Kc(t.latitude),Kc(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return Qc(n)?t(n):n}(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(Yc(t));default:return null}},t.prototype.Bf=function(t){var e=Wc(t);return new Pc(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=Lc.ct(t);lc(Kf(n));var r=new Oc(n.get(1),n.get(3)),i=new Uc(n.X(5));return r.isEqual(e)||sc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),gv=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new mg(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new vv(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(bv("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),vv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(gv);function bv(t,e){return"string"==typeof e?Kg(t,e):e instanceof wc?e._.d_:e.d_}function _v(t){if(zl(t)&&0===t.Nt.length)throw new bc(vc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wv=function(){};function Ev(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Cv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Object(nc.c)(e,t),e.prototype.Yf=function(t){var e=jg(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new bc(vc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){jv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Av(r,t,l[c]));a={arrayValue:{values:u}}}else a=Av(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||jv(s,o),a=Ug(n,"where",s,"in"===o||"not-in"===o);var h=Sl.create(i,o,a);return function(t,e){if(e.xt()){var n=Gl(t);if(null!==n&&!n.isEqual(e.field))throw new bc(vc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Bl(t);null!==r&&Nv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new bc(vc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new gg(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Vl(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(wv),Sv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Object(nc.c)(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new bc(vc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new bc(vc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Rl(e,n);return function(t,e){if(null===Bl(t)){var n=Gl(t);null!==n&&Nv(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new gg(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new Vl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(wv),Tv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Object(nc.c)(e,t),e.prototype.Yf=function(t){return new gg(t.firestore,t.v_,Ql(t.C_,this.nd,this.sd))},e}(wv),Ov=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(nc.c)(e,t),e.prototype.Yf=function(t){var e=xv(t,this.type,this.rd,this.od);return new gg(t.firestore,t.v_,function(t,e){return new Vl(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(wv),Iv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(nc.c)(e,t),e.prototype.Yf=function(t){var e=xv(t,this.type,this.rd,this.od);return new gg(t.firestore,t.v_,function(t,e){return new Vl(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(wv);function xv(t,e,n,r){if(n[0]instanceof wc&&(n[0]=n[0]._),n[0]instanceof gv)return function(t,e,n,r,i){if(!r)throw new bc(vc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Kl(t);s<a.length;s++){var u=a[s];if(u.field.ht())o.push(sl(e,r.key));else{var c=r.field(u.field);if(Qc(c))throw new bc(vc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.ot();throw new bc(vc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Dl(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=jg(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new bc(vc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ht()){if("string"!=typeof c)throw new bc(vc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Wl(t)&&-1!==c.indexOf("/"))throw new bc(vc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Lc.ct(c));if(!Uc.Et(l))throw new bc(vc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Uc(l);a.push(sl(e,h))}else{var f=Ug(n,r,c);a.push(f)}}return new Dl(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Av(t,e,n){if(n instanceof wc&&(n=n._),"string"==typeof n){if(""===n)throw new bc(vc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wl(e)&&-1!==n.indexOf("/"))throw new bc(vc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Lc.ct(n));if(!Uc.Et(r))throw new bc(vc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return sl(t,new Uc(r))}if(n instanceof mg)return sl(t,n.S_);throw new bc(vc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+lg(n)+".")}function jv(t,e){if(!Array.isArray(t)||0===t.length)throw new bc(vc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new bc(vc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Nv(t,e,n){if(!n.isEqual(e))throw new bc(vc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function kv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function Dv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Pv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(nc.c)(e,t),e.prototype.Uf=function(t){return new _c(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new mg(this.firestore,null,e)},e}(mv),Rv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Mv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).zf=e,a.ad=e,a.metadata=o,a}return Object(nc.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Lv(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(bv("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(gv),Lv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Mv),Fv=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Rv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Lv(n.zf,n.Hf,r.key,r,new Rv(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new bc(vc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){return{type:"added",doc:new Lv(t.zf,t.Hf,e.doc.key,e.doc,new Rv(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Lv(t.zf,t.Hf,e.doc.key,e.doc,new Rv(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Vv(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function Vv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cc()}}function Uv(t,e){return t instanceof Mv&&e instanceof Mv?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Fv&&e instanceof Fv&&t.zf===e.zf&&Eg(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var qv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(nc.c)(e,t),e.prototype.Uf=function(t){return new _c(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new mg(this.firestore,null,e)},e}(mv);function Hv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=hg(t,mg);var o=hg(t.firestore,hv),s=jg(o);return e instanceof wc&&(e=e._),Bv(o,[("string"==typeof e||e instanceof rg?Vg(s,"updateDoc",t.S_,e,n,r):Fg(s,"updateDoc",t.S_,e)).F_(t.S_,_h.exists(!0))])}function zv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof wc&&(t=t._);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||kv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(kv(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof mg)c=hg(t.firestore,hv),l=ql(t.S_.path),u={next:function(e){i[a]&&i[a](Gv(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=hg(t,gg);c=hg(d.firestore,hv),l=d.C_;var p=new qv(c);u={next:function(t){i[a]&&i[a](new Fv(c,p,d,t))},error:i[a+1],complete:i[a+2]},_v(t.C_)}return function(t,e,n,r){var i=this,o=new ng(r),s=new fm(e,o,n);return t.fs.ys((function(){return Object(nc.b)(i,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:return e=am,[4,av(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.r_(),t.fs.ys((function(){return Object(nc.b)(i,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:return e=um,[4,av(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(fv(c),l,h,u)}function Bv(t,e){return function(t,e){var n=this,r=new $f;return t.fs.ys((function(){return Object(nc.b)(n,void 0,void 0,(function(){var n;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return n=Sm,[4,sv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(fv(t),e)}function Gv(t,e,n){var r=n.docs.get(e.S_),i=new qv(t);return new Mv(t,i,e.S_,r,new Rv(n.hasPendingWrites,n.fromCache),e.v_)}var Wv=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=jg(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=Kv(t,this.zf),i=Dv(r.v_,e,n),o=Ng(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,_h.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=Kv(t,this.zf);return e instanceof wc&&(e=e._),o="string"==typeof e||e instanceof rg?Vg(this.wd,"WriteBatch.update",s.S_,e,n,r):Fg(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,_h.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=Kv(t,this.zf);return this.fd=this.fd.concat(new Mh(e.S_,_h.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new bc(vc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Kv(t,e){if(t instanceof wc&&(t=t._),t.firestore!==e)throw new bc(vc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var $v=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Object(nc.c)(e,t),e.prototype.get=function(e){var n=this,r=Kv(e,this.zf),i=new qv(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Mv(n.zf,i,r.S_,t.Jf,new Rv(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=jg(t)}return t.prototype.get=function(t){var e=this,n=Kv(t,this.zf),r=new Pv(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return cc();var i=t[0];if(i instanceof gl)return new gv(e.zf,r,n.S_,null,n.v_);if(i instanceof ml)return new gv(e.zf,r,i.key,i,n.v_);throw cc()}))},t.prototype.set=function(t,e,n){var r=Kv(t,this.zf),i=Dv(r.v_,e,n),o=Ng(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Kv(t,this.zf);return e instanceof wc&&(e=e._),o="string"==typeof e||e instanceof rg?Vg(this.wd,"Transaction.update",s.S_,e,n,r):Fg(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=Kv(t,this.zf);return this.Td.delete(e.S_),this},t}()),Qv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){yv(t=hg(t,hv));var n=fv(t),r=t.p_(),i=new eg;return pv(n,i,new Xm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){yv(t=hg(t,hv));var e=fv(t),n=t.p_(),r=new eg;return pv(e,r,new tg(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new bc(vc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new $f;return t.Mf.Tf((function(){return Object(nc.b)(e,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(nc.b)(this,void 0,void 0,(function(){return Object(nc.d)(this,(function(e){switch(e.label){case 0:return Zf.Wn()?[4,Zf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Dp(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),Yv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Oc||(i.md=e),i}return Object(nc.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.V_().host&&ac("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return Object(nc.b)(e,void 0,void 0,(function(){var e,n;return Object(nc.d)(this,(function(r){switch(r.label){case 0:return[4,rv(t)];case 1:return e=r.sent(),[4,ov(t)];case 2:return n=r.sent(),[2,(e.po(!0),function(t){var e=hc(t);return e.Fh.delete(0),Py(e)}(n))]}}))}))}))}(fv(hg(this._,hv)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return Object(nc.b)(e,void 0,void 0,(function(){var e,n;return Object(nc.d)(this,(function(r){switch(r.label){case 0:return[4,rv(t)];case 1:return e=r.sent(),[4,ov(t)];case 2:return n=r.sent(),[2,(e.po(!1),function(t){return Object(nc.b)(this,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:return(e=hc(t)).Fh.add(0),[4,Ry(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(fv(hg(this._,hv)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ag("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new $f;return t.fs.ys((function(){return Object(nc.b)(e,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(r){switch(r.label){case 0:return e=jm,[4,sv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(fv(hg(this._,hv)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ng(e);return t.fs.ys((function(){return Object(nc.b)(n,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){hc(t).jh.add(e),e.next()},[4,av(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return Object(nc.b)(n,void 0,void 0,(function(){var e;return Object(nc.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){hc(t).jh.delete(e)},[4,av(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(fv(t=hg(t,hv)),kv(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new bc(vc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new cb(this,bg(this._,t))}catch(t){throw eb(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new tb(this,_g(this._,t))}catch(t){throw eb(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new sb(this,function(t,e){if(t=hg(t,yg),og("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new bc(vc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new gg(t,null,function(t){return new Vl(Lc.at(),t)}(e))}(this._,t))}catch(t){throw eb(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new $f;return t.fs.ys((function(){return Object(nc.b)(n,void 0,void 0,(function(){var n;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return nv(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new Zg(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(fv(t),(function(n){return e(new $v(t,n))}))}(this._,(function(n){return t(new Jv(e,n))}))},e.prototype.batch=function(){var t=this;return fv(this._),new Xv(new Wv(this._,(function(e){return Bv(t._,e)})))},e.prototype.loadBundle=function(t){throw new bc(vc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new bc(vc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(wc),Zv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(nc.c)(e,t),e.prototype.Uf=function(t){return new Sc(new _c(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return tb.Ad(e,this.firestore,null)},e}(mv),Jv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(nc.c)(e,t),e.prototype.get=function(t){var e=this,n=lb(t);return this._.get(n).then((function(t){return new ib(e.zf,t)}))},e.prototype.set=function(t,e,n){var r=lb(t);return n?(sg("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=lb(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object(nc.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=lb(t);return this._.delete(e),this},e}(wc),Xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.prototype.set=function(t,e,n){var r=lb(t);return n?(sg("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=lb(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object(nc.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=lb(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(wc),tb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new Zv(e),r}return Object(nc.c)(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new bc(vc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new mg(n._,r,new Uc(t)))},e.Ad=function(t,n,r){return new e(n,new mg(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new cb(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new cb(this.firestore,bg(this._,t))}catch(t){throw eb(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof wc&&(t=t._),t instanceof mg&&wg(this._,t)},e.prototype.set=function(t,e){e=sg("DocumentReference.set",e);try{return function(t,e,n){t=hg(t,mg);var r=hg(t.firestore,hv),i=Dv(t.v_,e,n);return Bv(r,[Ng(jg(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,_h.Wt())])}(this._,t,e)}catch(t){throw eb(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Hv(this._,t):Hv.apply(void 0,Object(nc.g)([this._,t,e],n))}catch(t){throw eb(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Bv(hg((t=this._).firestore,hv),[new Mh(t.S_,_h.Wt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=nb(e),i=rb(e,(function(e){return new ib(t.firestore,new Mv(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return zv(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=hg(t,mg);var e=hg(t.firestore,hv),n=fv(e),r=new qv(e);return function(t,e){var n=this,r=new $f;return t.fs.ys((function(){return Object(nc.b)(n,void 0,void 0,(function(){var n;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r,i;return Object(nc.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=hc(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof ml?n.resolve(i):i instanceof gl?n.resolve(null):n.reject(new bc(vc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=sd(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,iv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Mv(e,r,t.S_,n,new Rv(n instanceof ml&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=hg(t,mg);var e=hg(t.firestore,hv);return uv(fv(e),t.S_,{source:"server"}).then((function(n){return Gv(e,t,n)}))}(this._):function(t){t=hg(t,mg);var e=hg(t.firestore,hv);return uv(fv(e),t.S_).then((function(n){return Gv(e,t,n)}))}(this._)).then((function(t){return new ib(e.firestore,new Mv(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(wc);function eb(t,e,n){return t.message=t.message.replace(e,n),t}function nb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!kv(r))return r}return{}}function rb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=kv(t[0])?t[0]:kv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ib=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(nc.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new tb(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return Uv(this._,t._)},e}(wc),ob=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.prototype.data=function(t){return this._.data(t)},e}(ib),sb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new Zv(e),r}return Object(nc.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Ev(this._,function(t,e,n){var r=e,i=bv("where",t);return new Cv(i,r,n)}(t,n,r)))}catch(t){throw eb(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Ev(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=bv("orderBy",t);return new Sv(r,n)}(t,n)))}catch(t){throw eb(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Ev(this._,function(t){return fg("limit",t),new Tv("limit",t,"F")}(t)))}catch(t){throw eb(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Ev(this._,function(t){return fg("limitToLast",t),new Tv("limitToLast",t,"L")}(t)))}catch(t){throw eb(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ev(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ov("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw eb(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ev(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ov("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw eb(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ev(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Iv("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw eb(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ev(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Iv("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw eb(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Eg(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=hg(t,gg);var e=hg(t.firestore,hv),n=fv(e),r=new qv(e);return function(t,e){var n=this,r=new $f;return t.fs.ys((function(){return Object(nc.b)(n,void 0,void 0,(function(){var n;return Object(nc.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(nc.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(nc.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Kp(t,e,!0)];case 1:return a=u.sent(),r=new gm(e,a.Pc),i=r.dl(a.documents),o=r.Ti(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=sd(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,iv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Fv(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=hg(t,gg);var e=hg(t.firestore,hv),n=fv(e),r=new qv(e);return cv(n,t.C_,{source:"server"}).then((function(n){return new Fv(e,r,t,n)}))}(this._):function(t){t=hg(t,gg);var e=hg(t.firestore,hv),n=fv(e),r=new qv(e);return _v(t.C_),cv(n,t.C_).then((function(n){return new Fv(e,r,t,n)}))}(this._)).then((function(t){return new ub(e.firestore,new Fv(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=nb(e),i=rb(e,(function(e){return new ub(t.firestore,new Fv(t.firestore._,t.Hf,t._,e.ud))}));return zv(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(wc),ab=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(nc.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new ob(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(wc),ub=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(nc.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new sb(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new ob(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new ab(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new ob(n.zf,r))}))},e.prototype.isEqual=function(t){return Uv(this._,t._)},e}(wc),cb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Object(nc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new tb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new tb(this.firestore,void 0===t?_g(this._):_g(this._,t))}catch(t){throw eb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=hg(t.firestore,hv),r=_g(t),i=Dv(t.v_,e);return Bv(n,[Ng(jg(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,_h.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new tb(e.firestore,t)}))},e.prototype.isEqual=function(t){return wg(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(sb);function lb(t){return t instanceof wc&&(t=t._),hg(t,mg)}var hb=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(rg.bind.apply(rg,Object(nc.g)([void 0],e))))||this}return Object(nc.c)(e,t),e.documentId=function(){return new e(Vc.lt().ot())},e.prototype.isEqual=function(t){return t instanceof wc&&(t=t._),t instanceof rg&&this._.d_.isEqual(t.d_)},e}(wc),fb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(nc.c)(e,t),e.serverTimestamp=function(){var t=new Pg("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new kg("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rg("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mg("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Lg("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(wc);!function(){function t(){this.Pd={},this.yd=new $f,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.Wl=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.Ql=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)}}();var db,pb=n("/6Yf"),yb={Firestore:Yv,GeoPoint:Cg,Timestamp:Pc,Blob:Sc,Transaction:Jv,WriteBatch:Xv,DocumentReference:tb,DocumentSnapshot:ib,Query:sb,QueryDocumentSnapshot:ob,QuerySnapshot:ub,CollectionReference:cb,FieldPath:hb,FieldValue:fb,setLogLevel:function(t){rc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function mb(t,e){return function(t,e=Rr.a){return new Mr.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function gb(t,e){return mb(t,e).pipe(Object(Vr.a)(t=>({payload:t,type:"query"})))}function vb(t,e){return gb(t,e).pipe(Qi(void 0),Yi(),Object(Vr.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function bb(t,e,n){return vb(t,n).pipe(Qr((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return _b(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return _b(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _b(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Jr(),Object(Vr.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function _b(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function wb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new pb.a("firestore",(function(t){return function(t,e){return new Yv(t,new hv(t,e),new Qv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},yb)))})(db=Xi.a),db.registerVersion("@firebase/firestore","2.1.1");class Eb{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=vb(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Vr.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Qi(void 0),Yi(),li(([t,e])=>e.length>0||!t),Object(Vr.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Qr((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=wb(t);return bb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return gb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Vr.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Br.a)(this.query.get(t)).pipe(Object(si.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Cb(this.ref.doc(t),this.afs)}}class Cb{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Ab(n,e);return new Eb(r,i,this.afs)}snapshotChanges(){return mb(this.ref,this.afs.schedulers.outsideAngular).pipe(Qi(void 0),Yi(),Object(Vr.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Vr.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Br.a)(this.ref.get(t)).pipe(Object(si.b)(this.afs.schedulers.insideAngular))}}class Sb{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?vb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Vr.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),li(t=>t.length>0),this.afs.keepUnstableUntilFirst):vb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Qr((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=wb(t);return bb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return gb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Vr.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Br.a)(this.query.get(t)).pipe(Object(si.b)(this.afs.schedulers.insideAngular))}}const Tb=new r.q("angularfire2.enableFirestorePersistence"),Ob=new r.q("angularfire2.firestore.persistenceSettings"),Ib=new r.q("angularfire2.firestore.settings"),xb=new r.q("angularfire2.firestore.use-emulator");function Ab(t,e=(t=>t)){return{query:e(t),ref:t}}let jb=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Pr.d(o),this.keepUnstableUntilFirst=Object(Pr.h)(this.schedulers);const c=Object(Pr.g)(t,o,e);!xi.a.auth&&u&&Object(Pr.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Pr.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return Object(Br.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(db){return"undefined"!=typeof console&&console.warn(db),Object(Lr.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Lr.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Ab(n,e),o=this.schedulers.ngZone.run(()=>r);return new Eb(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Sb(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Cb(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.bc(Pr.c),r.bc(Pr.b,8),r.bc(Tb,8),r.bc(Ib,8),r.bc(r.B),r.bc(r.z),r.bc(Ob,8),r.bc(xb,8),r.bc(Ii,8))},t.\u0275prov=Object(r.Kb)({factory:function(){return new t(Object(r.bc)(Pr.c),Object(r.bc)(Pr.b,8),Object(r.bc)(Tb,8),Object(r.bc)(Ib,8),Object(r.bc)(r.B),Object(r.bc)(r.z),Object(r.bc)(Ob,8),Object(r.bc)(xb,8),Object(r.bc)(Ii,8))},token:t,providedIn:"any"}),t})(),Nb=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Tb,useValue:!0},{provide:Ob,useValue:e}]}}}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[jb]}),t})();class kb extends fr.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ui.a;return this._value}next(t){super.next(this._value=t)}}var Db=n("DH7j"),Pb=n("yCtX");const Rb={};class Mb{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Lb(t,this.resultSelector))}}class Lb extends qr.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Rb),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(zr.a)(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const o=this.values,s=this.toRespond?o[n]===Rb?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Fb(t){return new Mr.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Br.a)(n):Object(pi.b)()).subscribe(e)})}function Vb(t){return function(e){return 0===t?Object(pi.b)():e.lift(new Ub(t))}}class Ub{constructor(t){if(this.total=t,this.total<0)throw new di}call(t,e){return e.subscribe(new qb(t,this.total))}}class qb extends $r.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Hb(t,e){const n=arguments.length>=2;return r=>r.pipe(t?li((e,n)=>t(e,n,r)):Ti.a,Vb(1),n?vi(e):wi(()=>new ci))}function zb(t){return function(e){const n=new Bb(t),r=e.lift(n);return n.caught=r}}class Bb{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Gb(t,this.selector,this.caught))}}class Gb extends qr.a{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Hr.a(this,void 0,void 0);this.add(r);const i=Object(zr.a)(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}var Wb=n("5+tZ");class Kb{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new $b(t,this.predicate,this.thisArg,this.source))}}class $b extends $r.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Qb(t,e){return Object(Wb.a)(t,e,1)}var Yb=n("mCNh"),Zb=n("vkgz");class Jb{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Xb(t,this.callback))}}class Xb extends $r.a{constructor(t,e){super(t),this.add(new ai.a(e))}}class t_{constructor(t,e){this.id=t,this.url=e}}class e_ extends t_{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class n_ extends t_{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class r_ extends t_{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class i_ extends t_{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class o_ extends t_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s_ extends t_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class a_ extends t_{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class u_ extends t_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class c_ extends t_{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l_{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class h_{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class f_{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class d_{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p_{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y_{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m_{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let g_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ib({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Pb(0,"router-outlet")},directives:function(){return[_E]},encapsulation:2}),t})();class v_{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function b_(t){return new v_(t)}function __(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function w_(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}class E_{constructor(t,e){this.routes=t,this.module=e}}function C_(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];S_(r,T_(e,r))}}function S_(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&C_(t.children,e)}function T_(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function O_(t){const e=t.children&&t.children.map(O_),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=g_),n}function I_(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!x_(t[i],e[i]))return!1;return!0}function x_(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function A_(t){return Array.prototype.concat.apply([],t)}function j_(t){return t.length>0?t[t.length-1]:null}function N_(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function k_(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(Br.a)(Promise.resolve(t)):Object(Lr.a)(t)}function D_(t,e,n){return n?function(t,e){return I_(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!L_(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>x_(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!L_(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!L_(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!L_(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class P_{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=b_(this.queryParams)),this._queryParamMap}toString(){return q_.serialize(this)}}class R_{constructor(t,e){this.segments=t,this.children=e,this.parent=null,N_(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return H_(this)}}class M_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=b_(this.parameters)),this._parameterMap}toString(){return $_(this)}}function L_(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function F_(t,e){let n=[];return N_(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),N_(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class V_{}class U_{parse(t){const e=new X_(t);return new P_(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return H_(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return N_(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=F_(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${H_(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${B_(e)}=${B_(t)}`).join("&"):`${B_(e)}=${B_(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const q_=new U_;function H_(t){return t.segments.map(t=>$_(t)).join("/")}function z_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function B_(t){return z_(t).replace(/%3B/gi,";")}function G_(t){return z_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function W_(t){return decodeURIComponent(t)}function K_(t){return W_(t.replace(/\+/g,"%20"))}function $_(t){return`${G_(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${G_(t)}=${G_(e[t])}`).join("")}`;var e}const Q_=/^[^\/()?;=#]+/;function Y_(t){const e=t.match(Q_);return e?e[0]:""}const Z_=/^[^=?&#]+/,J_=/^[^?&#]+/;class X_{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new R_([],{}):new R_([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new R_(t,e)),n}parseSegment(){const t=Y_(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new M_(W_(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Y_(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Y_(this.remaining);t&&(n=t,this.capture(n))}t[W_(e)]=W_(n)}parseQueryParam(t){const e=function(t){const e=t.match(Z_);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(J_);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=K_(e),i=K_(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Y_(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new R_([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class tw{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ew(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=ew(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=nw(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return nw(t,this._root).map(t=>t.value)}}function ew(t,e){if(t===e.value)return e;for(const n of e.children){const e=ew(t,n);if(e)return e}return null}function nw(t,e){if(t===e.value)return[e];for(const n of e.children){const r=nw(t,n);if(r.length)return r.unshift(e),r}return[]}class rw{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function iw(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ow extends tw{constructor(t,e){super(t),this.snapshot=e,hw(this,t)}toString(){return this.snapshot.toString()}}function sw(t,e){const n=function(t,e){const n=new cw([],{},{},"",{},"primary",e,null,t.root,-1,{});return new lw("",new rw(n,[]))}(t,e),r=new kb([new M_("",{})]),i=new kb({}),o=new kb({}),s=new kb({}),a=new kb(""),u=new aw(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new ow(new rw(u,[]),n)}class aw{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Vr.a)(t=>b_(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Vr.a)(t=>b_(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function uw(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class cw{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=b_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=b_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lw extends tw{constructor(t,e){super(e),this.url=t,hw(this,e)}toString(){return fw(this._root)}}function hw(t,e){e.value._routerState=t,e.children.forEach(e=>hw(t,e))}function fw(t){const e=t.children.length>0?` { ${t.children.map(fw).join(", ")} } `:"";return`${t.value}${e}`}function dw(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,I_(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),I_(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!I_(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),I_(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function pw(t,e){return I_(t.params,e.params)&&function(t,e){return L_(t,e)&&t.every((t,n)=>I_(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||pw(t.parent,e.parent))}function yw(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function mw(t,e,n,r,i){let o={};return r&&N_(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new P_(n.root===t?e:function t(e,n,r){const i={};return N_(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new R_(e.segments,i)}(n.root,t,e),o,i)}class gw{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&yw(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==j_(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vw{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function bw(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function _w(t,e,n){if(t||(t=new R_([],{})),0===t.segments.length&&t.hasChildren())return ww(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=bw(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Tw(s,a,e))return o;r+=2}else{if(!Tw(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new R_(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new R_(t.segments.slice(r.pathIndex),t.children),ww(e,0,i)}return r.match&&0===i.length?new R_(t.segments,{}):r.match&&!t.hasChildren()?Ew(t,e,n):r.match?ww(t,0,i):Ew(t,e,n)}function ww(t,e,n){if(0===n.length)return new R_(t.segments,{});{const r=function(t){return"object"!=typeof t[0]||void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),i={};return N_(r,(n,r)=>{null!==n&&(i[r]=_w(t.children[r],e,n))}),N_(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new R_(t.segments,i)}}function Ew(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const t=Cw(n[i].outlets);return new R_(r,t)}if(0===i&&yw(n[0])){r.push(new M_(t.segments[e].path,n[0])),i++;continue}const o=bw(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&yw(s)?(r.push(new M_(o,Sw(s))),i+=2):(r.push(new M_(o,{})),i++)}return new R_(r,{})}function Cw(t){const e={};return N_(t,(t,n)=>{null!==t&&(e[n]=Ew(new R_([],{}),0,t))}),e}function Sw(t){const e={};return N_(t,(t,n)=>e[n]=""+t),e}function Tw(t,e,n){return t==n.path&&I_(e,n.parameters)}class Ow{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),dw(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=iw(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),N_(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=iw(t),i=t.value.component?n.children:e;N_(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=iw(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new y_(t.value.snapshot))}),t.children.length&&this.forwardEvent(new d_(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(dw(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Iw(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Iw(t){dw(t.value),t.children.forEach(Iw)}function xw(t){return"function"==typeof t}function Aw(t){return t instanceof P_}class jw{constructor(t){this.segmentGroup=t||null}}class Nw{constructor(t){this.urlTree=t}}function kw(t){return new Mr.a(e=>e.error(new jw(t)))}function Dw(t){return new Mr.a(e=>e.error(new Nw(t)))}function Pw(t){return new Mr.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Rw{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(Vr.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(zb(t=>{if(t instanceof Nw)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof jw)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(Vr.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(zb(t=>{if(t instanceof jw)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new R_([],{primary:t}):t;return new P_(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Vr.a)(t=>new R_([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(Lr.a)({});const n=[],r=[],i={};return N_(t,(t,o)=>{const s=e(o,t).pipe(Object(Vr.a)(t=>i[o]=t));"primary"===o?n.push(s):r.push(s)}),Lr.a.apply(null,n.concat(r)).pipe(Wi(),Hb(),Object(Vr.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(Lr.a)(...n).pipe(Object(Vr.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(zb(t=>{if(t instanceof jw)return Object(Lr.a)(null);throw t}))),Wi(),Oi(t=>!!t),zb((t,n)=>{if(t instanceof ci||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(Lr.a)(new R_([],{}));throw new jw(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Vw(r)!==o?kw(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):kw(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Dw(i):this.lineralizeSegments(n,i).pipe(Object(Wb.a)(n=>{const i=new R_(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Mw(e,r,i);if(!s)return kw(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Dw(l):this.lineralizeSegments(r,l).pipe(Object(Wb.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Vr.a)(t=>(n._loadedConfig=t,new R_(r,{})))):Object(Lr.a)(new R_(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Mw(e,n,r);if(!i)return kw(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(Wb.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Fw(t,e,n)&&"primary"!==Vw(n))}(t,n,r)?{segmentGroup:Lw(new R_(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==Vw(r)&&(n[Vw(r)]=new R_([],{}));return n}(r,new R_(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Fw(t,e,n))}(t,n,r)?{segmentGroup:Lw(new R_(t.segments,function(t,e,n,r){const i={};for(const o of n)Fw(t,e,o)&&!r[Vw(o)]&&(i[Vw(o)]=new R_([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(Vr.a)(t=>new R_(o,t))):0===r.length&&0===s.length?Object(Lr.a)(new R_(o,{})):this.expandSegment(n,i,r,s,"primary",!0).pipe(Object(Vr.a)(t=>new R_(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Lr.a)(new E_(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Lr.a)(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?Object(Br.a)(r).pipe(Object(Vr.a)(r=>{const i=t.get(r);let o;if(function(t){return t&&xw(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!xw(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return k_(o)})).pipe(Wi(),(i=t=>!0===t,t=>t.lift(new Kb(i,void 0,t)))):Object(Lr.a)(!0);var i}(t.injector,e,n).pipe(Object(Wb.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Vr.a)(t=>(e._loadedConfig=t,t))):function(t){return new Mr.a(e=>e.error(__(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Lr.a)(new E_([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Lr.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Pw(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new P_(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return N_(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return N_(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new R_(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Mw(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||w_)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Lw(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new R_(t.segments.concat(e.segments),e.children)}return t}function Fw(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Vw(t){return t.outlet||"primary"}class Uw{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class qw{constructor(t,e){this.component=t,this.route=e}}function Hw(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=iw(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!L_(t.url,e.url);case"pathParamsOrQueryParamsChange":return!L_(t.url,e.url)||!I_(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pw(t,e)||!I_(t.queryParams,e.queryParams);case"paramsChange":default:return!pw(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Uw(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new qw(u&&u.outlet&&u.outlet.component||null,a))}else a&&Bw(n,u,o),o.canActivateChecks.push(new Uw(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),N_(s,(t,e)=>Bw(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function zw(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Bw(t,e,n){const r=iw(t),i=t.value;N_(r,(t,r)=>{Bw(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new qw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const Gw=Symbol("INITIAL_VALUE");function Ww(){return Gr(t=>function(...t){let e=null,n=null;return Object($i.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Db.a)(t[0])&&(t=t[0]),Object(Pb.a)(t,n).lift(new Mb(e))}(...t.map(t=>t.pipe(yi(1),Qi(Gw)))).pipe(Qr((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Gw)return t;if(r===Gw&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Aw(r))return r}return t},t)},Gw),li(t=>t!==Gw),Object(Vr.a)(t=>Aw(t)?t:!0===t),yi(1)))}function Kw(t,e){return null!==t&&e&&e(new p_(t)),Object(Lr.a)(!0)}function $w(t,e){return null!==t&&e&&e(new f_(t)),Object(Lr.a)(!0)}function Qw(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Lr.a)(!0);const i=r.map(r=>Fb(()=>{const i=zw(r,e,n);let o;if(function(t){return t&&xw(t.canActivate)}(i))o=k_(i.canActivate(e,t));else{if(!xw(i))throw new Error("Invalid CanActivate guard");o=k_(i(e,t))}return o.pipe(Oi())}));return Object(Lr.a)(i).pipe(Ww())}function Yw(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Fb(()=>{const i=e.guards.map(i=>{const o=zw(i,e.node,n);let s;if(function(t){return t&&xw(t.canActivateChild)}(o))s=k_(o.canActivateChild(r,t));else{if(!xw(o))throw new Error("Invalid CanActivateChild guard");s=k_(o(r,t))}return s.pipe(Oi())});return Object(Lr.a)(i).pipe(Ww())}));return Object(Lr.a)(i).pipe(Ww())}class Zw{}class Jw{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=eE(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new cw([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new rw(n,e),i=new lw(this.url,r);return this.inheritParamsAndData(i._root),Object(Lr.a)(i)}catch(db){return new Mr.a(e=>e.error(db))}}inheritParamsAndData(t){const e=t.value,n=uw(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=F_(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(db){if(!(db instanceof Zw))throw db}if(this.noLeftoversInUrl(e,n,r))return[];throw new Zw}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Zw;if((t.outlet||"primary")!==r)throw new Zw;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?j_(n).parameters:{};i=new cw(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,iE(t),r,t.component,t,Xw(e),tE(e)+n.length,oE(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Zw;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||w_)(n,t,e);if(!r)throw new Zw;const i={};N_(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new cw(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,iE(t),r,t.component,t,Xw(e),tE(e)+o.length,oE(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=eE(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new rw(i,t)]}if(0===a.length&&0===c.length)return[new rw(i,[])];const l=this.processSegment(a,u,c,"primary");return[new rw(i,l)]}}function Xw(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function tE(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function eE(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>nE(t,e,n)&&"primary"!==rE(n))}(t,n,r)){const i=new R_(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==rE(o)){const n=new R_([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[rE(o)]=n}return i}(t,e,r,new R_(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>nE(t,e,n))}(t,n,r)){const o=new R_(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(nE(t,n,a)&&!i[rE(a)]){const n=new R_([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[rE(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new R_(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function nE(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function rE(t){return t.outlet||"primary"}function iE(t){return t.data||{}}function oE(t){return t.resolve||{}}function sE(t,e,n,r){const i=zw(t,e,r);return k_(i.resolve?i.resolve(e,n):i(e,n))}function aE(t){return function(e){return e.pipe(Gr(e=>{const n=t(e);return n?Object(Br.a)(n).pipe(Object(Vr.a)(()=>e)):Object(Br.a)([e])}))}}class uE{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const cE=new r.q("ROUTES");class lE{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Vr.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new E_(A_(r.injector.get(cE)).map(O_),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(Br.a)(this.loader.load(t)):k_(t()).pipe(Object(Wb.a)(t=>t instanceof r.v?Object(Lr.a)(t):Object(Br.a)(this.compiler.compileModuleAsync(t))))}}class hE{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function fE(t){throw t}function dE(t,e,n){return e.parse("/")}function pE(t,e){return Object(Lr.a)(null)}let yE=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new fr.a,this.errorHandler=fE,this.malformedUriErrorHandler=dE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pE,afterPreactivation:pE},this.urlHandlingStrategy=new hE,this.routeReuseStrategy=new uE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.X);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new P_(new R_([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new lE(s,a,t=>this.triggerEvent(new l_(t)),t=>this.triggerEvent(new h_(t))),this.routerState=sw(this.currentUrlTree,this.rootComponentType),this.transitions=new kb({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(li(t=>0!==t.id),Object(Vr.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Gr(t=>{let n=!1,r=!1;return Object(Lr.a)(t).pipe(Object(Zb.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Gr(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Lr.a)(t).pipe(Gr(t=>{const n=this.transitions.getValue();return e.next(new e_(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?pi.a:[t]}),Gr(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(Gr(t=>function(t,e,n,r,i){return new Rw(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Vr.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(Zb.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(Wb.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Jw(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Vr.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Zb.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(Zb.a)(t=>{const n=new o_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new e_(n,this.serializeUrl(r),i,o);e.next(a);const u=sw(r,this.rootComponentType).snapshot;return Object(Lr.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),pi.a}),aE(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Zb.a)(t=>{const e=new s_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Vr.a)(t=>Object.assign(Object.assign({},t),{guards:Hw(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(Wb.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Lr.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Br.a)(t).pipe(Object(Wb.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Lr.a)(!0);const s=o.map(o=>{const s=zw(o,e,i);let a;if(function(t){return t&&xw(t.canDeactivate)}(s))a=k_(s.canDeactivate(t,e,n,r));else{if(!xw(s))throw new Error("Invalid CanDeactivate guard");a=k_(s(t,e,n,r))}return a.pipe(Oi())});return Object(Lr.a)(s).pipe(Ww())}(t.component,t.route,n,e,r)),Oi(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Wb.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Br.a)(e).pipe(Qb(e=>Object(Br.a)([$w(e.route.parent,r),Kw(e.route,r),Yw(t,e.path,n),Qw(t,e.route,n)]).pipe(Wi(),Oi(t=>!0!==t,!0))),Oi(t=>!0!==t,!0))}(r,o,t,e):Object(Lr.a)(n)),Object(Vr.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Zb.a)(t=>{if(Aw(t.guardsResult)){const e=__(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(Zb.a)(t=>{const e=new a_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),li(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new r_(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),aE(t=>{if(t.guards.canActivateChecks.length)return Object(Lr.a)(t).pipe(Object(Zb.a)(t=>{const e=new u_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(e=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(t){return t.pipe(Object(Wb.a)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;return i.length?Object(Br.a)(i).pipe(Qb(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Lr.a)({});if(1===i.length){const o=i[0];return sE(t[o],e,n,r).pipe(Object(Vr.a)(t=>({[o]:t})))}const o={};return Object(Br.a)(i).pipe(Object(Wb.a)(i=>sE(t[i],e,n,r).pipe(Object(Vr.a)(t=>(o[i]=t,t))))).pipe(Hb(),Object(Vr.a)(()=>o))}(t._resolve,t,e,r).pipe(Object(Vr.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),uw(t,n).resolve),null)))}(t.route,r,e,n)),function(t,e){return arguments.length>=2?function(n){return Object(Yb.a)(Qr(t,e),Vb(1),vi(e))(n)}:function(e){return Object(Yb.a)(Qr((e,n,r)=>t(e,n,r+1)),Vb(1))(e)}}((t,e)=>t),Object(Vr.a)(e=>t)):Object(Lr.a)(t)}))}),Object(Zb.a)(t=>{const e=new c_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}));var e,n}),aE(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Vr.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new rw(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new aw(new kb((i=n.value).url),new kb(i.params),new kb(i.queryParams),new kb(i.fragment),new kb(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new rw(r,o)}}var i}(t,e._root,n?n._root:void 0);return new ow(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Zb.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Vr.a)(t=>(new Ow(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Zb.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new r_(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Jb(i))),zb(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Aw(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new r_(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new i_(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Rl){t.reject(Rl)}}var i;return pi.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){C_(t),this.config=t.map(O_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.U)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return mw(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new gw(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return N_(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new gw(n,e,r)}(n);if(o.toRoot())return mw(e.root,new R_([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new vw(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new vw(n.snapshot._urlSegment,!0,0);const r=yw(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new vw(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?ww(s.segmentGroup,s.index,o.commands):_w(s.segmentGroup,s.index,o.commands);return mw(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.U)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Aw(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(db){e=this.malformedUriErrorHandler(db,this.urlSerializer,t)}return e}isActive(t,e){if(Aw(t))return D_(this.currentUrlTree,t,e);const n=this.parseUrl(t);return D_(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new n_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition();if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,a,u;i?(s=i.resolve,a=i.reject,u=i.promise):u=new Promise((t,e)=>{s=t,a=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:a,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(t){r.ec()},t.\u0275dir=r.Jb({type:t}),t})(),mE=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(r.U)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:gE(this.skipLocationChange),replaceUrl:gE(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:gE(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:gE(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(yE),r.Ob(aw),r.cc("tabindex"),r.Ob(r.D),r.Ob(r.l))},t.\u0275dir=r.Jb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.fc("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),t})();function gE(t){return""===t||!!t}class vE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new bE,this.attachRef=null}}class bE{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new vE,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let _E=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new wE(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(bE),r.Ob(r.O),r.Ob(r.j),r.cc("name"),r.Ob(r.h))},t.\u0275dir=r.Jb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class wE{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===aw?this.route:t===bE?this.childContexts:this.parent.get(t,e)}}class EE{}class CE{preload(t,e){return Object(Lr.a)(null)}}let SE=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new lE(e,n,e=>t.triggerEvent(new l_(e)),e=>t.triggerEvent(new h_(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(li(t=>t instanceof n_),Qb(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Br.a)(n).pipe(Object(Gi.a)(),Object(Vr.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(Wb.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.bc(yE),r.bc(r.w),r.bc(r.i),r.bc(r.r),r.bc(EE))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),TE=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof e_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof n_&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof m_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new m_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(t){r.ec()},t.\u0275dir=r.Jb({type:t}),t})();const OE=new r.q("ROUTER_CONFIGURATION"),IE=new r.q("ROUTER_FORROOT_GUARD"),xE=[E,{provide:V_,useClass:U_},{provide:yE,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new yE(null,t,e,n,r,i,o,A_(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[V_,bE,E,r.r,r.w,r.i,cE,OE,[class{},new r.A],[class{},new r.A]]},bE,{provide:aw,useFactory:function(t){return t.routerState.root},deps:[yE]},{provide:r.w,useClass:r.J},SE,CE,class{preload(t,e){return e().pipe(zb(()=>Object(Lr.a)(null)))}},{provide:OE,useValue:{enableTracing:!1}}];function AE(){return new r.y("Router",yE)}let jE=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[xE,PE(e),{provide:IE,useFactory:DE,deps:[[yE,new r.A,new r.I]]},{provide:OE,useValue:n||{}},{provide:g,useFactory:kE,deps:[u,[new r.p(b),new r.A],OE]},{provide:TE,useFactory:NE,deps:[yE,ft,OE]},{provide:EE,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:CE},{provide:r.y,multi:!0,useFactory:AE},[RE,{provide:r.d,multi:!0,useFactory:ME,deps:[RE]},{provide:FE,useFactory:LE,deps:[RE]},{provide:r.b,multi:!0,useExisting:FE}]]}}static forChild(e){return{ngModule:t,providers:[PE(e)]}}}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)(r.bc(IE,8),r.bc(yE,8))}}),t})();function NE(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new TE(t,e,n)}function kE(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function DE(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function PE(t){return[{provide:r.a,multi:!0,useValue:t},{provide:cE,multi:!0,useValue:t}]}let RE=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new fr.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(yE),r=this.injector.get(OE);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(Lr.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(OE),n=this.injector.get(SE),i=this.injector.get(TE),o=this.injector.get(yE),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.bc(r.r))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();function ME(t){return t.appInitializer.bind(t)}function LE(t){return t.bootstrapListener.bind(t)}const FE=new r.q("Router Initializer");let VE=(()=>{class t{constructor(t,e){this.actRoute=t,this.toastr=e,this.imgSrc="https://www.allianceplast.com/wp-content/uploads/2017/11/no-image.png"}ngOnInit(){this.actRoute.data.subscribe(t=>{this.selectedItem=t.item,fetch(this.selectedItem.Poster).then(t=>{200==t.status&&(this.imgSrc=this.selectedItem.Poster)},t=>{this.toastr.error(t)})})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(aw),r.Ob(jr))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-item-details"]],decls:17,vars:5,consts:[[1,"container","pt-4","d-flex","flex-column","align-items-center"],[1,"row"],["type","button",1,"btn","btn-primary"],["routerLink","/",1,"mb-0"],[1,"row","pt-3"],[1,"col-5",3,"src"],[1,"col-7"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Tb(2,"Button",2),r.Tb(3,"p",3),r.Ec(4,"Go Back"),r.Sb(),r.Sb(),r.Sb(),r.Tb(5,"div",4),r.Pb(6,"img",5),r.Tb(7,"div",6),r.Tb(8,"div",1),r.Tb(9,"h4"),r.Ec(10),r.Sb(),r.Sb(),r.Tb(11,"div",1),r.Tb(12,"p"),r.Ec(13),r.Sb(),r.Sb(),r.Tb(14,"div",1),r.Tb(15,"p"),r.Ec(16),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb()),2&t&&(r.Ab(6),r.nc("src",e.imgSrc,r.xc),r.Ab(4),r.Hc("",e.selectedItem.Title," (",e.selectedItem.Type,")"),r.Ab(3),r.Gc("IMDB Code: ",e.selectedItem.imdbID,""),r.Ab(3),r.Gc("Year: ",e.selectedItem.Year,""))},directives:[mE],styles:[""]}),t})();var UE=n("t19r");let qE=(()=>{class t{sortList(t,e){return e.sort(t?(t,e)=>t.Title>e.Title?1:-1:(t,e)=>t.Title>e.Title?-1:1)}arrangeData(t){let e=[...t],n={};for(;e.length>0;){let t=e[0].Type,r=e.filter(e=>{if(e.Type==t)return e});n[e[0].Type]=r,e=e.filter(e=>e.Type!==t)}return n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),HE=(()=>{class t{constructor(t,e,n){this.fireService=t,this.utilService=e,this.toastr=n,this.collectionName="data-list"}initiallizeDb(){UE.a.forEach(t=>this.fireService.collection(this.collectionName).doc().set(t))}getList(){return this.fireService.collection(this.collectionName).snapshotChanges().pipe(Object(Vr.a)(t=>{if(t.length){let e=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()));return this.utilService.arrangeData(e)}return this.initiallizeDb()}))}getItemById(t){return this.fireService.collection(this.collectionName).doc(t).get().pipe(Object(Vr.a)(t=>t.data()))}updateItemById(t){return this.fireService.collection(this.collectionName).doc(t.id).update(t)}deleteItemById(t){return this.fireService.collection(this.collectionName).doc(t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.bc(jb),r.bc(qE),r.bc(jr))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),zE=(()=>{class t{constructor(){this.onToggleViewEmmiter=new r.n,this.onToggleAscEmmiter=new r.n,this.onRefreshEmmiter=new r.n}ngOnInit(){}toggleView(){this.onToggleViewEmmiter.emit()}toggleAsc(){this.onToggleAscEmmiter.emit()}refreshList(){this.onRefreshEmmiter.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ib({type:t,selectors:[["app-list-buttons"]],inputs:{isList:"isList",isAsc:"isAsc"},outputs:{onToggleViewEmmiter:"onToggleViewEmmiter",onToggleAscEmmiter:"onToggleAscEmmiter",onRefreshEmmiter:"onRefreshEmmiter"},decls:10,vars:2,consts:[[1,"container","h-100","d-flex","align-items-center","flex-column","pt-4"],[1,"row"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row","py-3"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Tb(2,"button",2),r.fc("click",(function(){return e.toggleView()})),r.Ec(3),r.Sb(),r.Sb(),r.Tb(4,"div",3),r.Tb(5,"button",2),r.fc("click",(function(){return e.refreshList()})),r.Ec(6," Refresh "),r.Sb(),r.Sb(),r.Tb(7,"div",1),r.Tb(8,"button",2),r.fc("click",(function(){return e.toggleAsc()})),r.Ec(9),r.Sb(),r.Sb(),r.Sb()),2&t&&(r.Ab(3),r.Gc(" ",e.isList?"Grid":"List"," "),r.Ab(6),r.Gc(" ",e.isAsc?"Asc":"Dec"," "))},styles:[""]}),t})();var BE=n("XoHu");function GE(t,e){return new Mr.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Br.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const WE=new r.q("NgValueAccessor"),KE={provide:WE,useExisting:Object(r.T)(()=>$E),multi:!0};let $E=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.D),r.Ob(r.l))},t.\u0275dir=r.Jb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.fc("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[r.zb([KE])]}),t})();const QE={provide:WE,useExisting:Object(r.T)(()=>ZE),multi:!0},YE=new r.q("CompositionEventMode");let ZE=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.D),r.Ob(r.l),r.Ob(YE,8))},t.\u0275dir=r.Jb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.fc("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[r.zb([QE])]}),t})(),JE=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Jb({type:t}),t})(),XE=(()=>{class t extends JE{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return tC(e||t)},t.\u0275dir=r.Jb({type:t,features:[r.xb]}),t})();const tC=r.Vb(XE);function eC(){throw new Error("unimplemented")}class nC extends JE{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return eC()}get asyncValidator(){return eC()}}let rC=(()=>{class t extends class{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(nC,2))},t.\u0275dir=r.Jb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Fb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.xb]}),t})();function iC(t){return null==t||0===t.length}const oC=new r.q("NgValidators"),sC=new r.q("NgAsyncValidators"),aC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class uC{static min(t){return e=>{if(iC(e.value)||iC(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(iC(e.value)||iC(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return iC(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return iC(t.value)||aC.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(iC(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return uC.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(iC(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(cC);return 0==e.length?null:function(t){return hC(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(cC);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Db.a)(e))return GE(e,null);if(Object(BE.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return GE(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return GE(t=1===t.length&&Object(Db.a)(t[0])?t[0]:t,null).pipe(Object(Vr.a)(t=>e(...t)))}return GE(t,null)}(function(t,e){return e.map(e=>e(t))}(t,e).map(lC)).pipe(Object(Vr.a)(hC))}}}function cC(t){return null!=t}function lC(t){const e=Object(r.rb)(t)?Object(Br.a)(t):t;if(!Object(r.qb)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function hC(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function fC(t){return t.validate?e=>t.validate(e):t}function dC(t){return t.validate?e=>t.validate(e):t}const pC={provide:WE,useExisting:Object(r.T)(()=>yC),multi:!0};let yC=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.D),r.Ob(r.l))},t.\u0275dir=r.Jb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.fc("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.zb([pC])]}),t})();const mC={provide:WE,useExisting:Object(r.T)(()=>vC),multi:!0};let gC=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),vC=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(nC),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.D),r.Ob(r.l),r.Ob(gC),r.Ob(r.r))},t.\u0275dir=r.Jb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.fc("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.zb([mC])]}),t})();const bC={provide:WE,useExisting:Object(r.T)(()=>_C),multi:!0};let _C=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.D),r.Ob(r.l))},t.\u0275dir=r.Jb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.fc("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.zb([bC])]}),t})();const wC='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',EC='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',CC={provide:WE,useExisting:Object(r.T)(()=>SC),multi:!0};let SC=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=r.sb}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.D),r.Ob(r.l))},t.\u0275dir=r.Jb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.fc("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.zb([CC])]}),t})();const TC={provide:WE,useExisting:Object(r.T)(()=>OC),multi:!0};let OC=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=r.sb}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.D),r.Ob(r.l))},t.\u0275dir=r.Jb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.fc("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.zb([TC])]}),t})();function IC(t,e){return[...e.path,t]}function xC(t,e){t||jC(e,"Cannot find control with"),e.valueAccessor||jC(e,"No value accessor for form control with"),t.validator=uC.compose([t.validator,e.validator]),t.asyncValidator=uC.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&AC(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&AC(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function AC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function jC(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function NC(t){return null!=t?uC.compose(t.map(fC)):null}function kC(t){return null!=t?uC.composeAsync(t.map(dC)):null}const DC=[$E,_C,yC,SC,OC,vC];function PC(t){const e=MC(t)?t.validators:t;return Array.isArray(e)?NC(e):e||null}function RC(t,e){const n=MC(e)?e.asyncValidators:t;return Array.isArray(n)?kC(n):n||null}function MC(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class LC{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=PC(t)}setAsyncValidators(t){this.asyncValidator=RC(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=lC(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof VC?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof UC&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){MC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class FC extends LC{constructor(t=null,e,n){super(PC(e),RC(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class VC extends LC{constructor(t,e,n){super(PC(e),RC(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof FC?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class UC extends LC{constructor(t,e,n){super(PC(e),RC(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof FC?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const qC={provide:XE,useExisting:Object(r.T)(()=>zC)},HC=(()=>Promise.resolve(null))();let zC=(()=>{class t extends XE{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new VC({},NC(t),kC(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){HC.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),xC(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){HC.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this._directives,t)})}addFormGroup(t){HC.then(()=>{const e=this._findContainer(t.path),n=new VC({});(function(t,e){null==t&&jC(e,"Cannot find control with"),t.validator=uC.compose([t.validator,e.validator]),t.asyncValidator=uC.composeAsync([t.asyncValidator,e.asyncValidator])})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){HC.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){HC.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(oC,10),r.Ob(sC,10))},t.\u0275dir=r.Jb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.fc("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([qC]),r.xb]}),t})(),BC=(()=>{class t extends XE{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return IC(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return NC(this._validators)}get asyncValidator(){return kC(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return GC(e||t)},t.\u0275dir=r.Jb({type:t,features:[r.xb]}),t})();const GC=r.Vb(BC);class WC{static modelParentException(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${wC}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${EC}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${wC}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${EC}`)}}const KC={provide:XE,useExisting:Object(r.T)(()=>$C)};let $C=(()=>{class t extends BC{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof t||this._parent instanceof zC||WC.modelGroupParentException()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(XE,5),r.Ob(oC,10),r.Ob(sC,10))},t.\u0275dir=r.Jb({type:t,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[r.zb([KC]),r.xb]}),t})();const QC={provide:nC,useExisting:Object(r.T)(()=>ZC)},YC=(()=>Promise.resolve(null))();let ZC=(()=>{class t extends nC{constructor(t,e,n,i){super(),this.control=new FC,this._registered=!1,this.update=new r.n,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||jC(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{var o;e.constructor===ZE?n=e:(o=e,DC.some(t=>o.constructor===t)?(r&&jC(t,"More than one built-in value accessor matches form control with"),r=e):(i&&jC(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(jC(t,"No valid value accessor for form control with"),null)}(this,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object(r.sb)(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?IC(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return NC(this._rawValidators)}get asyncValidator(){return kC(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){xC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof $C)&&this._parent instanceof BC?WC.formGroupNameException():this._parent instanceof $C||this._parent instanceof zC||WC.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||WC.missingNameException()}_updateValue(t){YC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;YC.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(XE,9),r.Ob(oC,10),r.Ob(sC,10),r.Ob(WE,10))},t.\u0275dir=r.Jb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([QC]),r.xb,r.yb]}),t})(),JC=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)}}),t})(),XC=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[gC],imports:[JC]}),t})();function tS(t,e){if(1&t){const t=r.Ub();r.Tb(0,"p",7),r.fc("click",(function(){return r.vc(t),r.hc().toggleEdit()})),r.Ec(1),r.Sb()}if(2&t){const t=r.hc();r.Ab(1),r.Gc(" ",t.item.Title," ")}}function eS(t,e){if(1&t){const t=r.Ub();r.Tb(0,"div",8),r.Tb(1,"div",9),r.Tb(2,"div",10),r.Tb(3,"input",11),r.fc("ngModelChange",(function(e){return r.vc(t),r.hc().newTitle=e})),r.Sb(),r.Sb(),r.Tb(4,"div",12),r.Tb(5,"button",13),r.fc("click",(function(){return r.vc(t),r.hc().updateTitle()})),r.Ec(6," Save "),r.Sb(),r.Tb(7,"button",13),r.fc("click",(function(){return r.vc(t),r.hc().toggleEdit()})),r.Ec(8," Cancel "),r.Sb(),r.Sb(),r.Sb(),r.Sb()}if(2&t){const t=r.hc();r.Ab(3),r.nc("ngModel",t.newTitle)}}const nS=function(t){return[t]};let rS=(()=>{class t{constructor(t){this.toastr=t,this.isList=!1,this.updateItemEmmiter=new r.n,this.onRemoveItemEmmiter=new r.n,this.imgSrc="https://www.allianceplast.com/wp-content/uploads/2017/11/no-image.png",this.newTitle="",this.editMode=!1}ngOnInit(){this.item&&(this.newTitle=this.item.Title,"N/A"!==this.item.Poster&&fetch(this.item.Poster).then(t=>{200==t.status&&(this.imgSrc=this.item.Poster)}))}toggleEdit(){this.editMode=!this.editMode,this.newTitle=this.item.Title}updateTitle(){""!=this.newTitle&&(this.item.Title=this.newTitle,this.updateItemEmmiter.emit(this.item)),this.toggleEdit()}removeItem(){this.onRemoveItemEmmiter.emit(this.item.id)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(jr))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-item"]],inputs:{item:"item",isList:"isList"},outputs:{updateItemEmmiter:"updateItemEmmiter",onRemoveItemEmmiter:"onRemoveItemEmmiter"},decls:14,vars:18,consts:[[1,"container","border","rounded","mb-3"],[1,"row"],[3,"routerLink"],["class","d-flex cursor-pointer mb-0",3,"click",4,"ngIf"],["class","row pr-2",4,"ngIf"],[1,"d-flex","mb-0"],["type","button",1,"btn","btn-danger",3,"click"],[1,"d-flex","cursor-pointer","mb-0",3,"click"],[1,"row","pr-2"],[1,"input-group","mb-3","d-flex","flex-md-row","flex-column"],[1,"row","mx-0"],["type","text","input","",1,"form-control","col-md-9","w-100",3,"ngModel","ngModelChange"],[1,"row","mx-0","d-flex","justify-content-center"],["type","button",1,"btn","btn-outline-secondary","col-md-2","col-4",3,"click"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Pb(2,"div",2),r.Tb(3,"div"),r.Cc(4,tS,2,1,"p",3),r.Cc(5,eS,9,1,"div",4),r.Tb(6,"p",5),r.Ec(7),r.Sb(),r.Tb(8,"p",5),r.Ec(9),r.ic(10,"date"),r.Sb(),r.Tb(11,"div"),r.Tb(12,"button",6),r.fc("click",(function(){return e.removeItem()})),r.Ec(13,"Remove"),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb()),2&t&&(r.Ab(2),r.Db("bg-image ",e.isList?"col-5":"col-12"," pl-0 cursor-pointer"),r.Bc("background","url("+e.imgSrc+")",r.Hb),r.nc("routerLink",r.qc(16,nS,"/item/"+e.item.id)),r.Ab(1),r.Cb(e.isList?"col-7 d-flex flex-column justify-content-center":"col-12"),r.Ab(1),r.nc("ngIf",!e.editMode),r.Ab(1),r.nc("ngIf",e.editMode),r.Ab(2),r.Gc("IMDB: ",e.item.imdbID,""),r.Ab(2),r.Gc(" Year: ",r.kc(10,13,e.item.Year,"y")," "))},directives:[mE,ot,ZE,rC,ZC],pipes:[ut],styles:[".bg-image[_ngcontent-%COMP%]{height:200px!important;width:200px!important;background-position:50%!important;background-repeat:no-repeat!important;background-size:contain!important}"]}),t})();function iS(t,e){if(1&t){const t=r.Ub();r.Tb(0,"div"),r.Tb(1,"app-item",9),r.fc("updateItemEmmiter",(function(e){return r.vc(t),r.hc().onUpdateItem(e)}))("onRemoveItemEmmiter",(function(e){return r.vc(t),r.hc().onDeleteItemEmmiter.emit(e)})),r.Sb(),r.Sb()}if(2&t){const t=e.$implicit,n=r.hc();r.Cb(n.isList?"col-12":"col-md-5 col-12"),r.Ab(1),r.nc("item",t)("isList",n.isList)}}let oS=(()=>{class t{constructor(t){this.utilService=t,this.loadDataEmmiter=new r.n,this.onUpdateItemEmmiter=new r.n,this.onDeleteItemEmmiter=new r.n,this.isList=!0,this.filterBy="",this.filteredList=[],this.isAsc=!0}ngOnInit(){this.toggleAsc()}toggleAsc(){this.filteredList.length?this.filteredList=this.utilService.sortList(this.isAsc,this.filteredList):this.list=this.utilService.sortList(this.isAsc,this.list),this.isAsc=!this.isAsc}toggleListView(){this.isList=!this.isList}filterList(){if(""!==this.filterBy){let t=[...this.list];this.filteredList=t.filter(t=>{let e=new Date(t.Year).getFullYear().toString();if(t.Title.toLowerCase().includes(this.filterBy.toLowerCase())||e.includes(this.filterBy))return t})}else this.filteredList=[]}clearInput(){this.filterBy="",this.filteredList=[]}getDataFromServer(){this.loadDataEmmiter.emit()}onUpdateItem(t){this.onUpdateItemEmmiter.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(qE))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-list"]],inputs:{list:"list"},outputs:{loadDataEmmiter:"loadDataEmmiter",onUpdateItemEmmiter:"onUpdateItemEmmiter",onDeleteItemEmmiter:"onDeleteItemEmmiter"},decls:12,vars:8,consts:[[1,"container","d-flex"],[1,"col-2"],[3,"isAsc","isList","onRefreshEmmiter","onToggleAscEmmiter","onToggleViewEmmiter"],[1,"col-10"],[1,"row","pb-3"],["placeholder","Search",1,"form-control","col-6","mx-3",3,"ngModel","ngModelChange","input"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row","pb-3","ml-3"],[3,"class",4,"ngFor","ngForOf"],[3,"item","isList","updateItemEmmiter","onRemoveItemEmmiter"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Tb(2,"app-list-buttons",2),r.fc("onRefreshEmmiter",(function(){return e.getDataFromServer()}))("onToggleAscEmmiter",(function(){return e.toggleAsc()}))("onToggleViewEmmiter",(function(){return e.toggleListView()})),r.Sb(),r.Sb(),r.Tb(3,"div",3),r.Tb(4,"div",4),r.Tb(5,"input",5),r.fc("ngModelChange",(function(t){return e.filterBy=t}))("input",(function(){return e.filterList()})),r.Sb(),r.Tb(6,"button",6),r.fc("click",(function(){return e.clearInput()})),r.Ec(7," Clear "),r.Sb(),r.Sb(),r.Tb(8,"div",7),r.Ec(9),r.Sb(),r.Tb(10,"div"),r.Cc(11,iS,2,5,"div",8),r.Sb(),r.Sb(),r.Sb()),2&t&&(r.Ab(2),r.nc("isAsc",e.isAsc)("isList",e.isList),r.Ab(3),r.nc("ngModel",e.filterBy),r.Ab(4),r.Gc("Show: ",e.filteredList.length?e.filteredList.length:e.list.length," Results"),r.Ab(1),r.Db("",e.isList?"":" d-flex flex-wrap"," container px-0"),r.Ab(1),r.nc("ngForOf",e.filteredList.length?e.filteredList:e.list))},directives:[zE,ZE,rC,ZC,rt,rS],styles:[""]}),t})();function sS(t,e){if(1&t){const t=r.Ub();r.Tb(0,"li",4),r.fc("click",(function(){r.vc(t);const n=e.$implicit;return r.hc(2).setSelectedKey(n.key)})),r.Tb(1,"p"),r.Ec(2),r.Sb(),r.Sb()}if(2&t){const t=e.$implicit,n=r.hc(2);r.Ab(1),r.Db("nav-link mb-0 cursor-pointer ",t.key==n.selectedKey?"active":"",""),r.Ab(1),r.Hc(" ",t.key," (",t.value.length,") ")}}function aS(t,e){if(1&t){const t=r.Ub();r.Tb(0,"div"),r.Tb(1,"ul",1),r.Cc(2,sS,3,5,"li",2),r.ic(3,"keyvalue"),r.Sb(),r.Tb(4,"app-list",3),r.fc("loadDataEmmiter",(function(){return r.vc(t),r.hc().loadData()}))("onUpdateItemEmmiter",(function(e){return r.vc(t),r.hc().updateData(e)}))("onDeleteItemEmmiter",(function(e){return r.vc(t),r.hc().deleteItem(e)})),r.Sb(),r.Sb()}if(2&t){const t=r.hc();r.Ab(2),r.nc("ngForOf",r.jc(3,2,t.itemList)),r.Ab(2),r.nc("list",t.itemList[t.selectedKey])}}let uS=(()=>{class t{constructor(t){this.service=t,this.selectedKey="movie"}ngOnInit(){this.loadData()}loadData(){this.service.getList().subscribe(t=>this.itemList=t)}updateData(t){this.service.updateItemById(t)}deleteItem(t){this.service.deleteItemById(t)}setSelectedKey(t){this.selectedKey=t}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(HE))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-main-page"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav","nav-tabs","mb-3","d-flex","justify-content-center"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[3,"list","loadDataEmmiter","onUpdateItemEmmiter","onDeleteItemEmmiter"],[1,"nav-item",3,"click"]],template:function(t,e){1&t&&r.Cc(0,aS,5,4,"div",0),2&t&&r.nc("ngIf",e.itemList)},directives:[ot,rt,oS],pipes:[ct],styles:[""]}),t})(),cS=(()=>{class t{constructor(t,e){this.service=t,this.router=e}resolve(t){let e=t.paramMap.get("id");return this.service.getItemById(e).pipe(zb(t=>(this.router.navigate(["/"]),Object(Lr.a)(null))))}}return t.\u0275fac=function(e){return new(e||t)(r.bc(HE),r.bc(yE))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();const lS=[{path:"",pathMatch:"full",component:uS},{path:"item/:id",pathMatch:"full",component:VE,resolve:{item:cS}}];let hS=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[HE],imports:[[jE.forRoot(lS)],jE]}),t})();n("Y7HM"),n("KqfI");var fS=n("n6bG");function dS(t,e,n,r){return Object(fS.a)(n)&&(r=n,n=void 0),r?dS(t,e,n).pipe(Object(Vr.a)(t=>Object(Db.a)(t)?r(...t):r(t))):new Mr.a(r=>{!function t(e,n,r,i,o){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,o),s=()=>t.removeEventListener(n,r,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),s=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),s=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,a=e.length;s<a;s++)t(e[s],n,r,i,o)}i.add(s)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)})}function pS(t){return e=>e.lift(new yS(t))}class yS{constructor(t){this.notifier=t}call(t,e){const n=new mS(t),r=Object(zr.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class mS extends qr.a{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,r,i){this.seenValue=!0,this.complete()}notifyComplete(){}}n("WMd4"),$localize`:@@ngb.alert.close␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`;const gS=["*"];$localize`:@@ngb.carousel.previous␟680d5c75b7fd8d37961083608b9fcdc4167b4c43␟4452427314943113135:Previous`,$localize`:@@ngb.carousel.next␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`,$localize`:@@ngb.datepicker.previous-month␟c3b08b07b5ab98e7cdcf18df39355690ab7d3884␟8586908745456864217:Previous month`,$localize`:@@ngb.datepicker.previous-month␟c3b08b07b5ab98e7cdcf18df39355690ab7d3884␟8586908745456864217:Previous month`,$localize`:@@ngb.datepicker.next-month␟4bd046985cfe13040d5ef0cd881edce0968a111a␟3628374603023447227:Next month`,$localize`:@@ngb.datepicker.next-month␟4bd046985cfe13040d5ef0cd881edce0968a111a␟3628374603023447227:Next month`,$localize`:@@ngb.datepicker.select-month␟1dbc84807f35518112f62e5775d1daebd3d8462b␟2253869508135064750:Select month`,$localize`:@@ngb.datepicker.select-month␟1dbc84807f35518112f62e5775d1daebd3d8462b␟2253869508135064750:Select month`,$localize`:@@ngb.datepicker.select-year␟8ceb09d002bf0c5d1cac171dfbffe1805d2b3962␟8852264961585484321:Select year`,$localize`:@@ngb.datepicker.select-year␟8ceb09d002bf0c5d1cac171dfbffe1805d2b3962␟8852264961585484321:Select year`;const vS=["dialog"];function bS(t){return null!=t}$localize`:@@ngb.pagination.first␟656506dfd46380956a655f919f1498d018f75ca0␟6867721956102594380:««`,$localize`:@@ngb.pagination.previous␟6e52b6ee77a4848d899dd21b591c6fd499e3aef3␟6479320895410098858:«`,$localize`:@@ngb.pagination.next␟ba9cbb4ff311464308a3627e4f1c3345d9fe6d7d␟5458177150283468089:»`,$localize`:@@ngb.pagination.last␟49f27a460bc97e7e00be5b37098bfa79884fc7d9␟5277020320267646988:»»`,$localize`:@@ngb.pagination.first-aria␟f2f852318759c6396b5d3d17031d53817d7b38cc␟2241508602425256033:First`,$localize`:@@ngb.pagination.previous-aria␟680d5c75b7fd8d37961083608b9fcdc4167b4c43␟4452427314943113135:Previous`,$localize`:@@ngb.pagination.next-aria␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`,$localize`:@@ngb.pagination.last-aria␟5c729788ba138508aca1bec050b610f7bf81db3e␟4882268002141858767:Last`,$localize`:@@ngb.progressbar.value␟f8e9a947b9db4252c0e9905765338712f2fd032f␟3720830768741091151:${"\ufffd0\ufffd"}:INTERPOLATION:`,$localize`:@@ngb.timepicker.HH␟ce676ab1d6d98f85c836381cf100a4a91ef95a1f␟4043638465245303811:HH`,$localize`:@@ngb.timepicker.hours␟3bbce5fef7e1151da052a4e529453edb340e3912␟8070396816726827304:Hours`,$localize`:@@ngb.timepicker.MM␟72c8edf6a50068a05bde70991e36b1e881f4ca54␟1647282246509919852:MM`,$localize`:@@ngb.timepicker.minutes␟41e62daa962947c0d23ded0981975d1bddf0bf38␟5531237363767747080:Minutes`,$localize`:@@ngb.timepicker.increment-hours␟cb74bc1d625a6c1742f0d7d47306cf495780c218␟5939278348542933629:Increment hours`,$localize`:@@ngb.timepicker.decrement-hours␟147c7a19429da7d999e247d22e33fee370b1691b␟3651829882940481818:Decrement hours`,$localize`:@@ngb.timepicker.increment-minutes␟f5a4a3bc05e053f6732475d0e74875ec01c3a348␟180147720391025024:Increment minutes`,$localize`:@@ngb.timepicker.decrement-minutes␟c1a6899e529c096da5b660385d4e77fe1f7ad271␟7447789825403243588:Decrement minutes`,$localize`:@@ngb.timepicker.SS␟ebe38d36a40a2383c5fefa9b4608ffbda08bd4a3␟3628127143071124194:SS`,$localize`:@@ngb.timepicker.seconds␟4f2ed9e71a7c981db3e50ae2fedb28aff2ec4e6c␟8874012390997067175:Seconds`,$localize`:@@ngb.timepicker.increment-seconds␟912322ecee7d659d04dcf494a70e22e49d334b26␟5364772110539092174:Increment seconds`,$localize`:@@ngb.timepicker.decrement-seconds␟5db47ac104294243a70eb9124fbea9d0004ddf69␟753633511487974857:Decrement seconds`,$localize`:@@ngb.timepicker.PM␟8d6e691e10306c1b34c6b26805151aaea320ef7f␟3564199131264287502:${"\ufffd0\ufffd"}:INTERPOLATION:`,$localize`:@@ngb.timepicker.AM␟69a1f176a93998876952adac57c3bc3863b6105e␟4592818992509942761:${"\ufffd0\ufffd"}:INTERPOLATION:`,$localize`:@@ngb.toast.close-aria␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`,"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});let _S=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),wS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),ES=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)}}),t})(),CS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),SS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)}}),t})();var TS=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});const OS=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function IS(t){const e=Array.from(t.querySelectorAll(OS)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}let xS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht,XC]]}),t})(),AS=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Jb({type:t,selectors:[["",8,"navbar"]]}),t})(),jS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)}}),t})(),NS=(()=>{let t=class{constructor(){this.backdrop=!0,this.keyboard=!0}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Kb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();class kS{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const DS=()=>{};let PS=(()=>{let t=class{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):DS}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=r+t+"px",()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}};return t.\u0275fac=function(e){return new(e||t)(r.bc(a))},t.\u0275prov=Object(r.Kb)({factory:function(){return new t(Object(r.bc)(a))},token:t,providedIn:"root"}),t})(),RS=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ib({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:2,hostBindings:function(t,e){2&t&&r.Cb("modal-backdrop fade show"+(e.backdropClass?" "+e.backdropClass:""))},inputs:{backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class MS{close(t){}dismiss(t){}}class LS{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}close(t){this._windowCmptRef&&(this._resolve(t),this._removeModalElements())}_dismiss(t){this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.location.nativeElement;if(t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._backdropCmptRef){const t=this._backdropCmptRef.location.nativeElement;t.parentNode.removeChild(t),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null}}var FS=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let VS=(()=>{let t=class{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new fr.a,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.n}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){const{nativeElement:t}=this._elRef;if(this._zone.runOutsideAngular(()=>{dS(t,"keydown").pipe(pS(this._closed$),li(t=>t.which===TS.Escape&&this.keyboard)).subscribe(t=>requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(FS.ESC))}));let e=!1;dS(this._dialogEl.nativeElement,"mousedown").pipe(pS(this._closed$),Object(Zb.a)(()=>e=!1),Gr(()=>dS(t,"mouseup").pipe(pS(this._closed$),yi(1))),li(({target:e})=>t===e)).subscribe(()=>{e=!0}),dS(t,"click").pipe(pS(this._closed$)).subscribe(({target:n})=>{!0!==this.backdrop||t!==n||e||this._zone.run(()=>this.dismiss(FS.BACKDROP_CLICK)),e=!1})}),!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=IS(t)[0];(e||n||t).focus()}}ngOnDestroy(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null}),this._closed$.next()}};return t.\u0275fac=function(e){return new(e||t)(r.Ob(a),r.Ob(r.l),r.Ob(r.z))},t.\u0275cmp=r.Ib({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){var n;1&t&&r.Ac(vS,!0),2&t&&r.tc(n=r.gc())&&(e._dialogEl=n.first)},hostAttrs:["role","dialog","tabindex","-1"],hostVars:5,hostBindings:function(t,e){2&t&&(r.Bb("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.Cb("modal fade show d-block"+(e.windowClass?" "+e.windowClass:"")))},inputs:{backdrop:"backdrop",keyboard:"keyboard",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:gS,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.mc(),r.Tb(0,"div",0,1),r.Tb(2,"div",2),r.lc(3),r.Sb(),r.Sb()),2&t&&r.Cb("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),US=(()=>{let t=class{constructor(t,e,n,i,o,s){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new fr.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowAttributes=["ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new r.n,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=dS(e,"focusin").pipe(pS(n),Object(Vr.a)(t=>t.target));dS(e,"keydown").pipe(pS(n),li(t=>t.which===TS.Tab),ei(t)).subscribe(([t,n])=>{const[r,i]=IS(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&dS(e,"click").pipe(pS(n),ei(t),Object(Vr.a)(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:bS(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new MS,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),f=new LS(h,c,l,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(h),f.result.then(s,s),f.result.then(a,a),u.close=t=>{f.close(t)},u.dismiss=t=>{f.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),l&&l.instance&&this._applyBackdropOptions(l.instance,r),f}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(RS).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(VS).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{bS(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{bS(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,o){return n?n instanceof r.K?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,o):new kS([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new kS([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(""+t);return new kS([[e]])}_createFromComponent(t,e,n,i,o){const s=t.resolveComponentFactory(n),a=r.r.create({providers:[{provide:MS,useValue:i}],parent:e}),u=s.create(a),c=u.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new kS([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}};return t.\u0275fac=function(e){return new(e||t)(r.bc(r.g),r.bc(r.r),r.bc(a),r.bc(PS),r.bc(r.E),r.bc(r.z))},t.\u0275prov=Object(r.Kb)({factory:function(){return new t(Object(r.bc)(r.g),Object(r.bc)(r.o),Object(r.bc)(a),Object(r.bc)(PS),Object(r.bc)(r.E),Object(r.bc)(r.z))},token:t,providedIn:"root"}),t})(),qS=(()=>{let t=class{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign({},this._config,e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}};return t.\u0275fac=function(e){return new(e||t)(r.bc(r.j),r.bc(r.r),r.bc(US),r.bc(NS))},t.\u0275prov=Object(r.Kb)({factory:function(){return new t(Object(r.bc)(r.j),Object(r.bc)(r.o),Object(r.bc)(US),Object(r.bc)(NS))},token:t,providedIn:"root"}),t})(),HS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[qS]}),t})(),zS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),BS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),GS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),WS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),KS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),$S=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),QS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),YS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})(),ZS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)}}),t})(),JS=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[ht]]}),t})();const XS=[_S,wS,ES,CS,SS,xS,jS,HS,zS,BS,GS,WS,KS,QS,YS,ZS,JS,$S];let tT=(()=>{let t=class{};return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[XS,_S,wS,ES,CS,SS,xS,jS,HS,zS,BS,GS,WS,KS,QS,YS,ZS,JS,$S]}),t})(),eT=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ib({type:t,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"navbar","navbar-dark","bg-primary"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],["role","main",1,"content"]],template:function(t,e){1&t&&(r.Tb(0,"nav",0),r.Pb(1,"img",1),r.Tb(2,"span"),r.Ec(3,"Shani Omesi"),r.Sb(),r.Sb(),r.Tb(4,"div",2),r.Pb(5,"router-outlet"),r.Sb())},directives:[AS,_E],styles:[""]}),t})();class nT{}class rT{}class iT{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof iT?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new iT;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof iT?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class oT{encodeKey(t){return sT(t)}encodeValue(t){return sT(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function sT(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class aT{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new oT,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new aT({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function uT(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function cT(t){return"undefined"!=typeof Blob&&t instanceof Blob}function lT(t){return"undefined"!=typeof FormData&&t instanceof FormData}class hT{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new iT),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new aT,this.urlWithParams=e}serializeBody(){return null===this.body?null:uT(this.body)||cT(this.body)||lT(this.body)||"string"==typeof this.body?this.body:this.body instanceof aT?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||lT(this.body)?null:cT(this.body)?this.body.type||null:uT(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof aT?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new hT(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}const fT=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}();class dT{constructor(t,e=200,n="OK"){this.headers=t.headers||new iT,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class pT extends dT{constructor(t={}){super(t),this.type=fT.ResponseHeader}clone(t={}){return new pT({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class yT extends dT{constructor(t={}){super(t),this.type=fT.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new yT({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class mT extends dT{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function gT(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let vT=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof hT)r=t;else{let i=void 0;i=n.headers instanceof iT?n.headers:new iT(n.headers);let o=void 0;n.params&&(o=n.params instanceof aT?n.params:new aT({fromObject:n.params})),r=new hT(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(Lr.a)(r).pipe(Qb(t=>this.handler.handle(t)));if(t instanceof hT||"events"===n.observe)return i;const o=i.pipe(li(t=>t instanceof yT));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(Vr.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(Vr.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(Vr.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(Vr.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new aT).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,gT(n,e))}post(t,e,n={}){return this.request("POST",t,gT(n,e))}put(t,e,n={}){return this.request("PUT",t,gT(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.bc(nT))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();class bT{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const _T=new r.q("HTTP_INTERCEPTORS");let wT=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();const ET=/^\)\]\}',?\n/;class CT{}let ST=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),TT=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new Mr.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new iT(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new pT({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(ET,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new yT({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new mT({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new mT({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:fT.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:fT.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:fT.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.bc(CT))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})();const OT=new r.q("XSRF_COOKIE_NAME"),IT=new r.q("XSRF_HEADER_NAME");class xT{}let AT=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=et(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.bc(a),r.bc(r.B),r.bc(OT))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),jT=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.bc(xT),r.bc(IT))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),NT=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(_T,[]);this.chain=t.reduceRight((t,e)=>new bT(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.bc(rT),r.bc(r.r))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac}),t})(),kT=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:jT,useClass:wT}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:OT,useValue:e.cookieName}:[],e.headerName?{provide:IT,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[jT,{provide:_T,useExisting:jT,multi:!0},{provide:xT,useClass:AT},{provide:OT,useValue:"XSRF-TOKEN"},{provide:IT,useValue:"X-XSRF-TOKEN"}]}),t})(),DT=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[vT,{provide:nT,useClass:NT},TT,{provide:rT,useExisting:TT},ST,{provide:CT,useExisting:ST}],imports:[[kT.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),PT=(()=>{class t{}return t.\u0275mod=r.Mb({type:t,bootstrap:[eT]}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[HE,cS],imports:[[Bt,Dr.forRoot(),hr,hS,Pr.a,Pr.a.initializeApp(i),Nb,Bi,tT,XC,DT]]}),t})();Object(r.S)(),Ht().bootstrapModule(PT).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);